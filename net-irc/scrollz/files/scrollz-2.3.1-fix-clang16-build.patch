Clang16 will not allow implicit ints, implicit function declaration etc. by default

This patch overhauls the whole source code to make it work with clang16s defaults.

Bug: https://bugs.gentoo.org/870907
Patch was also sent upstream to be included in the next version:
https://github.com/ScrollZ/ScrollZ/pull/30

Signed-off-by: Pascal JÃ¤ger <pascal.jaeger@leimstift.de>

--- a/SZdist.c
+++ b/SZdist.c
@@ -102,12 +102,8 @@ char *onoffbuf;
     return(onoffbuf);
 }
 
-void addtobuf(files,buffer,choice,oldchoice,what)
-char *files;
-char *buffer;
-int  choice;
-int  oldchoice;
-int  what;
+void 
+addtobuf (char *files, char *buffer, int choice, int oldchoice, int what)
 {
     char buf[32];
     char tmpbuf[mybufsize];
@@ -145,9 +141,8 @@ struct stat *statbuf;
         printf("Error, couldn't set time on file %s\n",file);
 }
 
-int main(argc,argv)
-int argc;
-char **argv;
+int 
+main (int argc, char **argv)
 {
     int  i,choice=0,oldchoice=0;
     int  end=0;
--- a/configure
+++ b/configure
@@ -6672,13 +6672,14 @@ else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
+#include <stdlib.h>
 #include <sys/types.h>
 #include <netdb.h>
 #include <string.h>
 #include <sys/socket.h>
 #include <netinet/in.h>
 
-main()
+int main()
 {
   int passive, gaierr, inet4 = 0, inet6 = 0;
   struct addrinfo hints, *ai, *aitop;
--- a/include/blowfish.h
+++ b/include/blowfish.h
@@ -12,7 +12,7 @@ static void BlowfishEncipher _((unsigned int *, unsigned int *));
 static void BlowfishDecipher _((unsigned int *, unsigned int *));
 static void BlowfishInit _((char *, int, int));
 int EncryptString _((char *, char *, char *, int, int, int));
-int  Base64Decode _((char));
+int  Base64Decode _((int));
 int DecryptString _((char *, char *, char *, int, int));
 
 #endif /* _blowfish_h_ */
--- a/include/irc.h
+++ b/include/irc.h
@@ -60,6 +60,7 @@
 #ifdef NeXT
 #   include <libc.h>
 #endif
+#define _GNU_SOURCE
 #include <stdio.h>
 #include <ctype.h>
 #ifdef _Windows
--- a/include/server.h
+++ b/include/server.h
@@ -198,8 +198,8 @@ extern	SGroup	*server_group_list;
 	void	flush_server _((void));
         int	get_server_flag _((int, int));
 /**************************** PATCHED by Flier ******************************/
-	int	get_server_umode_flag _((int, char));
-	void    set_server_umode_flag _((int, char, int));
+	int	get_server_umode_flag _((int, int));
+	void    set_server_umode_flag _((int, int, int));
 /****************************************************************************/
 	void	set_server_operator _((int, int));
 	void	server_is_connected _((int, int));
@@ -223,6 +223,7 @@ extern	SGroup	*server_group_list;
 	void	close_all_server _((void));
 	void	disconnectcmd _((char *, char *, char *));
 	void	ctcp_reply_backlog_change _((int));
+    int is_server_ok(int server_index);
 
 	/* server_list: the list of servers that the user can connect to,etc */
 	extern	Server	*server_list;
--- a/include/whois.h
+++ b/include/whois.h
@@ -44,7 +44,8 @@
 #endif /* HAVE_STDARG_H */
 	void	add_ison_to_whois _((char *, void (*) (WhoisStuff *, char *, char *)));
 /**************************** PATCHED by Flier ******************************/
-        void	add_userhost_to_whois _((char *, void (*) (WhoisStuff *, char *, char *)));
+        /* void	add_userhost_to_whois _((char *, void (*) (WhoisStuff *, char *, char *))); */
+void add_userhost_to_whois (char *nick, void (*func)(void));
 /****************************************************************************/
         void	whois_name _((char *, char **));
 	void	whowas_name _((char *, char **));
--- a/source/alias.c
+++ b/source/alias.c
@@ -96,7 +96,7 @@ extern int  is_voiced _((char *, char *));
 extern char VersionInfo[];
 extern char *ScrollZver1;
 /****************************************************************************/
-
+extern int BuildColor (char *color, char *string, int lineno);
 extern	int	parse_number _((char **));
 static	char	*next_unit _((char *, char *, int *, int));
 /**************************** PATCHED by Flier ******************************/
@@ -608,11 +608,8 @@ insert_alias(list, nalias)
  * so, the old alias is replaced with the new one.  If the alias is not
  * already in use, it is added. 
  */
-void	
-add_alias(type, name, stuff)
-	int	type;
-	char	*name,
-		*stuff;
+void 
+add_alias (int type, char *name, char *stuff)
 {
 	Alias	*tmp;
 	char	*ptr;
@@ -656,10 +653,8 @@ add_alias(type, name, stuff)
 }
 
 /* alias_arg: a special version of next_arg for aliases */
-static	char	*
-alias_arg(str, pos)
-	char	**str;
-	u_int	*pos;
+static char *
+alias_arg (char **str, u_int *pos)
 {
 	char	*ptr;
 
@@ -685,9 +680,8 @@ alias_arg(str, pos)
 }
 
 /* word_count: returns the number of words in the given string */
-extern	int	
-word_count(str)
-	char	*str;
+extern int 
+word_count (char *str)
 {
 	int	cnt = 0;
 	char	*ptr;
@@ -728,9 +722,8 @@ built_in_alias(c)
  * its and environment variable and returns it if so.  If not, it returns
  * null.  It mallocs the returned string 
  */
-static	char	*
-find_inline(str)
-	char	*str;
+static char *
+find_inline (char *str)
 {
 	Alias	*nalias;
 	char	*ret = NULL;
@@ -756,12 +749,8 @@ find_inline(str)
 	return (ret);
 }
 
-char	*
-call_function(name, f_args, args, args_flag)
-	char	*name,
-		*f_args,
-		*args;
-	int	*args_flag;
+char *
+call_function (char *name, char *f_args, char *args, int *args_flag)
 {
 	u_char	*tmp;
 	u_char	*result = (u_char *) 0;
@@ -810,9 +799,8 @@ call_function(name, f_args, args, args_flag)
 
 
 /* Given a pointer to an operator, find the last operator in the string */
-static	char	*
-lastop(ptr)
-	char	*ptr;
+static char *
+lastop (char *ptr)
 {
 	while (ptr[1] && index("!=<>&^|#+/-*", ptr[1]))
 		ptr++;
@@ -829,12 +817,8 @@ lastop(ptr)
 #define	NU_TERT 6
 #define	NU_BITW 8
 
-static	char	*
-next_unit(str, args, arg_flag, stage)
-	char	*str,
-		*args;
-	int	*arg_flag,
-		stage;
+static char *
+next_unit (char *str, char *args, int *arg_flag, int stage)
 {
 	char	*ptr,
 		*ptr2,
@@ -1450,11 +1434,8 @@ next_unit(str, args, arg_flag, stage)
  * about this at some future date. The ^ function and some fixes by
  * troy@cbme.unsw.EDU.AU (Troy Rollo) 
  */
-char	*
-parse_inline(str, args, args_flag)
-	char	*str;
-	char	*args;
-	int	*args_flag;
+char *
+parse_inline (char *str, char *args, int *args_flag)
 {
 	return next_unit(str, args, args_flag, NU_EXPR);
 }
@@ -1478,10 +1459,7 @@ parse_inline(str, args, args_flag)
 #define	LAST_ARG 8000
 
 static char *
-arg_number(lower_lim, upper_lim, str)
-int	lower_lim,
-	upper_lim;
-char	*str;
+arg_number (int lower_lim, int upper_lim, char *str)
 {
 	char	*ptr,
 		*arg,
@@ -1564,9 +1542,8 @@ char	*str;
  *
  * "hoohar"     returns -1  and str as "hoohar" 
  */
-extern	int	
-parse_number(str)
-	char	**str;
+extern int 
+parse_number (char **str)
 {
 	int	ret;
 	char	*ptr;
@@ -1583,8 +1560,8 @@ parse_number(str)
 	return (ret);
 }
 
-static void	
-do_alias_string()
+static void 
+do_alias_string (void)
 {
 	malloc_strcpy(&alias_string, get_input());
 	irc_io_loop = 0;
@@ -1637,11 +1614,8 @@ expander_addition(buff, add, length, quote_em)
 }
 
 /* MatchingBracket returns the next unescaped bracket of the given type */
-char	*
-MatchingBracket(string, left, right)
-	char	*string;
-	int	left;
-	int	right;
+char *
+MatchingBracket (char *string, int left, int right)
 {
 	int	bracket_count = 1;
 
@@ -1677,18 +1651,11 @@ MatchingBracket(string, left, right)
  in the alias.  Otherwise it is left unchanged.
  */
 /*ARGSUSED*/
-static	char	*
-alias_special_char(name, lbuf, ptr, args, quote_em, args_flag)
-	char	*name;
 #ifndef USE_OLD_ALIAS_ALLOC
-	char	**lbuf;
+static	char	*alias_special_char (char *name, char **lbuf, char *ptr, char *args, char *quote_em, int *args_flag)
 #else /* USE_OLD_ALIAS_ALLOC */
- 	char	*lbuf;
+static	char	*alias_special_char (char *name, char *lbuf, char *ptr, char *args, char *quote_em, int *args_flag)
 #endif /* USE_OLD_ALIAS_ALLOC */
-	char	*ptr;
-	char	*args;
-	char	*quote_em;
-	int	*args_flag;
 {
 	char	*tmp,
 		c;
@@ -1870,13 +1837,8 @@ alias_special_char(name, lbuf, ptr, args, quote_em, args_flag)
  *	Backslash escapes are unescaped.
  */
 
-char	*
-expand_alias(name, string, args, args_flag, more_text)
-	char	*name,
-		*string,
-		*args;
-	int	*args_flag;
-	char	**more_text;
+char *
+expand_alias (char *name, char *string, char *args, int *args_flag, char **more_text)
 {
 #ifndef USE_OLD_ALIAS_ALLOC
 	char	*lbuf = (char *) 0,
@@ -2056,12 +2018,8 @@ expand_alias(name, string, args, args_flag, more_text)
  * mallocs the space for the full_name, but returns the actual value of the
  * alias if found! 
  */
-char	*
-get_alias(type, name, cnt, full_name)
-	int	type;
-	char	*name,
-		**full_name;
-	int	*cnt;
+char *
+get_alias (int type, char *name, int *cnt, char **full_name)
 {
 	Alias	*tmp;
 
@@ -2087,11 +2045,8 @@ get_alias(type, name, cnt, full_name)
  * This is used for command completion etc.  Note that the returned array is
  * malloced in this routine.  Returns null if no matches are found 
  */
-char	**
-match_alias(name, cnt, type)
-	char	*name;
-	int	*cnt;
-	int	type;
+char **
+match_alias (char *name, int *cnt, int type)
 {
 	Alias	*tmp;
 	char	**matches = (char **) 0;
@@ -2147,10 +2102,8 @@ match_alias(name, cnt, type)
 }
 
 /* delete_alias: The alias name is removed from the alias list. */
-void
-delete_alias(type, name)
-	int	type;
-	char	*name;
+void 
+delete_alias (int type, char *name)
 {
 	Alias	*tmp;
 
@@ -2174,10 +2127,8 @@ delete_alias(type, name)
  * list_aliases: Lists all aliases matching 'name'.  If name is null, all
  * aliases are listed 
  */
-void
-list_aliases(type, name)
-	int	type;
-	char	*name;
+void 
+list_aliases (int type, char *name)
 {
 	Alias	*tmp;
  	size_t	len;
@@ -2229,10 +2180,8 @@ list_aliases(type, name)
  * aliases, and not reusing an alias that has previously been marked.  I'll
  * explain later 
  */
-int
-mark_alias(name, flag)
-	char	*name;
-	int	flag;
+int 
+mark_alias (char *name, int flag)
 {
 	int	old_mark;
 	Alias	*tmp;
@@ -2292,11 +2241,8 @@ mark_alias(name, flag)
  * already expanded alias (both of these parameters are returned by
  * get_alias()) 
  */
-void
-execute_alias(alias_name, ealias, args)
-	char	*alias_name,
-		*ealias,
-		*args;
+void 
+execute_alias (char *alias_name, char *ealias, char *args)
 {
 	if (mark_alias(alias_name, 1))
 		say("Maximum recursion count exceeded in: %s", alias_name);
@@ -2539,11 +2485,8 @@ static u_char *alias_Celerity_version() {
  * alias: the /ALIAS command.  Calls the correct alias function depending on
  * the args 
  */
-void	
-alias(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+alias (char *command, char *args, char *subargs)
 {
 	char	*name,
 		*rest;
@@ -5119,8 +5062,8 @@ u_char *input;
 
 
 /* Removes all aliases */
-void DumpAliases(type)
-int type;
+void 
+DumpAliases (int type)
 {
     Alias *tmp;
     Alias *tmpdel;
@@ -5136,8 +5079,8 @@ int type;
 }
 
 /* Really removes structure */
-void DumpAssign(name)
-char *name;
+void 
+DumpAssign (char *name)
 {
     int found=0;
     int namelen;
@@ -5164,10 +5107,8 @@ char *name;
 
 /* Clears assigned structure */
 #ifndef LITE
-void Purge(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Purge (char *command, char *args, char *subargs)
 {
     char *name;
 
--- a/source/blowfish.c
+++ b/source/blowfish.c
@@ -133,8 +133,8 @@ extern FishDecrypt _((char *, char *, char *, int));
 extern FishEncrypt _((char *, char *, char *, int, int));
 #endif
 
-static unsigned int F(x)
-unsigned int x;
+static unsigned int 
+F (unsigned int x)
 {
     unsigned int a, b, c, d, y;
 
@@ -151,9 +151,8 @@ unsigned int x;
     return(y);
 }
 
-static void BlowfishEncipher(xl, xr)
-unsigned int *xl;
-unsigned int *xr;
+static void 
+BlowfishEncipher (unsigned int *xl, unsigned int *xr)
 {
     int i;
     unsigned int Xl, Xr, temp;
@@ -176,9 +175,8 @@ unsigned int *xr;
     *xr = Xr;
 }
 
-static void BlowfishDecipher(xl, xr)
-unsigned int *xl;
-unsigned int *xr;
+static void 
+BlowfishDecipher (unsigned int *xl, unsigned int *xr)
 {
     int i;
     unsigned int Xl, Xr, temp;
@@ -201,10 +199,8 @@ unsigned int *xr;
     *xr = Xr;
 }
 
-static void BlowfishInit(key, keybytes, oldkey)
-char *key;
-int keybytes;
-int oldkey;
+static void 
+BlowfishInit (char *key, int keybytes, int oldkey)
 {
     int i, j, k, cnt;
     unsigned int data, datal, datar;
@@ -242,13 +238,8 @@ int oldkey;
     }
 }
 
-int EncryptString(dest, src, key, bufsize, szenc, type)
-char *dest;
-char *src;
-char *key;
-int  bufsize;
-int  szenc;
-int  type;
+int 
+EncryptString (char *dest, char *src, char *key, int bufsize, int szenc, int type)
 {
     int i;
     int oldk = 0;
@@ -294,8 +285,8 @@ int  type;
     return(szenc);
 }
 
-int Base64Decode(c)
-char c;
+int 
+Base64Decode (int c)
 {
     int i;
 
@@ -303,12 +294,8 @@ char c;
     return(0);
 }
 
-int DecryptString(dest, src, key, bufsize, szenc)
-char *dest;
-char *src;
-char *key;
-int  bufsize;
-int  szenc;
+int 
+DecryptString (char *dest, char *src, char *key, int bufsize, int szenc)
 {
     int i;
     int oldk = 0;
--- a/source/cdcc.c
+++ b/source/cdcc.c
@@ -112,7 +112,7 @@ static void verbosemcommand _((char *));
 void queuemcommand _((char *));
 static void GetDir _((char *));
 static void CleanList _((void));
-static void AddFileToList _((char *, char *, float));
+static void AddFileToList _((char *, char *, double));
 static int  AddFiles2List _((char *));
 static void AddToOfferList _((char *, char *));
 static void ShowPacks _((char *));
@@ -218,10 +218,8 @@ extern char *dcc_types[];
 /************************************************************************
  * Cdcc: parse cdcc command line, and send off to correct function      *
  ************************************************************************/
-void Cdcc(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Cdcc (char *command, char *args, char *subargs)
 {
     char *word=(char *) 0;
     char *tmpstr;
@@ -254,8 +252,8 @@ char *subargs;
 /*********************************************************************
  * Gives user help                                                   *
  *********************************************************************/
-void helpmcommand(line)
-char *line;
+void 
+helpmcommand (char *line)
 {
     PrintUsage("CDCC command where command is one of :");
     say("AUTOGET  CHAN     CLOSE    DLDIR    DOFFER  FSEND   GET     IDLE    LIMIT");
@@ -268,8 +266,8 @@ char *line;
 /***********************************************************************
  * listmcommand: List packs                                            *
  ***********************************************************************/
-static void listmcommand(line)
-char *line;
+static void 
+listmcommand (char *line)
 {
     ShowPacks(line);
 }
@@ -277,8 +275,8 @@ char *line;
 /***********************************************************************
  * Sets CDCC limit                                                     *
  ***********************************************************************/
-static void limitmcommand(line)
-char *line;
+static void 
+limitmcommand (char *line)
 {
     int number;
     int isnumber=1;
@@ -315,8 +313,8 @@ char *line;
 /***********************************************************************
  * Sets idle seconds before auto-close                                 *
  ***********************************************************************/
-static void idlemcommand(line)
-char *line;
+static void 
+idlemcommand (char *line)
 {
     NumberCommand("IDLE",line,NULL);
 }
@@ -324,8 +322,8 @@ char *line;
 /***********************************************************************
  * Sets CDCC autoget on or off                                         *
  ***********************************************************************/
-static void autogetmcommand(line)
-char *line;
+static void 
+autogetmcommand (char *line)
 {
     OnOffCommand("AUTOGET",line,NULL);
     update_all_status();
@@ -334,8 +332,8 @@ char *line;
 /***********************************************************************
  * Sets CDCC security on or off                                        *
  ***********************************************************************/
-static void securemcommand(line)
-char *line;
+static void 
+securemcommand (char *line)
 {
     OnOffCommand("SECURE",line,NULL);
     update_all_status();
@@ -345,8 +343,8 @@ char *line;
 /**********************************************************************
 * Sets CDCC encode string                                             *
 ***********************************************************************/
-static void emcommand(line)
-char *line;
+static void 
+emcommand (char *line)
 {
     if (*line) malloc_strcpy(&EString,line);
     PrintSetting("Cdcc E",EString,empty_string,empty_string);
@@ -355,8 +353,8 @@ char *line;
 /**********************************************************************
 * Sets CDCC renaming on or off                                        *
 ***********************************************************************/
-static void mmcommand(line)
-char *line;
+static void 
+mmcommand (char *line)
 {
     OnOffCommand("M",line,NULL);
 }
@@ -365,8 +363,8 @@ char *line;
 /**********************************************************************
 * Sets CDCC channels for PLIST                                        *
 ***********************************************************************/
-static void channelsmcommand(line)
-char *line;
+static void 
+channelsmcommand (char *line)
 {
     char *channels;
 
@@ -382,8 +380,8 @@ char *line;
 /***********************************************************************
  * Sets seconds to pass before repeating PLIST                         *
  ***********************************************************************/
-static void ptimemcommand(line)
-char *line;
+static void 
+ptimemcommand (char *line)
 {
     NumberCommand("PTIME",line,NULL);
 }
@@ -391,8 +389,8 @@ char *line;
 /***********************************************************************
  * Sets seconds to pass before repeating NOTICE                        *
  ***********************************************************************/
-static void ntimemcommand(line)
-char *line;
+static void 
+ntimemcommand (char *line)
 {
     NumberCommand("NTIME",line,NULL);
 }
@@ -400,8 +398,8 @@ char *line;
 /***********************************************************************
  * Sets CDCC long status bar on or off                                 *
  ***********************************************************************/
-static void longstatusmcommand(line)
-char *line;
+static void 
+longstatusmcommand (char *line)
 {
     OnOffCommand("LONGSTATUS",line,NULL);
 }
@@ -409,8 +407,8 @@ char *line;
 /***********************************************************************
  * Sets CDCC overwrite on or off                                       *
  ***********************************************************************/
-static void overwritemcommand(line)
-char *line;
+static void 
+overwritemcommand (char *line)
 {
     OnOffCommand("OVERWRITE",line,NULL);
 }
@@ -418,8 +416,8 @@ char *line;
 /***********************************************************************
  * Sets showing DCC status on status bar on or off                     *
  ***********************************************************************/
-static void statusmcommand(line)
-char *line;
+static void 
+statusmcommand (char *line)
 {
     OnOffCommand("STATUS",line,NULL);
     DCCDone=0;
@@ -430,8 +428,8 @@ char *line;
 /***********************************************************************
  * Sets showing received/sent kB in PLIST on or off                    *
  ***********************************************************************/
-static void statsmcommand(line)
-char *line;
+static void 
+statsmcommand (char *line)
 {
     OnOffCommand("STATS",line,NULL);
 }
@@ -439,8 +437,8 @@ char *line;
 /***********************************************************************
  * Sets check on incoming DCCs on or off                               *
  ***********************************************************************/
-static void warningmcommand(line)
-char *line;
+static void 
+warningmcommand (char *line)
 {
     OnOffCommand("WARNING",line,NULL);
 }
@@ -448,8 +446,8 @@ char *line;
 /***********************************************************************
  * Sets verbose mode on or off                                         *
  ***********************************************************************/
-static void verbosemcommand(line)
-char *line;
+static void 
+verbosemcommand (char *line)
 {
     OnOffCommand("VERBOSE",line,NULL);
 }
@@ -457,8 +455,8 @@ char *line;
 /***********************************************************************
  * Sets CDCC upload dir                                                *
  ***********************************************************************/
-static void uldirmcommand(line)
-char *line;
+static void 
+uldirmcommand (char *line)
 {
     char *newdir;
     char *fullname=(char *) 0;
@@ -487,8 +485,8 @@ char *line;
 /***********************************************************************
  * Sets CDCC download dir                                              *
  ***********************************************************************/
-static void dldirmcommand(line)
-char *line;
+static void 
+dldirmcommand (char *line)
 {
     char *newdir;
     char *fullname=(char *) 0;
@@ -515,8 +513,8 @@ char *line;
 }
 
 /* returns DCC status as one character */
-static char dccstatus(flags)
-int flags;
+static char 
+dccstatus (int flags)
 {
     return(flags&DCC_OFFER?'O' :
            flags&DCC_DELETE?'D' :
@@ -531,8 +529,8 @@ int flags;
 /***********************************************************************
  * showdccscommand: Lists all dccs                                     *
  ***********************************************************************/
-static void showdccsmcommand(type)
-int type;
+static void 
+showdccsmcommand (int type)
 {
     int   fills;
     int   count=1,i,j;
@@ -695,9 +693,8 @@ int type;
 /***********************************************************************
  * matchmcommand: Returns true if count matches line                   *
  ***********************************************************************/
-int matchmcommand(origline,count)
-char *origline;
-int  count;
+int 
+matchmcommand (char *origline, int count)
 {
     int  startnum=0;
     int  endnum=0;
@@ -736,8 +733,8 @@ int  count;
 /**********************************************************************
 * closemcommand: Prompt User for type of dccs he wants to close       *
 ***********************************************************************/
-static void closemcommand(line)
-char *line;
+static void 
+closemcommand (char *line)
 {
     char *word;
 
@@ -756,9 +753,8 @@ char *line;
 /**********************************************************************
 * close2mcommand  This closes all user specified dccs                 *
 ***********************************************************************/
-static void close2mcommand(blah,line)
-char *blah;
-char *line;
+static void 
+close2mcommand (char *blah, char *line)
 {
     int  count=0;
     int  packcount=0;
@@ -786,8 +782,8 @@ char *line;
 /**********************************************************************
 * doffermcommand: Prompt User for removing pack                       *
 ***********************************************************************/
-static void doffermcommand(line)
-char *line;
+static void 
+doffermcommand (char *line)
 {
     char *word;
 
@@ -806,9 +802,8 @@ char *line;
 * doffer2mcommand  This parses offer file list                        *
 *                  And puts in Files Linked List                      *
 ***********************************************************************/
-static void doffer2mcommand(blah,line)
-char *blah;
-char *line;
+static void 
+doffer2mcommand (char *blah, char *line)
 {
     int   packcount=0;
     Files *tmp2;
@@ -848,9 +843,8 @@ char *line;
 }
 
 /* Formats Received/Sent */
-static void formatstats(buffer,cdccstuff)
-char *buffer;
-int cdccstuff;
+static void 
+formatstats (char *buffer, int cdccstuff)
 {
     char byteschar='k';
     char tmpbuf[mybufsize/4];
@@ -883,9 +877,8 @@ int cdccstuff;
 }
 
 /* Like CheckChannel but + before channel has special meaning */
-static int CheckCdccChannel(channels,chanlist)
-char *channels;
-char *chanlist;
+static int 
+CheckCdccChannel (char *channels, char *chanlist)
 {
     int found=0;
     int minus=0;
@@ -937,8 +930,8 @@ char *chanlist;
 }
 
 /* Sends output from plist to server (when called by timer) */
-static void sendplist(text)
-char *text;
+static void 
+sendplist (char *text)
 {
     char *msg;
     char *channel;
@@ -1042,8 +1035,8 @@ ChannelList *chan;
 /**********************************************************************
 * plistmcommand: Puts list to current channel                         *
 ***********************************************************************/
-static void plistmcommand(line)
-char *line;
+static void 
+plistmcommand (char *line)
 {
     int   current=0;
     char  *tmpchan;
@@ -1099,8 +1092,8 @@ ChannelList *chan;
 /**********************************************************************
 * noticemcommand: yells about offer to current channel                *
 ***********************************************************************/
-static void noticemcommand(line)
-char *line;
+static void 
+noticemcommand (char *line)
 {
     int   current=0;
     char  *tmpchan;
@@ -1130,8 +1123,8 @@ char *line;
  * Sets new pack description                                           *
  ***********************************************************************/
 #ifdef EXTRAS
-static void renamepackmcommand(line)
-char *line;
+static void 
+renamepackmcommand (char *line)
 {
     int  number;
     int  i;
@@ -1162,8 +1155,8 @@ char *line;
 /***********************************************************************
  * Lists files in queue                                                *
  ***********************************************************************/
-void queuemcommand(line)
-char *line;
+void 
+queuemcommand (char *line)
 {
     int  count=0;
     int  countdel=0;
@@ -1243,8 +1236,8 @@ char *line;
 * loadmcommand: loads packs from file                                 *
 ***********************************************************************/
 #ifndef LITE
-static void loadmcommand(line)
-char *line;
+static void 
+loadmcommand (char *line)
 {
     int   count=0;
     int   lineno=0;
@@ -1395,8 +1388,8 @@ char *line;
 /**********************************************************************
 * savemcommand: saves packs to file                                   *
 ***********************************************************************/
-static void savemcommand(line)
-char *line;
+static void 
+savemcommand (char *line)
 {
     int   count=0;
     int   oldumask=umask(0177);
@@ -1437,8 +1430,8 @@ char *line;
 /***********************************************************************
  * requestmcommand: Lets User tell leechers what he needs. By Zakath   *
  ***********************************************************************/
-static void requestmcommand(line)
-char *line;
+static void 
+requestmcommand (char *line)
 {
     if (line && *line) {
         CdccReqTog=1;    /* Assume request will be turned on, unless "OFF" */
@@ -1458,8 +1451,8 @@ char *line;
 /**********************************************************************
 * offermcommand: Prompt User for files                                *
 ***********************************************************************/
-static void offermcommand(line)
-char *line;
+static void 
+offermcommand (char *line)
 {
     char *speed;
     char *desc;
@@ -1493,9 +1486,8 @@ char *line;
 * offer2mcommand  This parses offer file list                         *
 *                 And puts in Files Linked List                       *
 ***********************************************************************/
-static void offer2mcommand(blah,line)
-char *blah;
-char *line;
+static void 
+offer2mcommand (char *blah, char *line)
 {
     if (line && *line) {
         if (AddFiles2List(line))
@@ -1507,9 +1499,8 @@ char *line;
 /**********************************************************************
 * offer3mcommand  This asks for description                           *
 ***********************************************************************/
-static void offer3mcommand(blah,line)
-char *blah;
-char *line;
+static void 
+offer3mcommand (char *blah, char *line)
 {
     add_wait_prompt("Pack description ? ",offer4mcommand,line,WAIT_PROMPT_LINE);
 }
@@ -1517,9 +1508,8 @@ char *line;
 /**********************************************************************
 * offer4mcommand  Final part of pack creation                         *
 ***********************************************************************/
-static void offer4mcommand(blah,line)
-char *blah;
-char *line;
+static void 
+offer4mcommand (char *blah, char *line)
 {
     if (line && *line) AddToOfferList(blah,line);
     else say("You must specify pack description");
@@ -1529,9 +1519,8 @@ char *line;
 /**********************************************************************
 * AddToOfferList:  Adds Files to offer List                           *
 ***********************************************************************/
-static void AddToOfferList(speed,desc)
-char *speed;
-char *desc;
+static void 
+AddToOfferList (char *speed, char *desc)
 {
     int   totalfiles=0;
     float totalbytes=0;
@@ -1609,8 +1598,8 @@ char *desc;
 /**********************************************************************
 * sendmcommand: Prompt User for files                                 *
 ***********************************************************************/
-static void sendmcommand(line)
-char *line;
+static void 
+sendmcommand (char *line)
 {
     char *x = line, *comma = NULL;
 
@@ -1637,9 +1626,8 @@ char *line;
 * send2mcommand  This parses file send list                           *
 *                Files Linked list                                    *
 ***********************************************************************/
-static void send2mcommand(blah,line)
-char *blah;
-char *line;
+static void 
+send2mcommand (char *blah, char *line)
 {
     if (line && *line) {
         if (AddFiles2List(line))
@@ -1652,9 +1640,8 @@ char *line;
 * send3mcommand  This parses nick send list, and sends all files in   *
 *                Files Linked list                                    *
 ***********************************************************************/
-static void send3mcommand(blah,line)
-char *blah;
-char *line;
+static void 
+send3mcommand (char *blah, char *line)
 {
     int  count;
     int  queue=0;
@@ -1745,8 +1732,8 @@ char *line;
 * fsendmcommand: Prompt User for files                                 *
 ***********************************************************************/
 #ifdef EXTRAS
-static void fsendmcommand(line)
-char *line;
+static void 
+fsendmcommand (char *line)
 {
     char *x = line, *comma = NULL;
 
@@ -1773,9 +1760,8 @@ char *line;
 * fsend2mcommand  This parses file send list                           *
 *                 Files Linked list                                    *
 ***********************************************************************/
-static void fsend2mcommand(blah,line)
-char *blah;
-char *line;
+static void 
+fsend2mcommand (char *blah, char *line)
 {
     if (line && *line) {
         if (AddFiles2List(line))
@@ -1788,9 +1774,8 @@ char *line;
 * fsend3mcommand  This parses nick send list, and sends all files in   *
 *                 Files Linked list                                    *
 ***********************************************************************/
-static void fsend3mcommand(blah,line)
-char *blah;
-char *line;
+static void 
+fsend3mcommand (char *blah, char *line)
 {
     int  count;
     char byteschar;
@@ -1848,8 +1833,8 @@ char *line;
 /**********************************************************************
 * resendmcommand: Prompt User for files                               *
 ***********************************************************************/
-static void resendmcommand(line)
-char *line;
+static void 
+resendmcommand (char *line)
 {
     char *x = line, *comma = NULL;
 
@@ -1877,9 +1862,8 @@ char *line;
 * resend2mcommand  This parses file resend list                       *
 *                  Files Linked list                                  *
 ***********************************************************************/
-static void resend2mcommand(blah,line)
-char *blah;
-char *line;
+static void 
+resend2mcommand (char *blah, char *line)
 {
     if (line && *line) {
         if (AddFiles2List(line))
@@ -1892,9 +1876,8 @@ char *line;
 * resend3mcommand  This parses nick resend list, and resends all files   *
 *                  in Files Linked list                                  *
 **************************************************************************/
-static void resend3mcommand(blah,line)
-char *blah;
-char *line;
+static void 
+resend3mcommand (char *blah, char *line)
 {
     int  count=0;
     char byteschar;
@@ -1949,8 +1932,8 @@ char *line;
 * psendmcommand: Prompt User for pack                                 *
 ***********************************************************************/
 #ifndef LITE
-static void psendmcommand(line)
-char *line;
+static void 
+psendmcommand (char *line)
 {
     char *x = line, *comma = NULL;
 
@@ -1984,9 +1967,8 @@ char *line;
 * psend2mcommand  This parses nick send list, and sends all files in  *
 *                Pack Linked list                                     *
 ***********************************************************************/
-static void psend2mcommand(blah,line)
-char *blah;
-char *line;
+static void 
+psend2mcommand (char *blah, char *line)
 {
     if (line && *line)
         add_wait_prompt("Send to whom ? (ie. nick1 nick2 nick3) ",psend3mcommand,line,WAIT_PROMPT_LINE);
@@ -1996,9 +1978,8 @@ char *line;
 /**********************************************************************
 * psend3mcommand  This parses pack send list                          *
 ***********************************************************************/
-static void psend3mcommand(blah,line)
-char *blah;
-char *line;
+static void 
+psend3mcommand (char *blah, char *line)
 {
     int  packcount;
     char *nick;
@@ -2029,9 +2010,8 @@ char *line;
 * SeedFiles: Gets Users Line of Files with path, and rips em apart    *
 * Puts path, file, and size into Files linked list.                   *
 ***********************************************************************/ 
-static int SeedFiles(line,error)
-char *line;
-int  error;
+static int 
+SeedFiles (char *line, int error)
 {
     int  i=0;
     int  size=0;
@@ -2105,10 +2085,8 @@ int  error;
 /**********************************************************************
 * Add File to  FILES linked list                                      *
 ***********************************************************************/
-static void AddFileToList(path,file,size)
-char *path;
-char *file;
-float size;
+static void 
+AddFileToList (char *path, char *file, double size)
 {
     Files *new;
     Files *tmp;
@@ -2128,8 +2106,8 @@ float size;
 /**********************************************************************
 * Returns number of files added to list                               *
 ***********************************************************************/
-static int AddFiles2List(line)
-char *line;
+static int 
+AddFiles2List (char *line)
 {
     int   count=0;
     char  *file=(char *) 0;
@@ -2177,7 +2155,8 @@ char *line;
 /*********************************************************************
 * Deletes the file link list                                         *
 **********************************************************************/
-static void DeleteSend()
+static void 
+DeleteSend (void)
 {
     Files *tmp;
     Files *next;
@@ -2194,8 +2173,8 @@ static void DeleteSend()
 /*********************************************************************
 * Shows the offer link list                                          *
 **********************************************************************/
-static void ShowPacks(args)
-char *args;
+static void 
+ShowPacks (char *args)
 {
     int   packcount=1;
     char  byteschar;
@@ -2260,8 +2239,8 @@ char *args;
 /*********************************************************************
 * GetDir:  This gets the listing of all the files in *ptr dir.       *
 **********************************************************************/
-static void GetDir(path)
-char *path;
+static void 
+GetDir (char *path)
 {
     CleanList();
     CdccEntries=scandir(path, &CdccFileNames,
@@ -2272,7 +2251,8 @@ char *path;
 /*********************************************************************
 * CleanList: Cleans up global dirent                                 *
 **********************************************************************/
-static void CleanList()
+static void 
+CleanList (void)
 {
     int i;
 
@@ -2286,9 +2266,8 @@ static void CleanList()
 /*********************************************************************
 * compar: used by scandir to alphabetize files in dir                *
 **********************************************************************/
-static int compar(e1,e2)
-struct dirent **e1;
-struct dirent **e2;
+static int 
+compar (struct dirent **e1, struct dirent **e2)
 {
     return (my_stricmp((*e1)->d_name,(*e2)->d_name));
 }
@@ -2297,8 +2276,8 @@ struct dirent **e2;
 * selectent: used by scandir to decide which entries to include in the dir *
 *            listing.  Ignores ., includes all other files                 *
 ****************************************************************************/
-static int selectent(entry)
-struct dirent *entry;
+static int 
+selectent (struct dirent *entry)
 {
     if (*(entry->d_name)=='.') return (0);
     else return(1);
@@ -2308,9 +2287,8 @@ struct dirent *entry;
 * GetSize: takes path, and filename, cats them together, and returns   *
 *          filesize of file, if dir, returns -1                        *
 ************************************************************************/
-static float GetSize(path,file)
-char *path;
-char *file;
+static float 
+GetSize (char *path, char *file)
 {
     char  tmpbuf[mybufsize/2];
 
@@ -2323,8 +2301,8 @@ char *file;
 /**********************************************************************
 * getmcommand: Prompt User for nick (* for all)                       *
 ***********************************************************************/
-static void getmcommand(line)
-char *line;
+static void 
+getmcommand (char *line)
 {
     char *word;
 
@@ -2340,9 +2318,8 @@ char *line;
 * get2mcommand:          This will parse your dcc list, and get files *
 *                        Specified by your filter.                    *
 ***********************************************************************/
-static void get2mcommand(data, line)
-char *data;
-char *line;
+static void 
+get2mcommand (char *data, char *line)
 {
     int  count = 0;
     int  mode;
@@ -2373,11 +2350,8 @@ char *line;
 }
 
 /* Parse message to see what they want. */
-void CheckCdcc(nick,args,to,msg)
-char *nick;
-char *args;
-char *to;
-int  msg;
+void 
+CheckCdcc (char *nick, char *args, char *to, int msg)
 {
     int  level=0;
     char *command=(char *) 0;
@@ -2448,9 +2422,8 @@ int  msg;
 }
 
 /* send msg'er help menu */
-static void helpcommand(from,args)
-char *from;
-char *args;
+static void 
+helpcommand (char *from, char *args)
 {
     if (CTCPCloaking) return;
     if (args && *args) {
@@ -2471,9 +2444,8 @@ char *args;
 }
 
 /* send msg'er version reply */
-static void versioncommand(from, args)
-char *from;
-char *args;
+static void 
+versioncommand (char *from, char *args)
 {
     if (CTCPCloaking) return;
     send_to_server("NOTICE %s :Cdcc v" CDCC_VERSION " written by Sheik & Flier",from);
@@ -2481,16 +2453,15 @@ char *args;
 }
 
 /* Sends to server w/o print */
-static void sendlist(text)
-char *text;
+static void 
+sendlist (char *text)
 {
     send_to_server("%s",text);
 }
 
 /* Check what listing type they want. */
-static void listcommand(from,args)
-char *from;
-char *args;
+static void 
+listcommand (char *from, char *args)
 {
     int   count=0;
     int   multdelay;
@@ -2572,9 +2543,8 @@ char *args;
 }
 
 /* List files in queue */
-static void queuecommand(from,args)
-char *from;
-char *args;
+static void 
+queuecommand (char *from, char *args)
 {
     int i=1;
     int cnt=0;
@@ -2607,11 +2577,8 @@ char *args;
 }
 
 /* Send pack that they request */
-static void sendcommand(from,args,resend,level)
-char *from;
-char *args;
-int  resend;
-int  level;
+static void 
+sendcommand (char *from, char *args, int resend, int level)
 {
     int   packcount=1;
     int   totalfiles=0;
@@ -2756,7 +2723,8 @@ int  level;
 * TotalSendDcc:          Return Total Dcc Sends Currently on Dcc      *
 *                        Linked List.                                 *
 ***********************************************************************/
-int TotalSendDcc()
+int 
+TotalSendDcc (void)
 {
     DCC_list *Client;
     unsigned flags;
@@ -2772,7 +2740,8 @@ int TotalSendDcc()
 }
 
 /* return number of files in queue */
-int TotalQueue()
+int 
+TotalQueue (void)
 {
     int count=0;
     FileQueue *tmp;
@@ -2782,11 +2751,8 @@ int TotalQueue()
 }
 
 /* get offer files if auto-get is on */
-void CheckAutoGet(nick,userhost,file,type)
-char *nick;
-char *userhost;
-char *file;
-char *type;
+void 
+CheckAutoGet (char *nick, char *userhost, char *file, char *type)
 {
     char tmpbuf[mybufsize/4];
     struct friends *tmpfriend;
@@ -2822,7 +2788,8 @@ char *type;
 /**********************************************************************
 * CheckCdccTimer:        Checks pending Cdcc timer stuff              *
 ***********************************************************************/
-void CheckCdccTimers()
+void 
+CheckCdccTimers (void)
 {
     int  current=0;
     int  oldserver;
@@ -3025,8 +2992,8 @@ int   flag;
 /**********************************************************************
 * RemoveFromQueue:       Removes file from queue                      *
 ***********************************************************************/
-void RemoveFromQueue(removed)
-int removed;
+void 
+RemoveFromQueue (int removed)
 {
     int active=TotalSendDcc()-removed;
     int oldserver;
@@ -3058,9 +3025,8 @@ int removed;
 /**********************************************************************
 * CdccQueueNickChange:   Handle nick change                           *
 ***********************************************************************/
-void CdccQueueNickChange(oldnick,newnick)
-char *oldnick;
-char *newnick;
+void 
+CdccQueueNickChange (char *oldnick, char *newnick)
 {
     FileQueue *tmp=queuelist;
 
@@ -3073,7 +3039,8 @@ char *newnick;
 /**********************************************************************
 * CleanUpCdcc:           Free all allocated memory                    *
 ***********************************************************************/
-void CleanUpCdcc() {
+void 
+CleanUpCdcc (void) {
     Files *tmpfile;
     Files *tmpfilefree;
     Packs *tmppack;
@@ -3103,7 +3070,8 @@ void CleanUpCdcc() {
     }
 }
 
-void CdccTimeWarning() {
+void 
+CdccTimeWarning (void) {
     say("Warning: your CDCC PLIST or NLIST timer is set below two hours.");
     say("Due to a lot of complaints about this the above timers have been");
     say("increased to two hours. If you feel your values are apropriate");
--- a/source/celerity.c
+++ b/source/celerity.c
@@ -43,10 +43,8 @@ static int Cqstat=0; /* Status of QuickStat: 1=on, 0=off */
 /******************** Beginning of code section ********************/
 
 /* Change the status bar [/set STATUSBAR] */
-void Cstatusbar(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Cstatusbar (char *command, char *args, char *subargs)
 {
     int n=0;
     u_int old_display;
@@ -87,10 +85,8 @@ char *subargs;
     else say("Error: Invalid status bar number (1 - %d)",Cstatusnum);
 }
 
-void Cquickstat(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Cquickstat (char *command, char *args, char *subargs)
 {
     char tmpbuf[mybufsize/16];
 
--- a/source/crypt.c
+++ b/source/crypt.c
@@ -449,8 +449,8 @@ alarmer()
 
 }
 
-static int
-crypt_dev_random_byte()
+static int 
+crypt_dev_random_byte (void)
 {
 	static	int	devrndfd = -1;
 	u_char	c;
--- a/source/ctcp.c
+++ b/source/ctcp.c
@@ -342,14 +342,8 @@ static int dropit(int allowtwo) {
     return(0);
 }
 
-static int request(ctcp,mynick,nick,userhost,channel,privs,required)
-char *ctcp;
-char *mynick;
-char *nick;
-char *userhost;
-char *channel;
-int  privs;
-int  required;
+static int 
+request (char *ctcp, char *mynick, char *nick, char *userhost, char *channel, int privs, int required)
 {
     int access=privs&required;
 #ifdef WANTANSI
@@ -387,30 +381,28 @@ int  required;
     return(privs);
 }
 
-static void wrongpassword(nick)
-char *nick;
+static void 
+wrongpassword (char *nick)
 {
     strmcat(tmpaway,", wrong password",sizeof(tmpaway));
     send_to_server("NOTICE %s :Invalid password!  -ScrollZ-",nick);
     if (away_set || LogOn) AwaySave(tmpaway,SAVECTCP);
 }
 
-static void notchanop(nick,channel)
-char *nick;
-char *channel;
+static void 
+notchanop (char *nick, char *channel)
 {
     send_to_server("NOTICE %s :I'm not opped on channel %s -ScrollZ-",nick,channel);
 }
 
-static void disabled(nick)
-char *nick;
+static void 
+disabled (char *nick)
 {
     send_to_server("NOTICE %s :This function has been disabled  -ScrollZ-",nick);
 }
 
-static int checkpassword(tmpfriend, passwd)
-struct friends *tmpfriend;
-char *passwd;
+static int 
+checkpassword (struct friends *tmpfriend, char *passwd)
 {
     char passbuf[mybufsize / 8];
 
@@ -1636,11 +1628,11 @@ do_utc(ctcp, from, to, args)
 	if (!args || !*args)
 		return NULL;
 	tm = atol(args);
-	curtime = ctime(&tm);
+	curtime = (time_t)ctime(&tm);
 
 	if (curtime)
 	{
-		u_char *s = index(curtime, '\n');
+		u_char *s = index((const char *)curtime, '\n');
 		if (s)
 		{
 			*s = '\0';
@@ -1660,11 +1652,8 @@ do_utc(ctcp, from, to, args)
  * such messages are removed from the original str, so after do_ctcp()
  * returns, str will be changed
  */
-char	*
-do_ctcp(from, to, str)
-	char	*from,
-		*to,
-		*str;
+char *
+do_ctcp (char *from, char *to, char *str)
 {
 	int	i = 0,
 		ctcp_flag = 1;
@@ -1909,11 +1898,8 @@ clear_ctcp_reply_buffer:
 	return (ctcp_buffer);
 }
 
-char	*
-do_notice_ctcp(from, to, str)
-	char	*from,
-		*to,
-		*str;
+char *
+do_notice_ctcp (char *from, char *to, char *str)
 {
 	char	*cmd;
 
@@ -1944,12 +1930,8 @@ do_notice_ctcp(from, to, str)
 	return (ctcp_buffer);
 }
 
-static	void
-do_new_notice_ctcp(from, to, str, cmd)
-	char	*from,
-		*to,
-		**str,
-		*cmd;
+static void 
+do_new_notice_ctcp (char *from, char *to, char **str, char *cmd)
 {
 	char	*end,
 		*args,
@@ -2110,8 +2092,8 @@ do_new_notice_ctcp(from, to, str, cmd)
 }
 
 /* in_ctcp: simply returns the value of the ctcp flag */
-int
-in_ctcp()
+int 
+in_ctcp (void)
 {
 	return (in_ctcp_flag);
 }
--- a/source/dcc.c
+++ b/source/dcc.c
@@ -365,11 +365,8 @@ DCC_list *Client;
     if (away_set || LogOn) AwaySave(tmpbuf1,SAVEDCC);
 }
 
-static void PrintError(type,user,description,error)
-char *type;
-char *user;
-char *description;
-char *error;
+static void 
+PrintError (char *type, char *user, char *description, char *error)
 {
     char *tmpstr="to";
     char tmpbuf1[mybufsize/4];
@@ -522,8 +519,8 @@ dcc_erase(Element)
 		}
 }
 
-static	void
-dcc_really_erase()
+static void 
+dcc_really_erase (void)
 {
 	struct deadlist *dies;
 
@@ -539,9 +536,8 @@ dcc_really_erase()
  * Set the descriptor set to show all fds in Client connections to
  * be checked for data.
  */
-void
-set_dcc_bits(rd, wd)
-	fd_set	*rd, *wd;
+void 
+set_dcc_bits (fd_set *rd, fd_set *wd)
 {
 	DCC_list	*Client;
 
@@ -566,10 +562,8 @@ set_dcc_bits(rd, wd)
  * Check all DCCs for data, and if they have any, perform whatever
  * actions are required.
  */
-void
-dcc_check(rd, wd)
-	fd_set	*rd,
-		*wd;
+void 
+dcc_check (fd_set *rd, fd_set *wd)
 {
 	DCC_list	**Client;
 	struct	timeval	time_out;
@@ -710,9 +704,8 @@ dcc_check(rd, wd)
 /*
  * Process a DCC command from the user.
  */
-void
-process_dcc(args)
-	char	*args;
+void 
+process_dcc (char *args)
 {
 	char	*command;
 	int	i;
@@ -920,10 +913,8 @@ dcc_open(Client)
 
 /**************************** PATCHED by Flier ******************************/
 /*static void*/
-void
-/****************************************************************************/
-dcc_chat(args)
-	char	*args;
+void 
+dcc_chat (char *args)
 {
 	char	*user;
 	DCC_list	*Client;
@@ -944,9 +935,8 @@ dcc_chat(args)
 }
 
 #ifndef LITE
-char	*
-dcc_raw_listen(iport)
- 	u_int	iport;
+char *
+dcc_raw_listen (u_int iport)
 {
 	DCC_list	*Client;
 	char	PortName[10];
@@ -1004,10 +994,8 @@ dcc_raw_listen(iport)
 	return RetName;
 }
 
-char	*
-dcc_raw_connect(host, iport)
-	char	*host;
- 	u_int	iport;
+char *
+dcc_raw_connect (char *host, u_int iport)
 {
 	DCC_list	*Client;
 	char	PortName[10];
@@ -1332,10 +1320,8 @@ send_talk_control(Client, MessageType)
 
 /**************************** PATCHED by Flier ******************************/
 /*static	void*/
-void
-/****************************************************************************/
-dcc_filesend(args)
-	char	*args;
+void 
+dcc_filesend (char *args)
 {
 	char	*user;
 	char	*filename,
@@ -1434,9 +1420,8 @@ dcc_filesend(args)
 }
 
 /**************************** PATCHED by Flier ******************************/
-void
-dcc_resend(args)
-	char	*args;
+void 
+dcc_resend (char *args)
 {
 	char	*user;
 	char	*filename,
@@ -1522,10 +1507,8 @@ dcc_resend(args)
 
 /**************************** PATCHED by Flier ******************************/
 /*static	void*/
-void
-/****************************************************************************/
-dcc_getfile(args)
-	char	*args;
+void 
+dcc_getfile (char *args)
 {
 	char	*user;
 	char	*filename;
@@ -1611,9 +1594,8 @@ dcc_getfile(args)
 }
 
 #ifdef BROKEN_MIRC_RESUME
-void
-dcc_getfile_resume(args)
-	char	*args;
+void 
+dcc_getfile_resume (char *args)
 {
 	char		*user;
 	char		*filename;
@@ -1673,12 +1655,8 @@ dcc_getfile_resume(args)
 		Client->description, Client->remport, sb.st_size);
 }
 
-void
-dcc_getfile_resume_demanded(user, filename, port, offset)
-	char	*user,
-		*filename,
-		*port,
-		*offset;
+void 
+dcc_getfile_resume_demanded (char *user, char *filename, char *port, char *offset)
 {
 	DCC_list	*Client;
 
@@ -1694,12 +1672,8 @@ dcc_getfile_resume_demanded(user, filename, port, offset)
 		filename, port, offset);
 }
 
-void
-dcc_getfile_resume_start(user, filename, port, offset)
-	char	*user,
-		*filename,
-		*port,
-		*offset;
+void 
+dcc_getfile_resume_start (char *user, char *filename, char *port, char *offset)
 {
 	DCC_list	*Client;
 
@@ -1718,9 +1692,8 @@ dcc_getfile_resume_start(user, filename, port, offset)
 #endif /* BROKEN_MIRC_RESUME */
 
 /**************************** PATCHED by Flier ******************************/
-void
-dcc_regetfile(args)
-	char	*args;
+void 
+dcc_regetfile (char *args)
 {
 	char	*user;
 	char	*filename;
@@ -1818,14 +1791,8 @@ dcc_regetfile(args)
 }
 /****************************************************************************/
 
-void
-register_dcc_offer(user, type, description, address, port, size)
-	char	*user;
-	char	*type;
-	char	*description;
-	char	*address;
-	char	*port;
-	char	*size;
+void 
+register_dcc_offer (char *user, char *type, char *description, char *address, char *port, char *size)
 {
 	DCC_list	*Client;
 	int	CType;
@@ -2689,12 +2656,8 @@ process_incoming_file(Client)
 
 /* flag == 1 means show it.  flag == 0 used by redirect */
 
-void
-dcc_message_transmit(user, text, type, flag)
-	char	*user;
-	char	*text;
-	int	type,
-		flag;
+void 
+dcc_message_transmit (char *user, char *text, int type, int flag)
 {
 	DCC_list	*Client;
 	char	tmp[BIG_BUFFER_SIZE+1];
@@ -2828,10 +2791,8 @@ out1:
 	return;
 }
 
-void
-dcc_chat_transmit(user,	text)
-	char	*user;
-	char	*text;
+void 
+dcc_chat_transmit (char *user, char *text)
 {
 	dcc_message_transmit(user, text, DCC_CHAT, 1);
 }
@@ -2853,9 +2814,8 @@ dcc_tmsg(args)
 /****************************************************************************/
 
 #ifndef LITE
-static	void
-dcc_send_raw(args)
-	char	*args;
+static void 
+dcc_send_raw (char *args)
 {
 	char	*name;
 
@@ -2877,9 +2837,8 @@ dcc_send_raw(args)
  * format of "hours:minutes:seconds month day year" .  Used by 
  * dcc_list() to show the start time.
  */
-static	char	*
-dcc_time(the_time)
-	time_t	the_time;
+static char *
+dcc_time (time_t the_time)
 {
 	struct	tm	*btime;
 	char	*buf;
@@ -2900,9 +2859,8 @@ dcc_time(the_time)
 		return empty_string;
 }
 
-void
-dcc_list(args)
-	char	*args;
+void 
+dcc_list (char *args)
 {
 	DCC_list	*Client;
 	static	char	*format =
@@ -2945,10 +2903,8 @@ dcc_list(args)
 
 /**************************** PATCHED by Flier ******************************/
 /*static	void*/
-void
-/****************************************************************************/
-dcc_close(args)
-	char	*args;
+void 
+dcc_close (char *args)
 {
 	DCC_list	*Client;
 	unsigned	flags;
@@ -3016,9 +2972,8 @@ out:
 
 /* this depends on dcc_rename() setting loglevel */
 #ifndef LITE
-static void
-dcc_chat_rename(args)
-	char	*args;
+static void 
+dcc_chat_rename (char *args)
 {
 	DCC_list	*Client;
 	char	*user;
@@ -3062,9 +3017,8 @@ dcc_chat_rename(args)
 }
 
 
-static	void
-dcc_rename(args)
-	char	*args;
+static void 
+dcc_rename (char *args)
 {
 	DCC_list	*Client;
 	char	*user;
@@ -3117,8 +3071,8 @@ out:
  * want them to..
  */
 
-void
-close_all_dcc()
+void 
+close_all_dcc (void)
 {
 	DCC_list *Client;
 
@@ -3135,7 +3089,8 @@ close_all_dcc()
    returns 1 if system stores numbers in little indian/big indian order,
    returns 0 if system stores numbers in big indian/little indian order.
  */
-unsigned char byteordertest()
+unsigned char 
+byteordertest (void)
 {
     unsigned short test=DCC_PACKETID;
 
@@ -3159,10 +3114,8 @@ add_to_dcc_buffer(Client, buf)
 	}
 }
 
-void dcc_reject(user, type, filename)
-char *user;
-char *type;
-char *filename;
+void 
+dcc_reject (char *user, char *type, char *filename)
 {
     int i;
     DCC_list *Client;
--- a/source/debug.c
+++ b/source/debug.c
@@ -50,9 +50,8 @@
 
 int	debuglevel = 0;
 
-int
-setdlevel(level)
-	int	level;
+int 
+setdlevel (int level)
 {
 	int	oldlevel = debuglevel;
 
@@ -60,7 +59,8 @@ setdlevel(level)
 	return oldlevel;
 }
 
-int	getdlevel()
+int 
+getdlevel (void)
 {
 	return debuglevel;
 }
--- a/source/edit.c
+++ b/source/edit.c
@@ -99,6 +99,8 @@ static	char	*do_channel _((char *, int, int));
 /****************************************************************************/
 static	void	send_action _((char *, char *));
 
+extern void PopLine(void);
+
 TimerList *PendingTimers = (TimerList *) 0;
 
 /* used with input_move_cursor */
@@ -600,7 +602,7 @@ IrcCommand irc_command[] =
   { "EGO", 		"EGO", 		OnOffCommand, 		0 },
   { "ENCRMSG",		NULL, 		EncryptMsg, 		0 },
 #ifndef LITE
-	{ "ENCRYPT",	NULL,		encrypt_cmd,		0 },
+	{ "ENCRYPT",	NULL,		(void (*)(char *, char *, char *))encrypt_cmd,		0 },
 #endif
   { "ETDELIM",		NULL, 		TopicDelimiter, 	0 },
   { "ETOPIC",		NULL, 		ExtendTopic, 		0 },
@@ -1085,11 +1087,8 @@ find_command(com, cnt)
 }
 
 /*ARGSUSED*/
-static	void
-ctcp(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+ctcp (char *command, char *args, char *subargs)
 {
 	char	*to,
 		*tag;
@@ -1119,11 +1118,8 @@ ctcp(command, args, subargs)
 }
 
 /*ARGSUSED*/
-static	void
-hook(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+hook (char *command, char *args, char *subargs)
 {
 	if (*args)
 		do_hook(HOOK_LIST, "%s", args);
@@ -1132,11 +1128,8 @@ hook(command, args, subargs)
 }
 
 /*ARGSUSED*/
-static	void
-dcc(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+dcc (char *command, char *args, char *subargs)
 {
 	if (*args)
 		process_dcc(args);
@@ -1148,20 +1141,14 @@ dcc(command, args, subargs)
 }
 
 /*ARGSUSED*/
-static	void
-deop(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+deop (char *command, char *args, char *subargs)
 {
 	send_to_server("MODE %s -o", get_server_nickname(from_server));
 }
 
-static	void
-funny_stuff(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+funny_stuff (char *command, char *args, char *subargs)
 {
 	char	*arg,
 		*cmd = (char *) 0,
@@ -1242,12 +1229,8 @@ funny_stuff(command, args, subargs)
 /*ARGSUSED*/
 /**************************** PATCHED by Flier ******************************/
 /*static	void*/
-void
-/****************************************************************************/
-waitcmd(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+waitcmd (char *command, char *args, char *subargs)
 {
 	int	wait_index;
 	char	*flag;
@@ -1314,9 +1297,8 @@ waitcmd(command, args, subargs)
 	waiting--;
 }
 
-int
-check_wait_command(nick)
-	char 	*nick;
+int 
+check_wait_command (char *nick)
 {
 	if (waiting && !strcmp(nick, lame_wait_nick))
 	{
@@ -1337,11 +1319,8 @@ check_wait_command(nick)
 }
 
 /*ARGSUSED*/
-static	void
-redirect(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+redirect (char *command, char *args, char *subargs)
 {
 	char	*to;
 
@@ -1388,11 +1367,8 @@ redirect(command, args, subargs)
 }
 
 /*ARGSUSED*/
-static	void
-sleepcmd(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+sleepcmd (char *command, char *args, char *subargs)
 {
 	char	*arg;
 
@@ -1407,11 +1383,8 @@ sleepcmd(command, args, subargs)
  * processes the flags first, then displays the text on
  * the screen
  */
-static void
-my_echo(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+my_echo (char *command, char *args, char *subargs)
 {
 	unsigned int	display;
 	int	lastlog_level = 0;
@@ -1469,10 +1442,8 @@ my_echo(command, args, subargs)
 
 /*
  */
-static	void
-oper_password_received(data, line)
-	char	*data;
-	char	*line;
+static void 
+oper_password_received (char *data, char *line)
 {
 	send_to_server("OPER %s %s", data, line);
 /**************************** PATCHED by Flier ******************************/
@@ -1483,11 +1454,8 @@ oper_password_received(data, line)
 
 /* oper: the OPER command.  */
 /*ARGSUSED*/
-static	void
-oper(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+oper (char *command, char *args, char *subargs)
 {
 	char	*password;
 	char	*nick;
@@ -1532,11 +1500,8 @@ oper(command, args, subargs)
 /* Full scale abort.  Does a "save" into the filename in line, and
         then does a coredump */
 #ifndef LITE
-static  void   
-abortcmd(command, args, subargs)
-	char    *command,
-		*args,
-		*subargs;
+static void 
+abortcmd (char *command, char *args, char *subargs)
 {
         char    *filename = next_arg(args, &args);
 
@@ -1553,10 +1518,8 @@ abortcmd(command, args, subargs)
 #endif /* LITE */
         
 /* This generates a file of your ircII setup */
-static	void
-really_save(file, line)
-	char	*file;
-	char	*line;
+static void 
+really_save (char *file, char *line)
 {
 /**************************** PATCHED by Flier ******************************/
         int     oldumask;
@@ -1594,11 +1557,8 @@ really_save(file, line)
 
 /* save_settings: saves the current state of IRCII to a file */
 /*ARGSUSED*/
-static	void
-save_settings(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+save_settings (char *command, char *args, char *subargs)
 {
 	char	buffer[BIG_BUFFER_SIZE+1];
 	char	*arg, *temp;
@@ -1681,13 +1641,8 @@ save_settings(command, args, subargs)
  * do_channel : checks whether the channel has already been joined and
  * returns the channel's name if not
  */
-static	char *
-/**************************** Patched by Flier ******************************/
-/*do_channel(chan, force)*/
-do_channel(chan, force, nowho)
-	char	*chan;
-	int force;
-	int nowho;
+static char *
+do_channel (char *chan, int force, int nowho)
 /****************************************************************************/
 {
 	ChannelList	*channel;
@@ -1744,8 +1699,8 @@ do_channel(chan, force, nowho)
 
 /**************************** PATCHED by Flier ******************************/
 /* fix_channel: add # in front of channel if necessary */
-static char *fix_channel(channel)
-char *channel;
+static char *
+fix_channel (char *channel)
 {
     static char chanbuf[mybufsize / 2 + 2];
 
@@ -1764,12 +1719,8 @@ char *channel;
  */
 /**************************** PATCHED by Flier ******************************/
 /*static	void*/
-void
-/****************************************************************************/
-e_channel(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+e_channel (char *command, char *args, char *subargs)
 {
 	char	*chan;
  	size_t	len;
@@ -1900,11 +1851,8 @@ out:
 
 /* comment: does the /COMMENT command, useful in .ircrc */
 /*ARGSUSED*/
-static	void
-commentcmd(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+commentcmd (char *command, char *args, char *subargs)
 {
 	/* nothing to do... */
 }
@@ -1916,12 +1864,8 @@ commentcmd(command, args, subargs)
 /*ARGSUSED*/
 /**************************** PATCHED by Flier ******************************/
 /*static	void*/
-void
-/****************************************************************************/
-e_nick(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+e_nick (char *command, char *args, char *subargs)
 {
 	char	*nick;
 
@@ -1967,11 +1911,8 @@ e_nick(command, args, subargs)
 }
 
 /* version: does the /VERSION command with some IRCII version stuff */
-static	void
-version(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+version (char *command, char *args, char *subargs)
 {
 	char	*host;
 
@@ -1992,11 +1933,8 @@ version(command, args, subargs)
  * I updated most of the text -phone, feb 1993.
  */
 #ifndef LITE
-static	void
-info(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+info (char *command, char *args, char *subargs)
 {
 	if (!args || !*args)
 	{
@@ -2046,11 +1984,8 @@ ison_now(notused,notused2,nicklist)
 /****************************************************************************/
 }
 
-static	void
-ison(command, args, subargs)
-	char	*command;
-	char	*args,
-		*subargs;
+static void 
+ison (char *command, char *args, char *subargs)
 {
 	if (!args[strspn(args, " ")])
 		args = get_server_nickname(from_server);
@@ -2064,12 +1999,8 @@ ison(command, args, subargs)
  */
 /**************************** PATCHED by Flier ******************************/
 /*static	void*/
-void
-/****************************************************************************/
-userhost(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+userhost (char *command, char *args, char *subargs)
 {
 	int	n = 0,
 		total = 0,
@@ -2141,11 +2072,8 @@ userhost(command, args, subargs)
  * whois: the WHOIS and WHOWAS commands.  This translates the 
  * to the whois handlers in whois.c 
  */
-static	void
-whois(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+whois (char *command, char *args, char *subargs)
 {
 /*************************** PATCHED by Flier ****************************/
 	/*if (args && *args)
@@ -2171,11 +2099,8 @@ whois(command, args, subargs)
  * whoo_stuff accordingly.  Who_mask and who_stuff are used in whoreply() in
  * parse.c 
  */
-static	void
-who(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+who (char *command, char *args, char *subargs)
 {
 	char	*arg,
 		*channel = NULL;
@@ -2365,11 +2290,8 @@ who(command, args, subargs)
  * it out.
  */
 /*ARGSUSED*/
-void
-query(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+query (char *command, char *args, char *subargs)
 {
 	char	*nick,
 		*rest;
@@ -2434,12 +2356,8 @@ out:
  */
 /**************************** PATCHED by Flier ******************************/
 /*static	void*/
-void
-/****************************************************************************/
-away(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+away (char *command, char *args, char *subargs)
 {
  	size_t	len;
 	char	*arg = NULL;
@@ -2523,11 +2441,8 @@ away(command, args, subargs)
 
 /* e_quit: The /QUIT, /EXIT, etc command */
 /*ARGSUSED*/
-void
-e_quit(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+e_quit (char *command, char *args, char *subargs)
 {
 /**************************** PATCHED by Flier ******************************/
 	/*int	max;
@@ -2553,11 +2468,8 @@ e_quit(command, args, subargs)
 
 /* flush: flushes all pending stuff coming from the server */
 /*ARGSUSED*/
-static	void
-flush(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+flush (char *command, char *args, char *subargs)
 {
 	if (get_int_var(HOLD_MODE_VAR))
 	{
@@ -2572,11 +2484,8 @@ flush(command, args, subargs)
 
 /* e_wall: used for WALL and WALLOPS */
 #ifndef LITE
-static	void
-e_wall(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+e_wall (char *command, char *args, char *subargs)
 {
  	save_message_from();
 	if (strcmp(command, "WALL") == 0)
@@ -2600,10 +2509,8 @@ e_wall(command, args, subargs)
 }
 #endif
 
-void
-redirect_msg(dest, msg)
-	char *dest;
-	char *msg;
+void 
+redirect_msg (char *dest, char *msg)
 {
 	char	buffer[BIG_BUFFER_SIZE];
 
@@ -2622,11 +2529,8 @@ redirect_msg(dest, msg)
  * e_privmsg: The MSG command, displaying a message on the screen indicating
  * the message was sent.  Also, this works for the NOTICE command. 
  */
-static	void
-e_privmsg(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+e_privmsg (char *command, char *args, char *subargs)
 {
 	char	*nick;
 /**************************** PATCHED by Flier ******************************/
@@ -2690,11 +2594,8 @@ e_privmsg(command, args, subargs)
  * is simply send directly to the server 
  */
 /*ARGSUSED*/
-static	void
-quote(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+quote (char *command, char *args, char *subargs)
 {
 	if (!in_on_who)
 		send_to_server("%s", args);
@@ -2702,11 +2603,8 @@ quote(command, args, subargs)
 
 /* clear: the CLEAR command.  Figure it out */
 /*ARGSUSED*/
-static	void
-my_clear(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+my_clear (char *command, char *args, char *subargs)
 {
 	char	*arg;
 	int	all = 0,
@@ -2739,11 +2637,8 @@ my_clear(command, args, subargs)
  * send_comm: the generic command function.  Uses the full command name found
  * in 'command', combines it with the 'args', and sends it to the server 
  */
-static	void
-send_comm(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+send_comm (char *command, char *args, char *subargs)
 {
 /**************************** PATCHED by Flier ******************************/
         if (command && *command) {
@@ -2780,11 +2675,8 @@ send_comm(command, args, subargs)
 }
 
 
-static	void
-send_topic(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+send_topic (char *command, char *args, char *subargs)
 {
 	u_char	*arg;
 	u_char	*arg2;
@@ -2816,11 +2708,8 @@ send_topic(command, args, subargs)
 }
 
 #ifndef LITE
-static void
-send_squery(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+send_squery (char *command, char *args, char *subargs)
 {
 	put_it("*** Sent to service %s: %s", command, args);
 	send_2comm(command, args, subargs);
@@ -2832,11 +2721,8 @@ send_squery(command, args, subargs)
  * one comment. Used for KILL and SQUIT.
  */
 
-static	void
-send_2comm(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+send_2comm (char *command, char *args, char *subargs)
 {
  	char	*comment;
 
@@ -2854,11 +2740,8 @@ send_2comm(command, args, subargs)
  * and 0-n args. Used for MODE.
  */
   
-static	void
-send_channel_nargs(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+send_channel_nargs (char *command, char *args, char *subargs)
 {
 	char	*arg1 = 0,
 	        *s = get_channel_by_refnum(0);
@@ -2886,11 +2769,8 @@ send_channel_nargs(command, args, subargs)
  * one arg and one comment. Used for KICK
  */
 
-static	void
-send_channel_2args(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+send_channel_2args (char *command, char *args, char *subargs)
 {
 	char	*arg1 = 0,
 		*comment = 0,
@@ -2923,11 +2803,8 @@ send_channel_2args(command, args, subargs)
  * send_channel_1arg: Sends a command to the server with one channel
  * and one comment. Used for PART (LEAVE)
  */
-static	void
-send_channel_1arg(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+send_channel_1arg (char *command, char *args, char *subargs)
 {
 	char	*comment,
 		*s = get_channel_by_refnum(0);
@@ -2963,11 +2840,8 @@ send_channel_1arg(command, args, subargs)
  * command.  Currently, only NOTICEs and PRIVMSGS work. 
  * fixed to not be anal about "/msg foo,bar foobar" -phone
  */
-void
-send_text(org_nick, line, command)
-	char	*org_nick;
-	char	*line;
-	char	*command;
+void 
+send_text (char *org_nick, char *line, char *command)
 {
 #ifndef LITE
  	crypt_key	*key;
@@ -3318,11 +3192,8 @@ out:
  	restore_message_from();
 }
 
-static void
-do_send_text(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+do_send_text (char *command, char *args, char *subargs)
 {
 	char	*tmp;
 /**************************** PATCHED by Flier ******************************/ 
@@ -3359,10 +3230,8 @@ do_send_text(command, args, subargs)
  * command_completion: builds lists of commands and aliases that match the
  * given command and displays them for the user's lookseeing 
  */
-void
-command_completion(key, ptr)
- 	u_int	key;
-	char *	ptr;
+void 
+command_completion (u_int key, char *ptr)
 {
 	int	do_aliases;
 	int	cmd_cnt,
@@ -3513,14 +3382,8 @@ command_completion(key, ptr)
  *
  * Other than these two conventions the line is left basically untouched.
  */
-void
-parse_line(name, org_line, args, hist_flag, append_flag, eat_space)
-	char	*name,
-		*org_line,
-		*args;
-	int	hist_flag,
-		append_flag,
-		eat_space;
+void 
+parse_line (char *name, char *org_line, char *args, int hist_flag, int append_flag, int eat_space)
 {
 	char	*line = NULL,
 		*free_line, *stuff, *start, *lbuf, *s, *t;
@@ -3596,11 +3459,8 @@ parse_line(name, org_line, args, hist_flag, append_flag, eat_space)
  * characters or anything (beyond those specific for a given command being
  * executed). 
  */
-void
-parse_command(line, hist_flag, sub_args)
-	char	*line;
-	int	hist_flag;
-	char	*sub_args;
+void 
+parse_command (char *line, int hist_flag, char *sub_args)
 {
 	static	unsigned int	 level = 0;
 	unsigned int	display,
@@ -3784,11 +3644,8 @@ parse_command(line, hist_flag, sub_args)
  * though it were typed in (passes each line to parse_command). 
  */
 /*ARGSUSED*/
-void
-load(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+load (char *command, char *args, char *subargs)
 {
 	FILE	*fp;
 	char	*filename,
@@ -4095,9 +3952,8 @@ load(command, args, subargs)
  * get_history: gets the next history entry, either the PREV entry or the
  * NEXT entry, and sets it to the current input string 
  */
-static void	
-get_history(which)
-	int	which;
+static void 
+get_history (int which)
 {
 	char	*ptr;
 
@@ -4110,42 +3966,32 @@ get_history(which)
 }
 
 /* BIND function: */
-void
-forward_character(key, ptr)
- 	u_int	key;
-	char *	ptr;
+void 
+forward_character (u_int key, char *ptr)
 {
 	input_move_cursor(RIGHT);
 }
 
-void
-backward_character(key, ptr)
- 	u_int	key;
-	char *	ptr;
+void 
+backward_character (u_int key, char *ptr)
 {
 	input_move_cursor(LEFT);
 }
 
-void
-backward_history(key, ptr)
- 	u_int	key;
-	char *	ptr;
+void 
+backward_history (u_int key, char *ptr)
 {
 	get_history(PREV);
 }
 
-void
-forward_history(key, ptr)
- 	u_int	key;
-	char *	ptr;
+void 
+forward_history (u_int key, char *ptr)
 {
 	get_history(NEXT);
 }
 
-void
-toggle_insert_mode(key, ptr)
- 	u_int	key;
-	char *	ptr;
+void 
+toggle_insert_mode (u_int key, char *ptr)
 {
 /**************************** PATCHED by Flier ******************************/
 	/*set_var_value(INSERT_MODE_VAR, "TOGGLE");*/
@@ -4154,10 +4000,8 @@ toggle_insert_mode(key, ptr)
 }
 
 /*ARGSUSED*/
-void
-send_line(key, ptr)
- 	u_int	key;
-	char *	ptr;
+void 
+send_line (u_int key, char *ptr)
 {
 	int	server;
 	WaitPrompt	*OldPrompt;
@@ -4205,11 +4049,8 @@ send_line(key, ptr)
 
 /* The SENDLINE command.. */
 #ifndef LITE
-static	void
-sendlinecmd(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+sendlinecmd (char *command, char *args, char *subargs)
 {
 	int	server;
 	int	display;
@@ -4229,92 +4070,72 @@ sendlinecmd(command, args, subargs)
 
 /*ARGSUSED*/
 #ifndef LITE
-void
-meta8_char(key, ptr)
-	u_int	key;
-	char *	ptr;
+void 
+meta8_char (u_int key, char *ptr)
 {
 	current_screen->meta8_hit = 1;
 }
 
 /*ARGSUSED*/
-void
-meta7_char(key, ptr)
-	u_int	key;
-	char *	ptr;
+void 
+meta7_char (u_int key, char *ptr)
 {
 	current_screen->meta7_hit = 1;
 }
 
 /*ARGSUSED*/
-void
-meta6_char(key, ptr)
-	u_int	key;
-	char *	ptr;
+void 
+meta6_char (u_int key, char *ptr)
 {
 	current_screen->meta6_hit = 1;
 }
 #endif /* LITE */
 
 /*ARGSUSED*/
-void
-meta5_char(key, ptr)
-	u_int	key;
-	char *	ptr;
+void 
+meta5_char (u_int key, char *ptr)
 {
 	current_screen->meta5_hit = 1;
 }
 
 /*ARGSUSED*/
-void
-meta4_char(key, ptr)
- 	u_int	key;
-	char *	ptr;
+void 
+meta4_char (u_int key, char *ptr)
 {
 	current_screen->meta4_hit = 1 - current_screen->meta4_hit;
 }
 
 /*ARGSUSED*/
-void
-meta3_char(key, ptr)
- 	u_int	key;
-	char *	ptr;
+void 
+meta3_char (u_int key, char *ptr)
 {
 	current_screen->meta3_hit = 1;
 }
 
 /*ARGSUSED*/
-void
-meta2_char(key, ptr)
- 	u_int	key;
-	char *	ptr;
+void 
+meta2_char (u_int key, char *ptr)
 {
 	current_screen->meta2_hit = 1;
 }
 
 /*ARGSUSED*/
-void
-meta1_char(key, ptr)
- 	u_int	key;
-	char *	ptr;
+void 
+meta1_char (u_int key, char *ptr)
 {
 	current_screen->meta1_hit = 1;
 }
 
-void
-quote_char(key, ptr)
- 	u_int	key;
-	char *	ptr;
+void 
+quote_char (u_int key, char *ptr)
 {
 	current_screen->quote_hit = 1;
 }
 
 /* type_text: the BIND function TYPE_TEXT */
 /*ARGSUSED*/
-void
-type_text(key, ptr)
- 	u_int	key;
-	char	*ptr;
+void 
+type_text (u_int key, char *ptr)
 {
 	for (; *ptr; ptr++)
  		input_add_character((u_int)*ptr, (char *) 0);
@@ -4325,20 +4146,16 @@ type_text(key, ptr)
  * starts it if it is held 
  */
 /*ARGSUSED*/
-void
-irc_clear_screen(key, ptr)
- 	u_int	key;
-	char	*ptr;
+void 
+irc_clear_screen (u_int key, char *ptr)
 {
 	hold_mode((Window *) 0, OFF, 1);
 	my_clear(NULL, empty_string, empty_string);
 }
 
 /* parse_text: the bindable function that executes its string */
-void
-parse_text(key, ptr)
- 	u_int	key;
-	char	*ptr;
+void 
+parse_text (u_int key, char *ptr)
 {
 	parse_line(NULL, ptr, empty_string, 0, 0, 0);
 }
@@ -4347,9 +4164,8 @@ parse_text(key, ptr)
  * edit_char: handles each character for an input stream.  Not too difficult
  * to work out.
  */
-void
-edit_char(ikey)
- 	u_int ikey;
+void 
+edit_char (u_int ikey)
 {
  	void	(*func) _((u_int, char *));
 	char	*str;
@@ -4491,11 +4307,8 @@ edit_char(ikey)
 
 /*ARGSUSED*/
 #ifndef LITE
-static	void
-catter(command, args, subargs)
-	char *command;
-	char *args;
-	char *subargs;
+static void 
+catter (char *command, char *args, char *subargs)
 {
 	char *target = next_arg(args, &args);
 
@@ -4523,11 +4336,8 @@ catter(command, args, subargs)
 #endif
 
 /*ARGSUSED*/
-static	void
-cd(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+cd (char *command, char *args, char *subargs)
 {
 	char	lbuf[BIG_BUFFER_SIZE+1];
 	char	*arg,
@@ -4555,9 +4365,8 @@ cd(command, args, subargs)
 	say("Current directory: %s", lbuf);
 }
 
-static	void
-send_action(target, text)
-	char	*target, *text;
+static void 
+send_action (char *target, char *text)
 {
 /**************************** Patched by Flier ******************************/
         if (ChanLog && is_channel(target)) {
@@ -4575,9 +4384,8 @@ send_action(target, text)
 }
 
 #ifdef LYNX_STUFF
-static	char	*
-prepare_action(string)
-	char	*string;
+static char *
+prepare_action (char *string)
 {
 	short	last;
 	char	*message;
@@ -4602,12 +4410,8 @@ prepare_action(string)
 
 /**************************** PATCHED by Flier ******************************/
 /*static	void*/
-void
-/****************************************************************************/
-describe(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+describe (char *command, char *args, char *subargs)
 {
 	char	*target;
 /**************************** PATCHED by Flier ******************************/
@@ -4701,12 +4505,8 @@ describe(command, args, subargs)
  */
 /**************************** PATCHED by Flier ******************************/
 /*static	void*/
-void
-/****************************************************************************/
-me(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+me (char *command, char *args, char *subargs)
 {
 /**************************** PATCHED by Flier ******************************/
         char *thing;
@@ -4788,11 +4588,8 @@ me(command, args, subargs)
 }
 
 #ifndef LITE
-static	void
-mload(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+mload (char *command, char *args, char *subargs)
 {
 	char	*file;
 
@@ -4800,11 +4597,8 @@ mload(command, args, subargs)
 		load_menu(file);
 }
 
-static	void
-mlist(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+mlist (char *command, char *args, char *subargs)
 {
 	char	*menu;
 
@@ -4813,11 +4607,8 @@ mlist(command, args, subargs)
 }
 #endif /* LITE */
 
-static	void
-evalcmd(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+evalcmd (char *command, char *args, char *subargs)
 {
 	parse_line(NULL, args, subargs ? subargs : empty_string, 0, 0, 0);
 }
@@ -4828,8 +4619,8 @@ evalcmd(command, args, subargs)
  * current_exec_timer, so that we can't remove the timer while its
  * still executing.
  */
-extern	void
-execute_timer()
+extern void 
+execute_timer (void)
 {
 	struct timeval current;
 	TimerList *next;
@@ -4873,12 +4664,8 @@ execute_timer()
  */
 /**************************** PATCHED by Flier ******************************/
 /*static	void*/
-void
-/****************************************************************************/
-timercmd(command, args, subargs)
-	char	*command;
-	char	*args,
-	*subargs;
+void 
+timercmd (char *command, char *args, char *subargs)
 {
 	char	*waittime, *flag;
 	struct	timeval timertime;
@@ -5031,9 +4818,8 @@ timercmd(command, args, subargs)
  * show_timer:  Display a list of all the TIMER commands that are
  * pending to be executed.
  */
-static	void
-show_timer(command)
-	char	*command;
+static void 
+show_timer (char *command)
 {
 	u_char  lbuf[BIG_BUFFER_SIZE];
 	TimerList *tmp;
@@ -5072,9 +4858,8 @@ show_timer(command)
  * create_timer_ref:  returns the lowest unused reference number for
  * a timer
  */
-static	int
-create_timer_ref(want)
-	int	want;
+static int 
+create_timer_ref (int want)
 {
 	TimerList	*tmp;
 	int	ref = 0;
@@ -5108,7 +4893,8 @@ create_timer_ref(want)
 
 /**************************** PATCHED by Flier ******************************/
 /* Clean up all memory used by timers */
-void CleanUpTimer() {
+void 
+CleanUpTimer (void) {
     TimerList *tmptimer;
 
     while (PendingTimers) {
@@ -5129,11 +4915,8 @@ void CleanUpTimer() {
  */
 
 #ifndef LITE
-static	void
-inputcmd(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+inputcmd (char *command, char *args, char *subargs)
 {
 	char	*prompt;
 
@@ -5167,20 +4950,15 @@ inputcmd(command, args, subargs)
  * get an input prompt ..
  */
 
-void
-eval_inputlist(args, line)
-	char	*args,
-		*line;
+void 
+eval_inputlist (char *args, char *line)
 {
 	parse_line(NULL, args, line ? line : empty_string, 0, 0, 0);
 }
 
 /* pingcmd: ctcp ping, duh - phone, jan 1993. */
-static	void
-pingcmd(command, args, subargs)
-	char    *command,
-		*args,
-		*subargs;
+static void 
+pingcmd (char *command, char *args, char *subargs)
 {
 	char	buffer[BIG_BUFFER_SIZE+1];
 
@@ -5203,11 +4981,8 @@ pingcmd(command, args, subargs)
 }
 
 #ifndef LITE
-static	void
-xtypecmd(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+xtypecmd (char *command, char *args, char *subargs)
 {
 	char	*arg;
  	size_t	len;
@@ -5238,11 +5013,8 @@ xtypecmd(command, args, subargs)
 	return;
 }
 
-static	void
-beepcmd(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+static void 
+beepcmd (char *command, char *args, char *subargs)
 {
 	term_beep();
 }
--- a/source/edit2.c
+++ b/source/edit2.c
@@ -182,6 +182,9 @@ extern void describe _((char *, char *, char *));
 extern void swap_window _((Window *, Window *));
 extern void irc_goto_window _((int));
 
+extern int  DecryptMessage _((char *, char *));
+extern int  EncryptMessage _((char *, char *));
+
 static char *tmpbuflist=(char *) 0;
 static int  listcount;
 static int  countall;
@@ -197,10 +200,8 @@ static time_t CeleAwayTime=0;
 extern char *CelerityNtfy;
 
 /* Kicks all unopped people from current channel */
-void LameKick(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+LameKick (char *command, char *args, char *subargs)
 {
     int  all=0;
     int  count=0;
@@ -249,10 +250,8 @@ char *subargs;
 }
 
 /* Sends NOTICE to all ops of Current Channel!       */
-void ChanWallOp(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ChanWallOp (char *command, char *args, char *subargs)
 {
     int  server = 0;
     int  maxnicks = get_int_var(MAX_WALLOP_NICKS_VAR);
@@ -387,9 +386,8 @@ char *subargs;
     if (!opscount) say("There are no channel operators in %s", chan->channel);
 }
 
-void MegaMode(args,type)
-char *args;
-int type;
+void 
+MegaMode (char *args, int type)
 {
     char *argument;
     char *channel;
@@ -530,74 +528,58 @@ int type;
 }
 
 /* MegaDeops channel */
-void MegaDeop(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+MegaDeop (char *command, char *args, char *subargs)
 {
     MegaMode(args,4);
 }
 
 /* MegaDehalfop channl */
-void MegaDehalfop(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+MegaDehalfop (char *command, char *args, char *subargs)
 {
     MegaMode(args,2);
 }
 
 /* MegaReops channel */
-void MegaReop(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+MegaReop (char *command, char *args, char *subargs)
 {
     MegaMode(args,6);
 }
 
 /* MassOp channel */
-void MassOp(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+MassOp (char *command, char *args, char *subargs)
 {
     MegaMode(args,5);
 }
 
 /* MassHalfop channl */
-void MassHalfop(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+MassHalfop (char *command, char *args, char *subargs)
 {
     MegaMode(args,3);
 }
 
 #ifdef EXTRAS
 /* MegaVoice channel */
-void MegaVoice(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+MegaVoice (char *command, char *args, char *subargs)
 {
     MegaMode(args,1);
 }
 
 /* MegaDeVoice channel */
-void MegaDeVoice(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+MegaDeVoice (char *command, char *args, char *subargs)
 {
     MegaMode(args,0);
 }
 #endif
 
-void DoDops(chops, channel, type)
-char *chops;
-char *channel;
-int type;
+void 
+DoDops (char *chops, char *channel, int type)
 {
     int  send = 0;
     int  count = 0;
@@ -681,10 +663,8 @@ int type;
 }
 
 /* Newuser, stolen from Hendrix, and fixed up */
-void NewUser(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+NewUser (char *command, char *args, char *subargs)
 {
     char *tmp;
 
@@ -700,10 +680,8 @@ char *subargs;
 }
 
 /* Reconnects you to server, storing all current info */
-void ReconnectServer(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ReconnectServer (char *command, char *args, char *subargs)
 {
     int port;
     int servernum = from_server;
@@ -721,8 +699,8 @@ char *subargs;
 }
 
 /* Reconnects you to server on kill */
-void ReconnectOnKill(servernum)
-int servernum;
+void 
+ReconnectOnKill (int servernum)
 {
     int flag=1;
     int change=0;
@@ -753,10 +731,8 @@ int servernum;
 }
 
 /* Kicks nick from the current channel */
-void Kick(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Kick (char *command, char *args, char *subargs)
 {
     char *channel;
     char *tmpnick=(char *) 0;
@@ -793,10 +769,8 @@ char *subargs;
 }
 
 /* Changes default ban type */
-void BanType(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+BanType (char *command, char *args, char *subargs)
 {
     char *tmptype;
     char tmpbuf[mybufsize/4];
@@ -878,10 +852,8 @@ int  timer;
 }
 
 /* Bans nick on the current channel */
-void Ban(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Ban (char *command, char *args, char *subargs)
 {
     char *channel = (char *) 0;
     char *tmpnick;
@@ -940,10 +912,8 @@ char *text;
 
 /* Bans and kicks nick from the current channel */
 /* Also handles ignore and timed ban */
-void BanKick(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+BanKick (char *command, char *args, char *subargs)
 {
 #ifdef EXTRAS
     int unbantime = 6;
@@ -1079,10 +1049,8 @@ char *text;
 }
 
 /* Ops nick on the current channel */
-void Op(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Op (char *command, char *args, char *subargs)
 {
     char flag;
     int  count = 0;
@@ -1146,10 +1114,8 @@ char *subargs;
 }
 
 /* Invites nick to your current channel */
-void Invite(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Invite (char *command, char *args, char *subargs)
 {
     char *tmpnick;
     char *tmpchannel=(char *) 0;
@@ -1184,10 +1150,8 @@ char *subargs;
 }
 
 /* Leaves current or specified channel */
-void Leave(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Leave (char *command, char *args, char *subargs)
 {
     char *p;
     char *comment = NULL;
@@ -1219,10 +1183,8 @@ char *subargs;
 }
 
 /* Does a -ntislmpak on your current channel */
-void ModeClear(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ModeClear (char *command, char *args, char *subargs)
 {
     char *channel=(char *) 0;
     char tmpbuf[mybufsize/2];
@@ -1246,10 +1208,8 @@ char *subargs;
 }
 
 /* Prints out all nicks on your current or specified channel */
-void ChannelScan(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ChannelScan (char *command, char *args, char *subargs)
 {
 #ifdef NEWCSCAN
     int  count = 0;
@@ -1523,10 +1483,8 @@ char *subargs;
 }
 
 /* Lists all the friends you have on your friends list */
-void ListFriends(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ListFriends (char *command, char *args, char *subargs)
 {
     DontHold=0;
     if (args && *args) malloc_strcpy(&tmpbuflist,args);
@@ -1539,8 +1497,8 @@ char *subargs;
 }
 
 /* Lists one page of friends list */
-void ListFriendsPage(line)
-char *line;
+void 
+ListFriendsPage (char *line)
 {
     int  count=3;
     int  filter;
@@ -1615,9 +1573,8 @@ char *line;
 }
 
 /* This waits for key press */
-void ListFriendsKey(stuff,line)
-char *stuff;
-char *line;
+void 
+ListFriendsKey (char *stuff, char *line)
 {
     if (line && (*line=='q' || *line=='Q' || *line=='E')) {
         if (*line=='E') say("%d out of %d entries matched your filter",listcount,
@@ -1631,10 +1588,8 @@ char *line;
 }
 
 /* Lists all the people you have on your auto (ban) kick list */
-void ListAutoBanKicks(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ListAutoBanKicks (char *command, char *args, char *subargs)
 {
     DontHold=0;
     if (args && *args) malloc_strcpy(&tmpbuflist,args);
@@ -1648,9 +1603,8 @@ char *subargs;
 
 
 /* Returns shit level as flags */
-void BuildShit(shitentry, buffer)
-struct autobankicks *shitentry;
-char *buffer;
+void 
+BuildShit (struct autobankicks *shitentry, char *buffer)
 {
     if (shitentry && shitentry->shit) {
         if ((shitentry->shit) & SLKICK) strcat(buffer, "K");
@@ -1663,8 +1617,8 @@ char *buffer;
 }
 
 /* This lists one page of auto (ban) kicks list */
-void ListABKsPage(line)
-char *line;
+void 
+ListABKsPage (char *line)
 {
     int  count=2;
 #ifdef WANTANSI
@@ -1718,9 +1672,8 @@ char *line;
 }
 
 /* This waits for key press */
-void ListABKsKey(stuff,line)
-char *stuff;
-char *line;
+void 
+ListABKsKey (char *stuff, char *line)
 {
     if (line && (*line=='q' || *line=='Q' || *line=='E')) {
         if (*line=='E') say("%d out of %d entries matched your filter",listcount,
@@ -1734,10 +1687,8 @@ char *line;
 }
 
 /* Shows or sets topic for current or specified channel */
-void Topic(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Topic (char *command, char *args, char *subargs)
 {
     int iscrypted;
     char *channel;
@@ -1795,10 +1746,8 @@ char *subargs;
 }
 
 /* Connects to default or specified server */
-void FServer(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+FServer (char *command, char *args, char *subargs)
 {
     if (args && *args) servercmd(NULL,args,NULL);
     else if (my_stricmp(DefaultServer,"NONE")) servercmd(NULL,DefaultServer,NULL);
@@ -1806,10 +1755,8 @@ char *subargs;
 }
 
 /* Leaves and joins current or specified channel */
-void Cycle(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Cycle (char *command, char *args, char *subargs)
 {
     char *tmpchannel = NULL;
     char tmpbuf[mybufsize / 4];
@@ -1837,10 +1784,8 @@ char *subargs;
 }
 
 /* Saves friends into ScrollZ.save file */
-void ScrollZSave(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ScrollZSave (char *command, char *args, char *subargs)
 {
     int  ulistcount;
     int  slistcount;
@@ -2235,9 +2180,8 @@ char *subargs;
 }
 
 /* Returns friend's privilege (if it finds him/her on your friends list, else 0 */
-struct friends *CheckUsers(userhost,channels)
-char *userhost;
-char *channels;
+struct friends *
+CheckUsers (char *userhost, char *channels)
 {
     struct friends *tmpfriend;
 
@@ -2260,9 +2204,8 @@ char *channels;
 }
 
 /* Returns autobankicker's shit-level (if it finds him/her on your abks list, else 0 */
-struct autobankicks *CheckABKs(userhost,channel)
-char *userhost;
-char *channel;
+struct autobankicks *
+CheckABKs (char *userhost, char *channel)
 {
     struct autobankicks *tmpabk;
 
@@ -2312,10 +2255,8 @@ ChannelList *tmpchan;
 }
 
 /* Redirects last message/notice to current or specified channel */
-void DirLM(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+DirLM (char *command, char *args, char *subargs)
 {
     int  msg=1;
     char *tmparg;
@@ -2341,10 +2282,8 @@ char *subargs;
 }
 
 /* Adds friend to your friends list with specified privileges */
-void AddFriend(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+AddFriend (char *command, char *args, char *subargs)
 {
     int quiet=0;
     char *tmpnick=(char *) 0;
@@ -2406,9 +2345,8 @@ char *text;
 }
 
 /* Returns the integer from specified privileges */
-int CheckPrivs(privs,buffer)
-char *privs;
-char *buffer;
+int 
+CheckPrivs (char *privs, char *buffer)
 {
     int  i=0;
     char *tmpprivs=(char *) 0;
@@ -2498,18 +2436,16 @@ char *buffer;
 }
 
 /* Returns Y/N */
-char *YNreply(what)
-int what;
+char *
+YNreply (int what)
 {
     if (what) return("Y");
     else return("N");
 }
 
 /* This really adds him/her to your friends list */
-void AddFriend2List(nick,userhost,buffer)
-char *nick;
-char *userhost;
-char *buffer;
+void 
+AddFriend2List (char *nick, char *userhost, char *buffer)
 {
     int  i=0;
     int  domsg=1;
@@ -2619,10 +2555,8 @@ char *buffer;
 }
 
 /* Adds someone on your auto-ban-kick list */
-void AddAutoBanKick(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+AddAutoBanKick (char *command, char *args, char *subargs)
 {
     char *tmpnick;
     char *tmpchan;
@@ -2690,9 +2624,8 @@ char *text;
 }
 
 /* Returns integer from specified shit level */
-int CheckShit(shit, buffer)
-char *shit;
-char *buffer;
+int 
+CheckShit (char *shit, char *buffer)
 {
     int i = 0;
     char *tmpshit = (char *) 0;
@@ -2736,10 +2669,8 @@ char *buffer;
 }
 
 /* This really adds user to shitlist */
-void AddBK2List(userhost,shit,reason)
-char *userhost;
-char *shit;
-char *reason;
+void 
+AddBK2List (char *userhost, char *shit, char *reason)
 {
     int i=0;
     char *tmpchan=(char *) 0;
@@ -2789,10 +2720,8 @@ char *reason;
 }
 
 /* Show bans on current or specified channel */
-void ShowBans(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ShowBans (char *command, char *args, char *subargs)
 {
     int  count=0;
     char *channel=(char *) 0;
@@ -2831,10 +2760,8 @@ char *subargs;
 }
 
 /* Removes friend from your friends list */
-void RemoveFriend(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+RemoveFriend (char *command, char *args, char *subargs)
 {
     char *tmpnick=(char *) 0;
     char tmpbuf[mybufsize/4];
@@ -2878,8 +2805,8 @@ char *tmpnick;
 }
 
 /* This really removes him/her from your friends list */
-void RemoveFriendFromList(userhost)
-char *userhost;
+void 
+RemoveFriendFromList (char *userhost)
 {
     int  found=0;
     int  filter;
@@ -2953,10 +2880,8 @@ char *userhost;
 }
 
 /* Removes user from your auto (ban) kick list */
-void RemoveAutoBanKick(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+RemoveAutoBanKick (char *command, char *args, char *subargs)
 {
     char *tmpnick=(char *) 0;
     char tmpbuf[mybufsize/4];
@@ -3000,8 +2925,8 @@ char *tmpnick;
 }
 
 /* This really removes him/her from your auto (ban) kick list */
-void RemoveAutoBanKickFromList(userhost)
-char *userhost;
+void 
+RemoveAutoBanKickFromList (char *userhost)
 {
     int found=0;
     int count=0;
@@ -3056,10 +2981,8 @@ char *userhost;
 }
 
 /* Does /CTCP nick VERSION */
-void Version(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Version (char *command, char *args, char *subargs)
 {
     char *target=NULL;
 
@@ -3072,10 +2995,8 @@ char *subargs;
 }
 
 /* Unbans nick */
-void Unban(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Unban (char *command, char *args, char *subargs)
 {
     void (*func)();
     char *tmpnick=(char *) 0;
@@ -3128,9 +3049,8 @@ char *channel;
 }
 
 /* Handles bans */
-void OnBans(args,exception)
-char **args;
-int exception;
+void 
+OnBans (char **args, int exception)
 {
     int  server;
     char *chan;
@@ -3168,10 +3088,8 @@ int exception;
 }
 
 /* Clears channel of bans */
-void CdBan(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+CdBan (char *command, char *args, char *subargs)
 {
     char *tmpchan = NULL;
     char *banbuf = NULL;
@@ -3204,10 +3122,8 @@ char *subargs;
 }
 
 /* Unignores user */
-void NoIgnore(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+NoIgnore (char *command, char *args, char *subargs)
 {
     char *tmpnick;
     char tmpbuf[mybufsize/4];
@@ -3221,10 +3137,8 @@ char *subargs;
 }
 
 /* Ignores user */
-void Ignore(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Ignore (char *command, char *args, char *subargs)
 {
     int  igtime=0;
     char *tmpstr;
@@ -3301,8 +3215,8 @@ char *igtype;
 }
 
 /* Returns formatted time */
-static char *CeleTimeFormat(timediff)
-time_t timediff;
+static char *
+CeleTimeFormat (time_t timediff)
 {
     int timesec=0;
     int timemin=0;
@@ -3330,8 +3244,8 @@ time_t timediff;
 
 #ifdef CELE
 /* Sets away with Celerity idle timer, also updates timer */
-void CeleAway(modify)
-int modify;
+void 
+CeleAway (int modify)
 {
     char tmpbuf1[mybufsize/4+1];
     char tmpbuf2[mybufsize/2+1];
@@ -3352,10 +3266,8 @@ int modify;
 #endif /* CELE */
 
 /* Marks you as being away */
-void SetAway(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+SetAway (char *command, char *args, char *subargs)
 {
     int  modify = 1;
     int  showit = 1;
@@ -3430,19 +3342,16 @@ char *subargs;
 }
 
 /* Marks you as not being away */
-void SetBack(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+SetBack (char *command, char *args, char *subargs)
 {
     AwaySave("SetBack",SAVEAWAY);
     add_wait_prompt("Display message file (y/n/r) ? ",SetBack2,args,WAIT_PROMPT_KEY);
 }
 
 /* Handles prompt from SetBack */
-void SetBack2(stuff,line)
-char *stuff;
-char *line;
+void 
+SetBack2 (char *stuff, char *line)
 {
     char reply=' ';
 
@@ -3455,9 +3364,8 @@ char *line;
 }
 
 /* This asks user if he wants to delete ScrollZ.away file */
-void SetBackDelete(stuff,line)
-char *stuff;
-char *line;
+void 
+SetBackDelete (char *stuff, char *line)
 {
     int  done=1;
     int  showit=1;
@@ -3587,10 +3495,8 @@ List *toadd;
 }
 
 /* Adds word to your wordkick list */
-void AddWord(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+AddWord (char *command, char *args, char *subargs)
 {
     int  add = 0;
     int  ban = 0;
@@ -3650,10 +3556,8 @@ char *subargs;
 }
 
 /* Removes word from your wordkick list */
-void RemoveWord(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+RemoveWord (char *command, char *args, char *subargs)
 {
     char *channels;
     char *tmpstr;
@@ -3686,10 +3590,8 @@ char *subargs;
 }
 
 /* Lists all the word on your wordkick list */
-void ListWords(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ListWords (char *command, char *args, char *subargs)
 {
     int count = 1;
     char tmpbuf[mybufsize / 2];
@@ -3707,9 +3609,8 @@ char *subargs;
 }
 
 /* Checks if there is a match with some of your words that are on wordkick list */
-struct words *CheckLine(channels,line)
-char *channels;
-char *line;
+struct words *
+CheckLine (char *channels, char *line)
 {
     char *curword;
     char *tmpline;
@@ -3733,9 +3634,8 @@ char *line;
 }
 
 /* Adds nick to list of people who have messaged you */
-void AddNick2List(nick,server)
-char *nick;
-int server;
+void 
+AddNick2List (char *nick, int server)
 {
     int count;
     int curserv=server;
@@ -3772,7 +3672,8 @@ int server;
 }
 
 /* Sets nickcur to the next element on linked list nicks (when TAB pressed) */
-void NickNext()
+void 
+NickNext (void)
 {
     int curserv=from_server;
 
@@ -3783,10 +3684,8 @@ void NickNext()
 }
 
 /* Adds splitter to list (with the appropriate server) */
-int AddSplitter(nick,channel,servers)
-char *nick;
-char *channel;
-char *servers;
+int 
+AddSplitter (char *nick, char *channel, char *servers)
 {
     int    print=0;
     struct list *tmplist;
@@ -3838,10 +3737,8 @@ char *servers;
 }
 
 /* Checks if net has joined and returns server name if so */
-void Check4Join(userhost,servername,channel)
-char *userhost;
-char *servername;
-char *channel;
+void 
+Check4Join (char *userhost, char *servername, char *channel)
 {
     struct wholeftstr *wholeft;
     struct wholeftstr *tmpwholeft;
@@ -3906,10 +3803,8 @@ char *channel;
 }
 
 /* Tells you all the nicks that went away with the split */
-void WhoLeft(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+WhoLeft (char *command, char *args, char *subargs)
 {
     int  i;
     int  len;
@@ -3983,10 +3878,8 @@ char *subargs;
 }
 
 /* Kicks all the people that match the filter, also bans if necessary */
-void FilterKick(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+FilterKick (char *command, char *args, char *subargs)
 {
     char *channel;
     char *filter;
@@ -4030,10 +3923,8 @@ char *subargs;
 
 #ifdef EXTRAS
 /* Bans all the people from your shitlist */
-void DoBans(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+DoBans (char *command, char *args, char *subargs)
 {
     int  count=0;
     int  max=get_int_var(MAX_MODES_VAR);
@@ -4077,23 +3968,22 @@ char *subargs;
 #endif
 
 /* This says you're not channel operator */
-void NotChanOp(channel)
-char *channel;
+void 
+NotChanOp (char *channel)
 {
     say("You are not channel operator on %s",channel);
 }
 
 /* This says no current channel for this window */
-void NoWindowChannel()
+void 
+NoWindowChannel (void)
 {
     say("No current channel for this window");
 }
 
 /* Newhost, patched in by Zakath. Got from diff w/ no credits... */
-void NewHost(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+NewHost (char *command, char *args, char *subargs)
 {
     char *newhname = NULL;
 #ifdef JIMMIE
--- a/source/edit3.c
+++ b/source/edit3.c
@@ -99,12 +99,11 @@ extern void dcc_close _((char *));
 
 extern char *ScrollZver1;
 extern char *CelerityNtfy;
+extern int  DecryptString _((char *, char *, char *, int, int));
 
 /* Removes key for channel */
-void ClearKey(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ClearKey (char *command, char *args, char *subargs)
 {
     char *curmode;
     char *tmpmode;
@@ -141,10 +140,8 @@ char *subargs;
 }
 
 /* Prints out ScrollZ logo :) */
-void Logo(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Logo (char *command, char *args, char *subargs)
 {
     put_it("");
     put_it("");
@@ -175,9 +172,8 @@ char *subargs;
 }
 
 /* Saves message into ScrollZ.save file */
-void AwaySave(message,type)
-char *message;
-int  type;
+void 
+AwaySave (char *message, int type)
 {
     int  oldumask;
     char *filepath;
@@ -259,8 +255,8 @@ char *userhost;
 #endif
 
 /* Returns user@domain useful for list */
-void UserDomainList(userhost)
-char *userhost;
+void 
+UserDomainList (char *userhost)
 {
     int  isip=2;
     int  count=0;
@@ -297,10 +293,8 @@ char *userhost;
 }
 
 /* Toggles nethack protection on/off */
-void NHProtToggle(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+NHProtToggle (char *command, char *args, char *subargs)
 {
     int  i;
     int  oldnh;
@@ -402,10 +396,8 @@ char *subargs;
 }
 
 /* Prints out some channel statistics */
-void ChanStat(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ChanStat (char *command, char *args, char *subargs)
 {
     int  bancount=0;
     int  users=0;
@@ -467,10 +459,8 @@ char *subargs;
 
 /* Does the ls command */
 #ifndef LITE
-void Ls(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Ls (char *command, char *args, char *subargs)
 {
     char tmpbuf[mybufsize/2+1];
 
@@ -481,10 +471,8 @@ char *subargs;
 #endif
 
 /* Does /DCC CHAT nick */
-void Chat(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Chat (char *command, char *args, char *subargs)
 {
     if (args && *args) dcc_chat(new_next_arg(args,&args));
     else if (LastChat) dcc_chat(LastChat);
@@ -492,10 +480,8 @@ char *subargs;
 }
 
 /* Does /DCC CLOSE CHAT nick */
-void NoChat(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+NoChat (char *command, char *args, char *subargs)
 {
     char *who;
     char tmpbuf[mybufsize/4];
@@ -512,10 +498,8 @@ char *subargs;
 
 /* Launches finger on nick */
 #ifndef LITE
-void Finger(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Finger (char *command, char *args, char *subargs)
 {
     char *tmpnick;
     char *tmpstr;
@@ -571,8 +555,8 @@ char *tmpnick;
 #endif /* LITE */
 
 /* Checks for fake netsplit */
-int Check4Fake(splitserver)
-char *splitserver;
+int 
+Check4Fake (char *splitserver)
 {
     char *tmpstr;
     int  length;
@@ -603,10 +587,8 @@ char *splitserver;
 }
 
 /* Sets your user mode */
-void UserMode(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+UserMode (char *command, char *args, char *subargs)
 {
     char *line=new_next_arg(args,&args);
     char *opt=new_next_arg(args,&args);
@@ -617,10 +599,8 @@ char *subargs;
 }
 
 /* Sets auto join on invite toggle */
-void AutoJoinOnInvToggle(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+AutoJoinOnInvToggle (char *command, char *args, char *subargs)
 {
     char *tmpstr=(char *) 0;
     char *tmpchan=(char *) 0;
@@ -652,10 +632,8 @@ char *subargs;
 
 /* Prints all ScrollZ related settings */
 #ifndef LITE
-void Settings(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Settings (char *command, char *args, char *subargs)
 {
     char tmpbuf1[mybufsize/4];
     char tmpbuf2[mybufsize/4];
@@ -1109,10 +1087,8 @@ char *subargs;
 #endif
 
 /* Sets flood protection toggle */
-void FloodProtToggle(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+FloodProtToggle (char *command, char *args, char *subargs)
 {
     char *tmparg;
     char *tmpmsgs;
@@ -1148,9 +1124,8 @@ char *subargs;
 }
 
 /* Checks if channel is on your friend's channels list */
-int CheckChannel(channels,chanlist)
-char *channels;
-char *chanlist;
+int 
+CheckChannel (char *channels, char *chanlist)
 {
     int found=0;
     int minus=0;
@@ -1197,9 +1172,8 @@ char *chanlist;
 }
 
 /* Same as above except that channels is used for matching and chanlist is not */
-int CheckChannel2(channels,chanlist)
-char *channels;
-char *chanlist;
+int 
+CheckChannel2 (char *channels, char *chanlist)
 {
     int found=0;
     int minus=0;
@@ -1247,10 +1221,8 @@ char *chanlist;
 
 #ifdef EXTRA_STUFF
 /* Codes an array */
-void CodeIt(file,tmp,length)
-int file;
-char *tmp;
-int length;
+void 
+CodeIt (int file, char *tmp, int length)
 {
     int count=0,code=0,what;
     char *tmpstr,c;
@@ -1271,8 +1243,8 @@ int length;
 }
 
 /* Fixes filename */
-void FixName(newname)
-char *newname;
+void 
+FixName (char *newname)
 {
     char c;
     char tmpbuf[mybufsize/4];
@@ -1293,10 +1265,8 @@ char *newname;
 #endif
 
 /* Like /NET in PhoEniX.irc */
-void Net(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Net (char *command, char *args, char *subargs)
 {
     int  servid;
     static int firsttime=1;
@@ -1347,10 +1317,8 @@ char *buffer;
 }
 
 /* Scans string and returns one argument */
-void NextArg(arg,pointer,retstr)
-char *arg;
-char **pointer;
-char *retstr;
+void 
+NextArg (char *arg, char **pointer, char *retstr)
 {
     char *newstr;
 
@@ -1366,10 +1334,8 @@ char *retstr;
 }
 
 /* Prints error in ScrollZ.save */
-void PrintError(string1,string2,lineno)
-char *string1;
-char *string2;
-int  lineno;
+void 
+PrintError (char *string1, char *string2, int lineno)
 {
 #ifdef WANTANSI
     say("%sError%s in ScrollZ.save: %s%s%s %s, %sline %d%s",
@@ -1382,12 +1348,8 @@ int  lineno;
 }
 
 /* Sets on/off values from ScrollZ.save */
-void OnOffSet(pointer,variable,loaderror,lineno,command)
-char **pointer;
-int  *variable;
-int  *loaderror;
-int  lineno;
-char *command;
+void 
+OnOffSet (char **pointer, int *variable, int *loaderror, int lineno, char *command)
 {
     char tmpbuf[mybufsize/4];
 
@@ -1414,12 +1376,8 @@ char *command;
 }
 
 /* Sets number values from ScrollZ.save */
-void NumberSet(pointer,variable,loaderror,lineno,command)
-char **pointer;
-int  *variable;
-int  *loaderror;
-int  lineno;
-char *command;
+void 
+NumberSet (char **pointer, int *variable, int *loaderror, int lineno, char *command)
 {
     int number=0;
     char tmpbuf[mybufsize/4];
@@ -1435,13 +1393,8 @@ char *command;
 }
 
 /* Sets dir values from ScrollZ.save */
-void DirSet(pointer,variable,loaderror,lineno,message,command)
-char **pointer;
-char **variable;
-int  *loaderror;
-int  lineno;
-char *message;
-char *command;
+void 
+DirSet (char **pointer, char **variable, int *loaderror, int lineno, char *message, char *command)
 {
     char tmpbuf[mybufsize/4];
 
@@ -1456,12 +1409,8 @@ char *command;
 }
 
 /* Sets string values from ScrollZ.save */
-void StringSet(pointer,variable,loaderror,lineno,command)
-char *pointer;
-char **variable;
-int  *loaderror;
-int  lineno;
-char *command;
+void 
+StringSet (char *pointer, char **variable, int *loaderror, int lineno, char *command)
 {
     char tmpbuf[mybufsize/4];
 
@@ -1475,14 +1424,8 @@ char *command;
 }
 
 /* Sets on channels/off values from ScrollZ.save */
-void ChannelsSet(pointer,variable,strvar,loaderror,lineno,command,message)
-char **pointer;
-int  *variable;
-char **strvar;
-int  *loaderror;
-int  lineno;
-char *command;
-char *message;
+void 
+ChannelsSet (char **pointer, int *variable, char **strvar, int *loaderror, int lineno, char *command, char *message)
 {
     char tmpbuf[mybufsize/4];
 
@@ -1525,7 +1468,8 @@ char *message;
 }
 
 /* Loads ScrollZ.save file */
-void ScrollZLoad()
+void 
+ScrollZLoad (void)
 {
     int  lineno;
     int  number;
@@ -2297,17 +2241,16 @@ void ScrollZLoad()
 }
 
 /* Lets you change your AutoReply Buffer - by Zakath */
-void ReplyWord(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ReplyWord (char *command, char *args, char *subargs)
 {
     if (args && *args) malloc_strcpy(&AutoReplyBuffer,new_next_arg(args,&args));
     PrintSetting("AutoReply Buffer",AutoReplyBuffer,empty_string,empty_string);
 }
 
 /* Clean friends list, shit list and word-kick list */
-void CleanUpLists() {
+void 
+CleanUpLists (void) {
     struct words *tmpword;
     struct friends *tmpfriend;
     struct autobankicks *tmpabk;
@@ -2341,10 +2284,8 @@ void CleanUpLists() {
 }
 
 /* Resets your friends and auto (ban) kicks list and reloads ScrollZ.save */
-void Reset(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Reset (char *command, char *args, char *subargs)
 {
     int i;
     char tmpbuf[mybufsize/4];
@@ -2434,7 +2375,8 @@ char *subargs;
 }
 
 /* Initializes ScrollZ related variables */
-void InitVars() {
+void 
+InitVars (void) {
     int  i;
     char *tmpstr1;
     char *tmpstr2;
@@ -2630,10 +2572,8 @@ void InitVars() {
 }
 
 #ifdef EXTRAS
-void LastMessageKick(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+LastMessageKick (char *command, char *args, char *subargs)
 {
     char *channel;
     char *tmpnick;
@@ -2668,10 +2608,8 @@ char *subargs;
     }
 }
 
-void RandomLamerKick(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+RandomLamerKick (char *command, char *args, char *subargs)
 {
     char *channel;
     char *comment;
--- a/source/edit4.c
+++ b/source/edit4.c
@@ -96,7 +96,7 @@
 void   ListBansPage _((char *));
 void   ListBansPrompt _((char *, char *));
 void   MyQuitPrompt _((char *, char *));
-void   AddDelayOp _((char *, char *, char));
+void   AddDelayOp _((char *, char *, int));
 void   AddDelayNotify _((char *));
 int    IsBanned _((char *, char *, int, ChannelList *));
 char   *PickSignOff _((void));
@@ -177,6 +177,11 @@ static struct bans *tmpbn;
 static struct bans *tmpbanlist;
 static int listcount;
 
+void SendNotification (int type, char *str);
+
+
+void *ComplLast;      /* Last completion string used */
+
 void *ComplLast;      /* Last completion string used */
 void *ComplNext;      /* Next completion element to use */
 
@@ -191,12 +196,8 @@ extern IrcCommand irc_command[];
 extern IrcVariable irc_variable[];
 
 /* Prints received message */
-void PrintMessage(nick, userhost, msg, print, iscrypted)
-char *nick;
-char *userhost;
-char *msg;
-int  print;
-int  iscrypted;
+void 
+PrintMessage (char *nick, char *userhost, char *msg, int print, int iscrypted)
 {
     int  numurl = 0;
     char *thing;
@@ -300,11 +301,8 @@ int  iscrypted;
 }
 
 /* Handles net splits */
-void HandleSplit(reason,nick,channel,netsplit)
-char *reason;
-char *nick;
-char *channel;
-int  *netsplit;
+void 
+HandleSplit (char *reason, char *nick, char *channel, int *netsplit)
 {
     *netsplit=0;
     if (!NHDisp) return;
@@ -512,10 +510,8 @@ ChannelList *chan;
 }
 
 /* Handles invite requests */
-void HandleInvite(nick,userhost,channel)
-char *nick;
-char *userhost;
-char *channel;
+void 
+HandleInvite (char *nick, char *userhost, char *channel)
 {
     int  isfake=0;
     int  printinv=1;
@@ -571,11 +567,8 @@ char *channel;
 }
 
 /* Handles operator kills */
-void HandleKills(server, nick, userhost, reason)
-int server;
-char *nick;
-char *userhost;
-char *reason;
+void 
+HandleKills (int server, char *nick, char *userhost, char *reason)
 {
     char tmpb[mybufsize / 2];
     time_t now = time(NULL);
@@ -587,11 +580,8 @@ char *reason;
 }
 
 /* Handles nick change */
-void HandleNickChange(oldnick, newnick, userhost, server)
-char *oldnick;
-char *newnick;
-char *userhost;
-int  server;
+void 
+HandleNickChange (char *oldnick, char *newnick, char *userhost, int server)
 {
     int  privs = 0;
     int  printed = 0;
@@ -696,9 +686,8 @@ int  server;
 }
 
 /* Adds comment to buffer */
-void AddComment(buffer,comment)
-char *buffer;
-char *comment;
+void 
+AddComment (char *buffer, char *comment)
 {
     char tmpbuf[mybufsize/2];
 
@@ -709,13 +698,8 @@ char *comment;
 }
 
 /* Handles my kicks */
-void HandleMyKick(mynick,nick,userhost,channel,comment,frkick)
-char *mynick;
-char *nick;
-char *userhost;
-char *channel;
-char *comment;
-int  *frkick;
+void 
+HandleMyKick (char *mynick, char *nick, char *userhost, char *channel, char *comment, int *frkick)
 {
     ChannelList *chan = NULL;
     char tmpbuf[mybufsize/2];
@@ -730,13 +714,8 @@ int  *frkick;
 }
 
 /* Handles kicks */
-void HandleKick(nick,who,userhost,channel,comment,frkick)
-char *nick;
-char *who;
-char *userhost;
-char *channel;
-char *comment;
-int  *frkick;
+void 
+HandleKick (char *nick, char *who, char *userhost, char *channel, char *comment, int *frkick)
 {
     int  privs=0;
     int  tmplevel=0;
@@ -846,7 +825,8 @@ int  *frkick;
 }
 
 /* Inserts nick from tabkey list */
-void InsertTabNick() {
+void 
+InsertTabNick (void) {
     int curserv=from_server;
     char *nickstr;
     char *cmdchars;
@@ -890,12 +870,8 @@ int IsCmdLine(char *str, char *cmd, int len)
 }
 
 /* Change the right pointers to NULL if needed */
-void FixCompl(last, next, completing, newcompl, length)
-void **last;
-void **next;
-char *completing;
-char *newcompl;
-int length;
+void 
+FixCompl (void **last, void **next, char *completing, char *newcompl, int length)
 {
 
     if (*last &&
@@ -913,12 +889,8 @@ int length;
 }
 
 /* Handle DCC chat completion */
-int HandletabNextDCCChat(argc, argv, completing, newcompl, length)
-int argc;
-char argv[3][32];
-char *completing;
-char *newcompl;
-int length;
+int 
+HandletabNextDCCChat (int argc, char argv[3][32], char *completing, char *newcompl, int length)
 {
     if (IsCmdLine(argv[0], "m", 1) && *argv[1] == '=')
     {
@@ -960,12 +932,8 @@ chat_begin:
 }
 
 /* Handle DCC get completion */
-int HandletabNextDCCGet(argc, argv, completing, newcompl, length)
-int argc;
-char argv[3][32];
-char *completing;
-char *newcompl;
-int length;
+int 
+HandletabNextDCCGet (int argc, char argv[3][32], char *completing, char *newcompl, int length)
 {
     if (argc == 3 && IsCmdLine(argv[0], "dc", 2) &&
         (!my_strnicmp(argv[1], "g", 1) || !my_strnicmp(argv[1], "ren", 3) ||
@@ -1009,12 +977,8 @@ get_begin:
 }
 
 /* Handle DCC send completion */
-int HandletabNextDCCSend(argc, argv, completing, newcompl, length)
-int argc;
-char argv[3][32];
-char *completing;
-char *newcompl;
-int length;
+int 
+HandletabNextDCCSend (int argc, char argv[3][32], char *completing, char *newcompl, int length)
 {
     unsigned minpos = current_screen->inputdata.buffer.minpos;
     char *min_pos = &current_screen->inputdata.buffer.buf[minpos];
@@ -1133,12 +1097,8 @@ send_begin:
 }
 
 /* Handle commands completion */
-int HandletabNextCommand(argc, argv, completing, newcompl, length)
-int argc;
-char argv[3][32];
-char *completing;
-char *newcompl;
-int length;
+int 
+HandletabNextCommand (int argc, char argv[3][32], char *completing, char *newcompl, int length)
 {
     unsigned minpos = current_screen->inputdata.buffer.minpos;
     char *min_pos = &current_screen->inputdata.buffer.buf[minpos];
@@ -1184,12 +1144,8 @@ command_begin:
 }
 
 /* Handle variables completion */
-int HandletabNextVariable(argc, argv, completing, newcompl, length)
-int argc;
-char argv[3][32];
-char *completing;
-char *newcompl;
-int length;
+int 
+HandletabNextVariable (int argc, char argv[3][32], char *completing, char *newcompl, int length)
 {
     if (argc == 1 && IsCmdLine(argv[0], "set", 3))
     {
@@ -1227,12 +1183,8 @@ variable_begin:
 }
 
 /* Handle channel completion */
-int HandletabNextChannel(argc, argv, completing, newcompl, length)
-int argc;
-char argv[3][32];
-char *completing;
-char *newcompl;
-int length;
+int 
+HandletabNextChannel (int argc, char argv[3][32], char *completing, char *newcompl, int length)
 {
     if (!CheckServer(curr_scr_win->server)) return(0);
 
@@ -1274,12 +1226,8 @@ channel_begin:
 }
 
 /* Handle nick completion */
-int HandletabNextNick(argc, argv, completing, newcompl, length)
-int argc;
-char argv[3][32];
-char *completing;
-char *newcompl;
-int length;
+int 
+HandletabNextNick (int argc, char argv[3][32], char *completing, char *newcompl, int length)
 {
     int i;
     int channel_count = 0;
@@ -1444,7 +1392,8 @@ void HandleTabNext(u_int key, char *ptr)
 }
 
 /* Handles alt-i (prev nick in nick list) */
-void HandleTabPrev() {
+void 
+HandleTabPrev (void) {
     int curserv=from_server;
     struct nicks *tmpnick;
 
@@ -1464,9 +1413,8 @@ void HandleTabPrev() {
 }
 
 /* Handles end of bans reply */
-void EndOfBans(channel,server)
-char *channel;
-int  server;
+void 
+EndOfBans (char *channel, int server)
 {
     ChannelList *chan;
 
@@ -1479,13 +1427,8 @@ int  server;
 }
 
 /* Handles received notice */
-int HandleNotice(nick, notice, userhost, print, to, iscrypted)
-char *nick;
-char *notice;
-char *userhost;
-int  print;
-char *to;
-int *iscrypted;
+int 
+HandleNotice (char *nick, char *notice, char *userhost, int print, char *to, int *iscrypted)
 {
     int  isme;
     int  hooked = 1;
@@ -1595,17 +1538,16 @@ int *iscrypted;
 }
 
 /* Handles closed connections from server */
-void HandleClosedConn(server,reason)
-int server;
-char *reason;
+void 
+HandleClosedConn (int server, char *reason)
 {
     if (away_set || LogOn) AwaySave(reason,SAVESERVER);
 }
 
 #ifdef EXTRA_STUFF
 /* Handles on the fly renaming of files */
-void HandleRename(dccstuff)
-char **dccstuff;
+void 
+HandleRename (char **dccstuff)
 {
     char tmpbuf[mybufsize/8];
 
@@ -1618,11 +1560,8 @@ char **dccstuff;
 #endif
 
 /* Handles flooding */
-void HandleFlood(nick,userhost,target,ignoretype)
-char *nick;
-char *userhost;
-char *target;
-char *ignoretype;
+void 
+HandleFlood (char *nick, char *userhost, char *target, char *ignoretype)
 {
     char tmpbuf1[mybufsize/4];
     char tmpbuf2[mybufsize/4];
@@ -1657,10 +1596,8 @@ char *ignoretype;
 
 #ifdef EXTRAS
 /* Locks channel mode */
-void ModeLocked(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ModeLocked (char *command, char *args, char *subargs)
 {
     int first=1;
     char *mode=(char *) 0;
@@ -1789,9 +1726,8 @@ ChannelList *tmpchan;
 #endif
 
 /* Handles end of who reply */
-void HandleEndOfWho(channel,server)
-char *channel;
-int  server;
+void 
+HandleEndOfWho (char *channel, int server)
 {
     ChannelList *chan;
 
@@ -1801,10 +1737,8 @@ int  server;
 }
 
 /* Toggles CTCP cloaking on/off */
-void CTCPCloakingToggle(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+CTCPCloakingToggle (char *command, char *args, char *subargs)
 {
     if (*args) {
         if (!my_stricmp(args,"ON")) CTCPCloaking=1;
@@ -1918,10 +1852,8 @@ ChannelList *chan;
 }
 
 /* This really unbans user */
-void UnbanIt(pattern,channel,server)
-char *pattern;
-char *channel;
-int  server;
+void 
+UnbanIt (char *pattern, char *channel, int server)
 {
     int  count=0;
     int  max=get_int_var(MAX_MODES_VAR);
@@ -1956,10 +1888,8 @@ int  server;
 }
 
 /* Shows all bans and asks which one you wanna remove */
-void TBan(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+TBan (char *command, char *args, char *subargs)
 {
     char *channel;
     char tmpbuf[mybufsize/4];
@@ -1992,16 +1922,16 @@ char *subargs;
 }
 
 /* Check if ban still exists on given channel */
-int CheckBanExists(channel)
-char *channel;
+int 
+CheckBanExists (char *channel)
 {
     if (!tmpbn) return(0);
     return(1);
 }
 
 /* Lists one page of bans list */
-void ListBansPage(line)
-char *line;
+void 
+ListBansPage (char *line)
 {
     int count=1;
 
@@ -2032,9 +1962,8 @@ char *line;
 }
 
 /* This waits for line input */
-void ListBansPrompt(stuff,line)
-char *stuff;
-char *line;
+void 
+ListBansPrompt (char *stuff, char *line)
 {
     int  max=get_int_var(MAX_MODES_VAR);
     int  count=0;
@@ -2074,10 +2003,8 @@ char *line;
 }
 
 /* Handles fake modes */
-void HandleFakes(line,from,server)
-char *line;
-char *from;
-int  server;
+void 
+HandleFakes (char *line, char *from, int server)
 {
     char *tmpstr=(char *) 0;
     char *tmpnick=(char *) 0;
@@ -2133,10 +2060,8 @@ int  server;
 
 #ifdef EXTRAS
 /* Resets channel's lock mode */
-void ModeUnlocked(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ModeUnlocked (char *command, char *args, char *subargs)
 {
     char *channel;
     char tmpbuf[mybufsize/4];
@@ -2165,10 +2090,8 @@ char *subargs;
 
 #ifdef SCKICKS
 /* Kicks nick with funny message */
-void ScatterKick(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ScatterKick (char *command, char *args, char *subargs)
 {
     int  number=0;
     int  kicked=0;
@@ -2314,10 +2237,8 @@ char *subargs;
 }
 
 /* Randomly picks a funny message and kicks nick */
-void RandomScatterKick(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+RandomScatterKick (char *command, char *args, char *subargs)
 {
     int  number=0;
     char *channel;
@@ -2344,10 +2265,8 @@ char *subargs;
 
 #ifdef EXTRAS
 /* Kicks nick with last notice */
-void LastNoticeKick(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+LastNoticeKick (char *command, char *args, char *subargs)
 {
     char *channel;
     char *tmpnick;
@@ -2384,10 +2303,8 @@ char *subargs;
 #endif
 
 /* Prints some statistics about nick */
-void NickStat(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+NickStat (char *command, char *args, char *subargs)
 {
     int  found = 0;
     char *tmpnick;
@@ -2417,10 +2334,8 @@ char *subargs;
 }
 
 /* Adds nick to notify list */
-void AddNotify(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+AddNotify (char *command, char *args, char *subargs)
 {
     char *tmpnick;
 
@@ -2432,10 +2347,8 @@ char *subargs;
 }
 
 /* Removes nick from notify list */
-void RemoveNotify(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+RemoveNotify (char *command, char *args, char *subargs)
 {
     char *tmpnick;
     char *tmpbuf = NULL;
@@ -2455,9 +2368,8 @@ char *subargs;
 }
 
 /* Handles notify reply */
-void HandleNotifyOn(nick,server)
-char *nick;
-int  server;
+void 
+HandleNotifyOn (char *nick, int server)
 {
     AddDelayNotify(nick);
 }
@@ -2624,10 +2536,8 @@ int isfriend;
 }
 
 /* Lists all users on notify list */
-void ListNotify(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ListNotify (char *command, char *args, char *subargs)
 {
     int  i;
     int  count;
@@ -3047,8 +2957,8 @@ ChannelList *chan;
 }
 
 /* This executes when you quit from IRC */
-void MyQuit(reason)
-char *reason;
+void 
+MyQuit (char *reason)
 {
     int active=0;
     DCC_list *client;
@@ -3069,9 +2979,8 @@ char *reason;
 }
 
 /* Prompt when you quit if you have dccs pending */
-void MyQuitPrompt(reason,line)
-char *reason;
-char *line;
+void 
+MyQuitPrompt (char *reason, char *line)
 {
     int max;
     int i;
@@ -3123,10 +3032,8 @@ char *line;
 }
 
 /* Adds nick to delay op list */
-void AddDelayOp(channel,nick,flag)
-char *channel;
-char *nick;
-char flag;
+void 
+AddDelayOp (char *channel, char *nick, int flag)
 {
     char tmpbuf[mybufsize/4];
     void (*func)()=(void(*)()) HandleDelayOp;
@@ -3136,8 +3043,8 @@ char flag;
 }
 
 /* Adds nick to delay notify list */
-void AddDelayNotify(nick)
-char *nick;
+void 
+AddDelayNotify (char *nick)
 {
     char tmpbuf[mybufsize/4];
     void (*func)()=(void(*)()) HandleDelayNotify;
@@ -3148,10 +3055,8 @@ char *nick;
 
 /* Adds given server to server list */
 #ifndef LITE
-void AddServer(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+AddServer (char *command, char *args, char *subargs)
 {
     int port=0;
     int old_server=0;
@@ -3180,10 +3085,8 @@ char *subargs;
 }
 
 /* Removes given server from server list */
-void RemoveServer(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+RemoveServer (char *command, char *args, char *subargs)
 {
     int port=0;
     int old_server=0;
@@ -3222,10 +3125,8 @@ char *subargs;
 }
 
 /* Lists servers on server list */
-void ListServers(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ListServers (char *command, char *args, char *subargs)
 {
     int  i;
     char tmpbuf[mybufsize/8];
@@ -3280,7 +3181,8 @@ ChannelList *tmpchan;
 
 #ifdef CELE
 /* Random signoff generator */
-char *CeleSignoff()
+char *
+CeleSignoff (void)
 {
     int num;
     int count;
@@ -3307,7 +3209,8 @@ char *CeleSignoff()
 }
 #else
 /* Randomly picks sign off message */
-char *PickSignOff()
+char *
+PickSignOff (void)
 {
     int  number;
     int  count=0;
@@ -3340,8 +3243,8 @@ char *PickSignOff()
 
 #ifdef SCKICKS
 /* Randomly picks scatter kick comment */
-char *PickScatterKick(number)
-int number;
+char *
+PickScatterKick (int number)
 {
     int  count=0;
     char *pointer=(char *) 0;
@@ -3368,10 +3271,8 @@ int number;
 #endif
 
 /* Clears tabkey list */
-void ClearTab(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ClearTab (char *command, char *args, char *subargs)
 {
     int curserv=from_server;
     struct nicks *nickstr;
@@ -3392,10 +3293,8 @@ char *subargs;
 
 #ifdef EXTRAS
 /* Stores links info internally */
-void LLook(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+LLook (char *command, char *args, char *subargs)
 {
     int cnt=0;
     char *tmpstr;
@@ -3492,10 +3391,8 @@ char *subargs;
 }
 
 /* Compares links info against one stored internally */
-void LLookUp(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+LLookUp (char *command, char *args, char *subargs)
 {
     time_t timenow=time((time_t *) 0);
     struct splitstr *tmpsplit;
@@ -3519,8 +3416,8 @@ char *subargs;
 }
 
 /* This handles links reply from server */
-void HandleLinks(servers)
-char *servers;
+void 
+HandleLinks (char *servers)
 {
     int  found1,found2;
     char *tmpstr=(char *) 0;
@@ -3615,7 +3512,8 @@ char *servers;
 }
 
 /* Prints all servers missing from links info */
-void ListSplitedServers()
+void 
+ListSplitedServers (void)
 {
     int found;
     struct splitstr *tmp,*tmpsplit;
@@ -3645,10 +3543,8 @@ void ListSplitedServers()
 #endif
 
 /* This will show the sucker that last killed you */
-void ShowKill(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ShowKill (char *command, char *args, char *subargs)
 {
     if (WhoKilled) say("%s", WhoKilled);
     else say("You haven't been killed so far");
--- a/source/edit5.c
+++ b/source/edit5.c
@@ -124,6 +124,8 @@ void URLSave3 _((char *, char *));
 int  GrabURL _((char *, char *, size_t, char *, char *, char *, int));
 void MasterPassword _((char *, char *));
 void MasterPasswordOld _((char *, char *));
+int InitColor (char **colorstr, char **colorseq, int colornum, int append);
+int BuildColorNew (char *color, char *dest, int lineno);
 
 extern int  CheckChannel _((char *, char *));
 extern void AwaySave _((char *, int));
@@ -194,9 +196,8 @@ static int listcount=0;
 #endif
 
 /* Returns pointer to friends list with matching entry */
-struct friends *FindMatch(userhost,channel)
-char *userhost;
-char *channel;
+struct friends *
+FindMatch (char *userhost, char *channel)
 {
     struct friends *tmpfriend;
 
@@ -209,15 +210,15 @@ char *channel;
 }
 
 /* Handles nick collision */
-void HandleNickCollision()
+void 
+HandleNickCollision (void)
 {
     if (away_set || LogOn) AwaySave("Nick collision",SAVECOLL);
 }
 
 /* Handles reply number 333 from server */
-void TimeReply(from,ArgList)
-char *from;
-char **ArgList;
+void 
+TimeReply (char *from, char **ArgList)
 {
     char *channel;
     ChannelList *chan;
@@ -247,10 +248,8 @@ char **ArgList;
 void TagNickNew();
 
 /* Tags nick for nick watcher */
-void TagNick(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+TagNick (char *command, char *args, char *subargs)
 {
     char *tmpnick;
     void (*func)();
@@ -293,10 +292,8 @@ char *text;
 }
 
 /* This will dig out users new nickname */
-void WhereIs(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+WhereIs (char *command, char *args, char *subargs)
 {
     char *tmpnick;
     int  found=0;
@@ -323,10 +320,8 @@ char *subargs;
 void WhereListPage();
 
 /* This will list all users on nick watcher list */
-void WhereList(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+WhereList (char *command, char *args, char *subargs)
 {
     listcount=0;
     tmpnickwatch=nickwatchlist;
@@ -338,8 +333,8 @@ char *subargs;
 void WhereListKey();
 
 /* Lists one page of nick watch list */
-void WhereListPage(line)
-char *line;
+void 
+WhereListPage (char *line)
 {
     int  count=3;
 
@@ -354,9 +349,8 @@ char *line;
 }
 
 /* This waits for key press */
-void WhereListKey(stuff,line)
-char *stuff;
-char *line;
+void 
+WhereListKey (char *stuff, char *line)
 {
     if (line && (*line=='q' || *line=='Q' || *line=='E')) {
         if (*line=='E') say("Total of %d people on nick watch list",listcount);
@@ -367,10 +361,8 @@ char *line;
 #endif
 
 /* Unflashes your terminal */
-void UnFlash(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+UnFlash (char *command, char *args, char *subargs)
 {
     fwrite("\033c",2,1,stdout);
     refresh_screen(0,(char *) 0);
@@ -378,8 +370,8 @@ char *subargs;
 
 #ifdef WANTANSI
 /* Checks if character is printable */
-int vt100Decode(chr)
-register char chr;
+int 
+vt100Decode (int chr)
 {
     static enum {
         Normal, Escape, SCS, CSI, DCS, DCSData, DCSEscape, DCS2, DCS3, DCS4
@@ -468,8 +460,8 @@ register char chr;
 }
 
 /* Checks if ansi string only sets colors/attributes */
-void FixColorAnsi(str)
-char *str;
+void 
+FixColorAnsi (char *str)
 {
     int  val = 0;
     int  what = 0;
@@ -527,9 +519,8 @@ char *str;
 }
 
 /* Counts ansi chars in string */
-int CountAnsi(str,len)
-char *str;
-int len;
+int 
+CountAnsi (char *str, int len)
 {
     register int  count=0;
     register int  x=0;
@@ -549,8 +540,8 @@ int len;
 }
 
 /* Returns the name of the color */
-char *ColorName(number)
-int number;
+char *
+ColorName (int number)
 {
     switch (number) {
         case COLBOLD      :return("BOLD");
@@ -579,9 +570,8 @@ int number;
 }
 
 /* Decodes colors and returns string for save */
-void GetColors(number, buffer)
-int  number;
-char *buffer;
+void 
+GetColors (int number, char *buffer)
 {
     int i;
 
@@ -716,8 +706,8 @@ FILE *usfile;
 }
 
 /* Returns corresponding index into Colors for given color name */
-int ColorNumber(colname)
-char *colname;
+int 
+ColorNumber (char *colname)
 {
     int  i;
     char tmpbuf[mybufsize / 4];
@@ -737,10 +727,8 @@ char *colname;
 }
 
 /* Parses color string and puts color codes in target string */
-int BuildColor(color, string, lineno)
-char *color;
-char *string;
-int  lineno;
+int 
+BuildColor (char *color, char *string, int lineno)
 {
     int  colindex;
     char *tmpstr;
@@ -761,11 +749,8 @@ int  lineno;
 }
 
 /* Sets colors loaded from ScrollZ.save */
-void SetColors(number, string, error, lineno)
-int  number;
-char **string;
-int  *error;
-int  lineno;
+void 
+SetColors (int number, char **string, int *error, int lineno)
 {
     int  i;
     char tmpbuf1[mybufsize / 4];
@@ -821,11 +806,8 @@ int  lineno;
 #endif
 
 /* Prints settings */
-void PrintSetting(string1,setting1,string2,setting2)
-char *string1;
-char *setting1;
-char *string2;
-char *setting2;
+void 
+PrintSetting (char *string1, char *setting1, char *string2, char *setting2)
 {
     int doorignick=0;
     char quietstr[mybufsize/8];
@@ -847,11 +829,8 @@ char *setting2;
 }
 
 /* append given characters to string */
-void append_esc(c1, c2, c3, dst)
-char c1;
-char c2;
-char c3;
-unsigned char **dst;
+void 
+append_esc (int c1, int c2, int c3, unsigned char **dst)
 {
     **dst = 0x1B;
     (*dst)++;
@@ -872,10 +851,8 @@ unsigned char **dst;
                      or characters >=128 (national characters)
                3 ... same as 2, but also strip BOLD, REVERSE and UNDERLINE
                4 ... same as 1 but convert non-printable characters to reverse */
-void StripAnsi(line, destline, printonly)
-char *line;
-char *destline;
-int  printonly;
+void 
+StripAnsi (char *line, char *destline, int printonly)
 {
     int what = 0;
     int isattr;
@@ -952,11 +929,8 @@ int  printonly;
 }
 
 /* Prints netsplit stuff */
-void SplitPrint(reason,nick,channel,netsplit)
-char *reason;
-char *nick;
-char *channel;
-int  netsplit;
+void 
+SplitPrint (char *reason, char *nick, char *channel, int netsplit)
 {
     char *tmpstr;
     char *server;
@@ -998,13 +972,8 @@ int  netsplit;
 }
 
 /* Prints mode stuff */
-void ModePrint(line,channel,nick,userhost,nethacks,servmode)
-char *line;
-char *channel;
-char *nick;
-char *userhost;
-char *nethacks;
-char *servmode;
+void 
+ModePrint (char *line, char *channel, char *nick, char *userhost, char *nethacks, char *servmode)
 {
     int  isitserver;
 #ifdef WANTANSI
@@ -1089,14 +1058,8 @@ char *servmode;
 }
 
 /* Prints kick stuff */
-void KickPrint(who,word,from,channel,comment,rejoin,frkick)
-char *who;
-char *word;
-char *from;
-char *channel;
-char *comment;
-int  rejoin;
-int  frkick;
+void 
+KickPrint (char *who, char *word, char *from, char *channel, char *comment, int rejoin, int frkick)
 {
 #ifdef WANTANSI
     char *colnick;
@@ -1142,10 +1105,8 @@ int  frkick;
 }
 
 /* Sets master password for ENCRMSG and log file encryption */
-void Password(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Password (char *command, char *args, char *subargs)
 {
     char *oldpwd;
     char *newpwd;
@@ -1284,14 +1245,8 @@ int  show_server;
 }
 
 /* Prints whois user reply */
-void PrintWhoIsUser(banner,word,nick,user,host,name,channel)
-char *banner;
-char *word;
-char *nick;
-char *user;
-char *host;
-char *name;
-char *channel;
+void 
+PrintWhoIsUser (char *banner, char *word, char *nick, char *user, char *host, char *name, char *channel)
 {
     char tmpbuf1[mybufsize/2];
     char *country;
@@ -1391,9 +1346,8 @@ char *channel;
 }
 
 /* Prints whois channels reply */
-void PrintWhoIsChannels(banner, channels)
-char *banner;
-char *channels;
+void 
+PrintWhoIsChannels (char *banner, char *channels)
 {
     char tmpbuf1[2 * mybufsize];
     char tmpbuf2[2 * mybufsize];
@@ -1420,10 +1374,8 @@ char *channels;
 }
 
 /* Prints whois servers reply */
-void PrintWhoIsServer(banner,server,line)
-char *banner;
-char *server;
-char *line;
+void 
+PrintWhoIsServer (char *banner, char *server, char *line)
 {
 #ifdef WANTANSI
 #ifdef GENX
@@ -1460,8 +1412,8 @@ char *line;
 }
 
 /* Returns true if line matches auto reply buffer */
-int AutoReplyMatch(line)
-char *line;
+int 
+AutoReplyMatch (char *line)
 {
     int foundar = 0;
     int invmatch;
@@ -1492,13 +1444,8 @@ char *line;
 }
 
 /* Prints public message */
-void PrintPublic(nick,col,channel,line,print,iscrypted)
-char *nick;
-char *col;
-char *channel;
-char *line;
-int  print;
-int  iscrypted;
+void 
+PrintPublic (char *nick, char *col, char *channel, char *line, int print, int iscrypted)
 {
     int  foundar=0;
     int  isfriend=0;
@@ -1738,9 +1685,8 @@ int  iscrypted;
 }
 
 /* Returns path to filename */
-char *OpenCreateFile(filename, create)
-char *filename;
-int  create;
+char *
+OpenCreateFile (char *filename, int create)
 {
     char *path;
     char *filepath;
@@ -1763,10 +1709,8 @@ int  create;
 }
 
 /* Prints links info */
-void PrintLinks(server,uplink,distance)
-char *server;
-char *uplink;
-char *distance;
+void 
+PrintLinks (char *server, char *uplink, char *distance)
 {
     int  dist;
 #ifdef WANTANSI
@@ -1822,9 +1766,8 @@ char *distance;
 }
 
 /* This checks given password against master password */
-void EncryptMasterPlayBack(stuff, line)
-char *stuff;
-char *line;
+void 
+EncryptMasterPlayBack (char *stuff, char *line)
 {
     int pwlen;
     char *mastpass;
@@ -1842,10 +1785,8 @@ char *line;
 }
 
 /* Shows stored messages from ScrollZ.away w/o setting you back */
-void PlayBack(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+PlayBack (char *command, char *args, char *subargs)
 {
     char *pattern;
     char *filepath;
@@ -1888,9 +1829,8 @@ char *subargs;
 }
 
 /* Shows one page from ScrollZ.away file */
-void PlayBack2(stuff,line)
-char *stuff;
-char *line;
+void 
+PlayBack2 (char *stuff, char *line)
 {
     int  count = 2;
     int  readline = 1;
@@ -1938,10 +1878,8 @@ char *line;
 }
 
 /* Defines what to save to ScrollZ.away */
-void AwaySaveToggle(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+AwaySaveToggle (char *command, char *args, char *subargs)
 {
     int  newtype=AwaySaveSet;
     int  curval;
@@ -2019,10 +1957,8 @@ char *subargs;
 
 /* Does /STATS k with filter */
 #ifdef OPER
-void StatsKFilter(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+StatsKFilter (char *command, char *args, char *subargs)
 {
     int doall=1;
     char *tmpstr;
@@ -2046,9 +1982,8 @@ char *subargs;
 }
 
 /* Parses STATS k reply from server */
-void HandleStatsK(kline,rest)
-char *kline;
-char *rest;
+void 
+HandleStatsK (char *kline, char *rest)
 {
     char *blah;
     char *tmpstr;
@@ -2129,10 +2064,8 @@ char *rest;
 #endif /* OPER */
 
 /* Sets mode for your current channel */
-void CurrentChanMode(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+CurrentChanMode (char *command, char *args, char *subargs)
 {
     char *channel=(char *) 0;
     ChannelList *chan;
@@ -2155,10 +2088,8 @@ void NslookupNew();
 
 /* Looks up DNS entry */
 #ifndef LITE
-void Nslookup(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Nslookup (char *command, char *args, char *subargs)
 {
     char *tmpstr;
     void (*func)();
@@ -2199,8 +2130,8 @@ char *text;
 }
 
 /* This really does nslookup */
-void DoNslookup(host)
-char *host;
+void 
+DoNslookup (char *host)
 {
     int    isip=1;
     char   *tmpstr;
@@ -2222,7 +2153,8 @@ char *host;
 #endif /* LITE */
 
 /* Inserts nickname of the person that triggered auto reply */
-void InsertAutoReply() {
+void 
+InsertAutoReply (void) {
     int curserv=from_server;
     char *tmpstr;
 
@@ -2246,10 +2178,8 @@ void InsertAutoReply() {
 }
 
 /* Dumps variables, aliases, ons or all of them */
-void Dump(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Dump (char *command, char *args, char *subargs)
 {
     if (args && *args) {
         if (!my_stricmp(args,"ALIAS")) DumpAliases(COMMAND_ALIAS);
@@ -2265,8 +2195,8 @@ char *subargs;
 }
 
 /* Adds nick that triggered auto reply to list */
-void AddNick2AutoReply(nick)
-char *nick;
+void 
+AddNick2AutoReply (char *nick)
 {
     int found=0;
     int numentr=0;
@@ -2315,10 +2245,8 @@ char *nick;
 }
 
 /* Deletes ScrollZ.away file */
-void RemoveLog(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+RemoveLog (char *command, char *args, char *subargs)
 {
     int  done;
     char *filepath;
@@ -2337,8 +2265,8 @@ out:
 }
 
 /* Automatically changes nick */
-void AutoChangeNick(nick)
-char *nick;
+void 
+AutoChangeNick (char *nick)
 {
     int nicklen;
     char *tmpstr;
@@ -2451,10 +2379,8 @@ int  iscrypted;
 }
 
 /* Prints my chat messages */
-void PrintMyChatMsg(nick,line,iscrypted)
-char *nick;
-char *line;
-int  iscrypted;
+void 
+PrintMyChatMsg (char *nick, char *line, int iscrypted)
 {
     char *thing;
 #ifdef WANTANSI
@@ -2488,10 +2414,8 @@ int  iscrypted;
 
 #ifdef EXTRAS
 /* Outputs line to all channels */
-void MSay(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+MSay (char *command, char *args, char *subargs)
 {
     int  server;
     char *channels=(char *) 0;
@@ -2513,10 +2437,8 @@ char *subargs;
 #endif
 
 /* Creates ban according to ban type */
-void CreateBan(nick, userhost, banstr)
-char *nick;
-char *userhost;
-char *banstr;
+void 
+CreateBan (char *nick, char *userhost, char *banstr)
 {
     int  found = 0;
     int  rate1;
@@ -2579,10 +2501,8 @@ char *banstr;
 
 #ifdef MGS_
 /* Quits IRC with error level 152 */
-void Terminate(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Terminate (char *command, char *args, char *subargs)
 {
     char *tmpstr=NULL;
 
@@ -2648,10 +2568,8 @@ ChannelList *chan;
 }
 
 /* Redirects last message/notice you have sent to current or specified channel */
-void DirLSM(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+DirLSM (char *command, char *args, char *subargs)
 {
     int  message=!my_stricmp(command,"DIRLSM");
     char *target;
@@ -2718,10 +2636,8 @@ char *buffer;
 #define SLSTNHLFO	1024
 
 /* Like internal WHO */
-void ShowUser(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ShowUser (char *command, char *args, char *subargs)
 {
 #ifdef WANTANSI
     int  len;
@@ -2887,10 +2803,8 @@ char *subargs;
 
 #ifdef WANTANSI
 /* Sets color interactively */
-void SetColor(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+SetColor (char *command, char *args, char *subargs)
 {
     int  error=0;
     int  colsetting=0;
@@ -3078,10 +2992,8 @@ int servernum;
 */
 
 /* Toggles notify mode brief/verbose */
-void NotifyModeToggle(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+NotifyModeToggle (char *command, char *args, char *subargs)
 {
     char *tmpstr=(char *) 0;
 
@@ -3099,10 +3011,8 @@ char *subargs;
 }
 
 /* Pings yourself */
-void PingMe(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+PingMe (char *command, char *args, char *subargs)
 {
     struct timeval timenow;
 
@@ -3113,10 +3023,8 @@ char *subargs;
 
 /* Notepad - in case you don't have pen & paper handy... */
 #ifndef LITE
-void NotePad(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+NotePad (char *command, char *args, char *subargs)
 {
     int  oldumask=umask(0177);
     char *filepath;
@@ -3139,10 +3047,8 @@ char *subargs;
 #endif
 
 /* Toggles URL catcher on/off */
-void URLCatchToggle(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+URLCatchToggle (char *command, char *args, char *subargs)
 {
     char *tmpstr=(char *) 0;
 
@@ -3165,7 +3071,8 @@ char *subargs;
 
 /* Prints head of /LINKS */
 #ifdef WANTANSI
-void PrintLinksHead() {
+void 
+PrintLinksHead (void) {
     char tmpbuf1[mybufsize/4];
     char tmpbuf2[mybufsize/4];
 
@@ -3217,10 +3124,8 @@ void PrintLinksHead() {
 #endif
 
 /* URL command coded by Zakath */
-void URLSave(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+URLSave (char *command, char *args, char *subargs)
 {
     int count=0;
     struct urlstr *tmpurl;
@@ -3255,9 +3160,8 @@ char *subargs;
 }
 
 /* Prompts for URL description */
-void URLSave2(stuff,line)
-char *stuff;
-char *line;
+void 
+URLSave2 (char *stuff, char *line)
 {
     int found = 0;
     long count = 1;
@@ -3283,9 +3187,8 @@ char *line;
 }
 
 /* Final part, actually does saving */
-void URLSave3(blah,args)
-char *blah;
-char *args;
+void 
+URLSave3 (char *blah, char *args)
 {
     int  oldumask=umask(0177);
     char *filepath;
@@ -3311,9 +3214,8 @@ char *args;
 
 #ifdef WANTANSI
 /* Counts ansi chars in string */
-int CountAnsiInput(str,len)
-char *str;
-int len;
+int 
+CountAnsiInput (char *str, int len)
 {
     register int  count=0;
     register int  x=0;
@@ -3360,7 +3262,8 @@ List *elmt2;
 #endif
 
 /* BanKicks the last joined person */
-void LastJoinerKick() {
+void 
+LastJoinerKick (void) {
     char *channel;
     char *lastjoin;
     char tmpbuf[mybufsize/4+1];
@@ -3384,7 +3287,8 @@ void LastJoinerKick() {
 }
 
 /* Accepts chat from last user that has requested it */
-void AcceptLastChat() {
+void 
+AcceptLastChat (void) {
     if (LastChat) dcc_chat(LastChat);
     else say("No chat request so far");
 }
@@ -3412,7 +3316,7 @@ int iscrypted;
     struct urlstr *urlnew, *tmpurl, *prevurl = NULL;
 
     if (line == NULL)
-        return;
+        return 0;
     strmcpy(tmpbuf1, line, sizeof(tmpbuf1));
     *tmpstr2 = '\0';
     while (*tmpstr1) {
@@ -3562,7 +3466,8 @@ ChannelList *chan;
 }
 
 /* Initializes keys and default color scheme */
-void InitKeysColors() {
+void 
+InitKeysColors (void) {
 #ifdef WANTANSI
     int i;
 #endif
@@ -4158,10 +4063,8 @@ void InitKeysColors() {
 
 /* Kicks nick from multiple channel */
 #ifndef LITE
-void MultiKick(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+MultiKick (char *command, char *args, char *subargs)
 {
     char *nick=(char *) 0;
     char *channels=(char *) 0;
@@ -4197,10 +4100,8 @@ char *subargs;
 
 /* Kills users matching filter with WHO */
 #ifdef OPER
-void WhoKill(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+WhoKill (char *command, char *args, char *subargs)
 {
     char *filter=(char *) 0;
     char *pattern=(char *) 0;
@@ -4224,10 +4125,8 @@ char *subargs;
 }
 
 /* Does the actual killing */
-void DoKill(nick,user,host)
-char *nick;
-char *user;
-char *host;
+void 
+DoKill (char *nick, char *user, char *host)
 {
     char tmpbuf[mybufsize/4];
 
@@ -4241,7 +4140,8 @@ char *host;
 }
 
 /* Reports statistics for filter kill */
-void HandleEndOfKill() {
+void 
+HandleEndOfKill (void) {
     say("Total of %d users were killed",WhoKillNum);
     inSZFKill=0;
     new_free(&wkillpattern);
@@ -4251,10 +4151,8 @@ void HandleEndOfKill() {
 
 #ifdef WANTANSI
 /* Returns terminal sequence to set given color */
-int BuildColorNew(color, dest, lineno)
-char *color;
-char *dest;
-int  lineno;
+int 
+BuildColorNew (char *color, char *dest, int lineno)
 {
     int  colnum;
     char *tmpstr = color;
@@ -4294,11 +4192,8 @@ int  lineno;
 }
 
 /* Builds color strings for default theme */
-int InitColor(colorstr, colorseq, colornum, append)
-char **colorstr;
-char **colorseq;
-int colornum;
-int append;
+int 
+InitColor (char **colorstr, char **colorseq, int colornum, int append)
 {
     char *colorname = ColorName(colornum);
 
--- a/source/edit6.c
+++ b/source/edit6.c
@@ -261,10 +261,8 @@ extern time_t start_time;
 
 #if defined(EXTRAS) || defined(FLIER)
 /* Checks if signed on user should be invited */
-void CheckInvite(nick,userhost,server)
-char *nick;
-char *userhost;
-int  server;
+void 
+CheckInvite (char *nick, char *userhost, int server)
 {
     char tmpbuf[mybufsize/4];
     NickList *tmpnick;
@@ -310,9 +308,8 @@ int  server;
 #endif /* EXTRAS || FLIER */
 
 /* Returns privilege as flags */
-void BuildPrivs(user,buffer)
-struct friends *user;
-char *buffer;
+void 
+BuildPrivs (struct friends *user, char *buffer)
 {
     if (user && user->privs) {
         if ((user->privs)&FLINVITE) strcat(buffer,"I");
@@ -387,8 +384,8 @@ ChannelList *tmpchan;
 }
 
 /* Removes nick from DCC list */
-void RemoveFromDCCList(nick)
-char *nick;
+void 
+RemoveFromDCCList (char *nick)
 {
     DCC_list *Client;
     DCC_list *tmp;
@@ -448,10 +445,8 @@ ChannelList *chan;
 
 /* Does trace then kills users matching filter */
 #ifdef OPER
-void TraceKill(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+TraceKill (char *command, char *args, char *subargs)
 {
     char *filter;
 
@@ -473,8 +468,8 @@ char *subargs;
 }
 
 /* Does the actual killing */
-void DoTraceKill(user)
-char *user;
+void 
+DoTraceKill (char *user)
 {
     char *nick;
     char *host=(char *) 0;
@@ -500,7 +495,8 @@ char *user;
 }
 
 /* Reports statistics for filter kill */
-void HandleEndOfTraceKill() {
+void 
+HandleEndOfTraceKill (void) {
     if (inSZFKill) {
         say("Total of %d users were killed",FilterKillNum);
         inSZFKill=0;
@@ -512,10 +508,8 @@ void HandleEndOfTraceKill() {
 
 /* Generates map of IRC servers */
 #ifndef LITE
-void Map(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Map (char *command, char *args, char *subargs)
 {
     char *server;
     char servbuf[mybufsize/16+4];
@@ -537,9 +531,8 @@ char *subargs;
 }
 
 /* This stores map info to memory */
-void AddToMap(server,distance)
-char *server;
-char *distance;
+void 
+AddToMap (char *server, char *distance)
 {
     int dist=atoi(distance);
     struct mapstr *tmpmap;
@@ -570,7 +563,8 @@ char *distance;
 }
 
 /* This prints map */
-void PrintMap() {
+void 
+PrintMap (void) {
     int  prevdist=0;
     char *ascii;
     char tmpbuf1[mybufsize/2];
@@ -611,9 +605,8 @@ void PrintMap() {
 #endif
 
 /* Updates pointer to shit list */
-struct autobankicks *FindShit(userhost,channel)
-char *userhost;
-char *channel;
+struct autobankicks *
+FindShit (char *userhost, char *channel)
 {
     struct autobankicks *tmpabk;
 
@@ -626,7 +619,8 @@ char *channel;
 }
 
 /* Checks for things every minute */
-void CheckTimeMinute() {
+void 
+CheckTimeMinute (void) {
     int  i;
 #ifdef EXTRAS
     int  max=get_int_var(MAX_MODES_VAR);
@@ -772,10 +766,8 @@ void CheckTimeMinute() {
 }
 
 /* Adds/removes flags for userlist entries */
-void AddFriendPrivs(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+AddFriendPrivs (char *command, char *args, char *subargs)
 {
     int  i;
     int  add=!strcmp(command,"ADD")?1:0;
@@ -833,10 +825,8 @@ char *subargs;
 }
 
 /* Adds/removes channel from a list separated by , */
-int AddRemoveChannel(setting,channel,add)
-char **setting;
-char *channel;
-int  add;
+int 
+AddRemoveChannel (char **setting, char *channel, int add)
 {
     int  change=0;
     char *tmpstr;
@@ -875,10 +865,8 @@ int  add;
 }
 
 /* Adds/removes channels for userlist entries */
-void AddFriendChannel(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+AddFriendChannel (char *command, char *args, char *subargs)
 {
     int  i,j;
     int  add=!strcmp(command,"ADD")?1:0;
@@ -928,10 +916,8 @@ char *subargs;
 }
 
 /* Kicks multiple nicks at the same time */
-void MassKick(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+MassKick (char *command, char *args, char *subargs)
 {
     char *channel;
     char *comment;
@@ -964,10 +950,8 @@ char *subargs;
 }
 
 /* Pings a server for precise lag time accros net. - Zakath */
-void ServerPing(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ServerPing (char *command, char *args, char *subargs)
 {
     char *server;
     struct spingstr *spingnew;
@@ -1011,10 +995,8 @@ char *subargs;
 }
 
 /* Sets ScrollZ settings (on/off) */
-void OnOffCommand(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+OnOffCommand (char *command, char *args, char *subargs)
 {
     int  i;
     char *tmpstr;
@@ -1111,10 +1093,8 @@ char *subargs;
 }
 
 /* Sets ScrollZ settings (numbers) */
-void NumberCommand(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+NumberCommand (char *command, char *args, char *subargs)
 {
     int  i;
     int  number;
@@ -1170,8 +1150,8 @@ char *subargs;
 }
 
 /* Sets channels' settings */
-void SetChannels(setting)
-int setting;
+void 
+SetChannels (int setting)
 {
     int i;
     int oldlog;
@@ -1300,10 +1280,8 @@ int setting;
 }
 
 /* Sets auto completion on/off */
-void SetAutoCompletion(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+SetAutoCompletion (char *command, char *args, char *subargs)
 {
     int newset=0;
     char *tmpstr;
@@ -1343,10 +1321,8 @@ char *subargs;
 
 #ifdef EXTRAS
 /* Sets idle kick on/off */
-void SetIdleKick(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+SetIdleKick (char *command, char *args, char *subargs)
 {
     int newset=0;
     char *tmpstr;
@@ -1383,10 +1359,8 @@ char *subargs;
 #endif /* EXTRAS */
 
 /* Sets ScrollZ settings (on channels/off) */
-void ChannelCommand(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ChannelCommand (char *command, char *args, char *subargs)
 {
     int  i;
     int  isorignick;
@@ -1454,17 +1428,16 @@ char *subargs;
 }
 
 /* Prints usage for command */
-void PrintUsage(line)
-char *line;
+void 
+PrintUsage (char *line)
 {
     say("Usage: /%s",line);
 }
 
 #ifdef WANTANSI
 /* Converts mIRC colors to ANSI, by Ananda - fix by ddd */
-void ConvertmIRC(buffer,newbuf)
-char *buffer;
-char *newbuf;
+void 
+ConvertmIRC (char *buffer, char *newbuf)
 {
     struct {
         char *fg, *bg;
@@ -1526,14 +1499,8 @@ char *newbuf;
 
 #ifdef CELE
 /* Formats TRACE - by Zakath */
-void HandleTrace(trnum,type,sclass,arg1,arg2,arg3,arg4)
-int  trnum;
-char *type;
-char *sclass;
-char *arg1;
-char *arg2;
-char *arg3;
-char *arg4;
+void 
+HandleTrace (int trnum, char *type, char *sclass, char *arg1, char *arg2, char *arg3, char *arg4)
 {
     if ((TraceOper || TraceAll) && trnum==204)
         put_it("%sOper: %c%s%c (%s)",numeric_banner(),bold,arg1,bold,sclass);
@@ -1545,10 +1512,8 @@ char *arg4;
 }
 
 /* Sends TRACE command, allows for switches - by Zakath */
-void ScrollZTrace(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ScrollZTrace (char *command, char *args, char *subargs)
 {
     char *tswitch;
     char *server=(char *) 0;
@@ -1588,11 +1553,8 @@ char *subargs;
 
 #ifdef WANTANSI
 /* Colorizes user@host */
-void ColorUserHost(userhost,color,buffer,parentheses)
-char *userhost;
-char *color;
-char *buffer;
-int  parentheses;
+void 
+ColorUserHost (char *userhost, char *color, char *buffer, int parentheses)
 {
     char *tmpstr;
     char tmpbuf[mybufsize/4+1];
@@ -1625,10 +1587,8 @@ int  parentheses;
 #endif
 
 /* Adds/removes channels to ScrollZ settings */
-void AddChannel(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+AddChannel (char *command, char *args, char *subargs)
 {
     int  i;
     int  add=!strcmp(command,"ADD")?1:0;
@@ -1665,8 +1625,8 @@ char *subargs;
 }
 
 /* Used to calculate hash value */
-int HashFunc(nick)
-char *nick;
+int 
+HashFunc (char *nick)
 {
     int  sum=0;
     unsigned char *tmp;
@@ -1677,10 +1637,8 @@ char *nick;
 }
 
 /* Shows some ScrollZ related information */
-void ScrollZInfo(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ScrollZInfo (char *command, char *args, char *subargs)
 {
     int  timediff = time(NULL) - start_time;
     char *szver;
@@ -1704,9 +1662,8 @@ char *subargs;
 }
 
 /* Handles reply number 329 from server */
-void ChannelCreateTime(from,ArgList)
-char *from;
-char **ArgList;
+void 
+ChannelCreateTime (char *from, char **ArgList)
 {
     char *channel;
     time_t createtime;
@@ -1740,10 +1697,8 @@ char **ArgList;
 
 #ifdef CELE
 /* displays your system's uptime */
-void ExecUptime(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ExecUptime (char *command, char *args, char *subargs)
 {
     char tmpbuf[mybufsize/4];
 
@@ -1752,10 +1707,8 @@ char *subargs;
 }
 
 /* Does /CTCP nick finger */
-void CTCPFing(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+CTCPFing (char *command, char *args, char *subargs)
 {
     char *target=NULL;
 
@@ -1769,9 +1722,8 @@ char *subargs;
 #endif
 
 /* Checks whether we tried to ping non existing server */
-void NoSuchServer4SPing(from,ArgList)
-char *from;
-char **ArgList;
+void 
+NoSuchServer4SPing (char *from, char **ArgList)
 {
     char *server=ArgList[0];
     struct spingstr *spingtmp;
@@ -1791,9 +1743,8 @@ char **ArgList;
 }
 
 /* Returns server from netsplit info */
-char *GetNetsplitServer(channel,nick)
-char *channel;
-char *nick;
+char *
+GetNetsplitServer (char *channel, char *nick)
 {
     char *server;
     struct wholeftch  *wholch;
@@ -1811,8 +1762,8 @@ char *nick;
 }
 
 /* Handles delayed opping */
-void HandleDelayOp(stuff)
-char *stuff;
+void 
+HandleDelayOp (char *stuff)
 {
     char *flag;
     char mode=' ';
@@ -1846,8 +1797,8 @@ char *stuff;
 }
 
 /* Handles delayed notify */
-void HandleDelayNotify(stuff)
-char *stuff;
+void 
+HandleDelayNotify (char *stuff)
 {
     int old_server=from_server;
     void (*func)()=(void(*)()) HandleUserhost;
@@ -1891,10 +1842,8 @@ NickList **user2;
 }
 
 /* Show idle time for users */
-void ShowIdle(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ShowIdle (char *command, char *args, char *subargs)
 {
 #ifdef WANTANSI
     int  len = 0;
@@ -1998,7 +1947,8 @@ char *subargs;
 #endif
 
 /* Try to switch nick to orignick */
-void SwitchNick() {
+void 
+SwitchNick (void) {
     int i=0;
     char savechar='\0';
     char *curnick=(char *) 0;
@@ -2034,10 +1984,8 @@ void SwitchNick() {
 
 #ifdef OPER
 /* Kills multiple nicks at the same time by acidflash */
-void MassKill(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+MassKill (char *command, char *args, char *subargs)
 {
     int	 meep=1;
     char *comment;
@@ -2058,8 +2006,8 @@ char *subargs;
 #endif /* OPER */
 
 /* Check if given server is valid, ie. it still exists and it's connected */
-int CheckServer(server)
-int server;
+int 
+CheckServer (int server)
 {
     if (server>=0 && server<number_of_servers && server_list[server].connected)
         return(1);
@@ -2067,7 +2015,8 @@ int server;
 }
 
 /* Clean up ScrollZ allocated variables */
-void CleanUpScrollZVars() {
+void 
+CleanUpScrollZVars (void) {
     new_free(&DefaultServer);
     new_free(&ScrollZstr);
     new_free(&ScrollZver1);
@@ -2135,7 +2084,8 @@ void CleanUpScrollZVars() {
 }
 
 /* Clean up all stuff from memory on exit */
-void CleanUp() {
+void 
+CleanUp (void) {
     int i;
     char tmpbuf[mybufsize/32];
     struct list *tmplist;
@@ -2312,10 +2262,8 @@ void CleanUp() {
 }
 
 /* Support for encrypted sessions */
-void EncryptMsg(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+EncryptMsg (char *command, char *args, char *subargs)
 {
     int show_keys = 0;
     int clear_all = 0;
@@ -2410,9 +2358,8 @@ void EncryptMasterPass(char *user, char *pass)
 }
 
 /* Handle encryption list */
-void EncryptAdd(user, key)
-char *user;
-char *key;
+void 
+EncryptAdd (char *user, char *key)
 {
     int show_keys = 0;
     struct encrstr *tmp;
@@ -2540,9 +2487,8 @@ void EncryptList(char *flags)
 }
 
 /* Encrypt message */
-int EncryptMessage(message, user)
-char *message;
-char *user;
+int 
+EncryptMessage (char *message, char *user)
 {
     int type = 1;
     int encr_type = SZ_ENCR_PRIVMSG;
@@ -2561,9 +2507,8 @@ char *user;
 }
 
 /* Decrypt message */
-int DecryptMessage(message, user)
-char *message;
-char *user;
+int 
+DecryptMessage (char *message, char *user)
 {
     int type = 1;
     struct encrstr *tmp;
@@ -2578,10 +2523,8 @@ char *user;
 
 #ifdef OPER
 /* Filtered trace */
-void FilterTrace(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+FilterTrace (char *command, char *args, char *subargs)
 {
     int etrace = 0;
     int countonly = 0;
@@ -2631,8 +2574,8 @@ char *subargs;
 }
 
 /* Actual filtered trace */
-void DoFilterTrace(stuff)
-char *stuff;
+void 
+DoFilterTrace (char *stuff)
 {
     char *nick;
     char *host;
@@ -2666,8 +2609,8 @@ char *stuff;
 #endif /* OPER */
 
 /* Format time in compressed format */
-char *FormatTime(timediff)
-int timediff;
+char *
+FormatTime (int timediff)
 {
     static char timebuf[mybufsize/32];
 
@@ -2677,9 +2620,8 @@ int timediff;
 }
 
 /* Store key for later join */
-void AddJoinKey(clienttype,notice)
-int clienttype;
-char *notice;
+void 
+AddJoinKey (int clienttype, char *notice)
 {
     int i;
     static int joinkeyinit=0;
@@ -2801,8 +2743,8 @@ char *notice;
 }
 
 /* Check key for join */
-char *CheckJoinKey(channel)
-char *channel;
+char *
+CheckJoinKey (char *channel)
 {
     int i;
     char *key=empty_string;
@@ -2819,7 +2761,8 @@ char *channel;
 
 /* Try to join a channel */
 #ifdef ACID
-void TryChannelJoin() {
+void 
+TryChannelJoin (void) {
     int  found;
     int  lasttimer=0;
     char *tmpstr;
@@ -2886,10 +2829,8 @@ void TryChannelJoin() {
 #endif /* ACID */
 
 /* Change user's password */
-void ChangePassword(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ChangePassword (char *command, char *args, char *subargs)
 {
     int count=0;
     int isfilt=0;
@@ -2928,10 +2869,8 @@ char *subargs;
 
 /* Does /STATS i with filter */
 #ifdef OPER
-void StatsIFilter(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+StatsIFilter (char *command, char *args, char *subargs)
 {
     char *tmpstr;
 
@@ -2945,10 +2884,8 @@ char *subargs;
 }
 
 /* Parses STATS i reply from server */
-void HandleStatsI(statschar, ipiline, uhiline)
-char *statschar;
-char *ipiline;
-char *uhiline;
+void 
+HandleStatsI (char *statschar, char *ipiline, char *uhiline)
 {
     char *tmpstr;
     char tmpbuf1[mybufsize / 2 + 1];
@@ -2968,10 +2905,8 @@ char *uhiline;
 }
 
 /* Does /STATS c with filter */
-void StatsCFilter(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+StatsCFilter (char *command, char *args, char *subargs)
 {
     char *tmpstr;
 
@@ -2985,10 +2920,8 @@ char *subargs;
 }
 
 /* Parses STATS c reply from server */
-void HandleStatsC(statschar,str1,str2)
-char *statschar;
-char *str1;
-char *str2;
+void 
+HandleStatsC (char *statschar, char *str1, char *str2)
 {
     char *tmpstr;
     char tmpbuf1[mybufsize/2+1];
@@ -3007,10 +2940,8 @@ char *str2;
 }
 
 /* Does /STATS L with filter */
-void StatsLFilter(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+StatsLFilter (char *command, char *args, char *subargs)
 {
     char statschar='L';
     char *tmpstr;
@@ -3032,10 +2963,8 @@ char *subargs;
 }
 
 /* Parses STATS L reply from server */
-void HandleStatsL(statschar,str1,str2)
-char *statschar;
-char *str1;
-char *str2;
+void 
+HandleStatsL (char *statschar, char *str1, char *str2)
 {
     if (!StatslNumber) say("L-Line");
     if (!StatslFilter || (StatslFilter && (wild_match(StatslFilter,statschar))))
@@ -3045,10 +2974,8 @@ char *str2;
 #endif /* OPER */
 
 /* Toggle value of ARinWindow */
-void ARinWindowToggle(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ARinWindowToggle (char *command, char *args, char *subargs)
 {
     char *tmpstr;
 
@@ -3081,8 +3008,8 @@ char *subargs;
 }
 
 /* Figure out if we're dealing with IrcNet's oper channel */
-int IsIrcNetOperChannel(channel)
-char *channel;
+int 
+IsIrcNetOperChannel (char *channel)
 {
     if (!my_stricmp(channel,"&servers") || !my_stricmp(channel,"&errors")   ||
         !my_stricmp(channel,"&notices") || !my_stricmp(channel,"&local")    ||
@@ -3118,10 +3045,8 @@ int CompareAddr(element1,element2)
 
 /* Topic locking */
 #ifdef EXTRAS
-void TopicLocked(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+TopicLocked (char *command, char *args, char *subargs)
 {
     int first = 1;
     int remove;
@@ -3219,8 +3144,8 @@ ChannelList *tmpchan;
 #endif
 
 /* Return time stamp in static buffer */
-char *TimeStamp(when)
-int when;
+char *
+TimeStamp (int when)
 {
     static char stampbuf[mybufsize / 4 + 1];
 
@@ -3230,10 +3155,8 @@ int when;
 }
 
 /* CJOIN and KNOCK by braneded */
-void CJoin(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+CJoin (char *command, char *args, char *subargs)
 {
     char *tmpchan=(char *) 0;
     char tmpbuf[mybufsize/4];
@@ -3252,10 +3175,8 @@ char *subargs;
 }
 
 /* Configures per channel logging */
-void ChanLogCommand(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ChanLogCommand (char *command, char *args, char *subargs)
 {
     char *setting = (char *) 0;
 
@@ -3400,10 +3321,8 @@ ChannelList *chan;
 
 #ifdef OPER
 /* Does /STATS D with filter */
-void StatsDFilter(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+StatsDFilter (char *command, char *args, char *subargs)
 {
     int doall=1;
     char *tmpstr;
@@ -3427,10 +3346,8 @@ char *subargs;
 }
 
 /* Parses STATS d reply from server */
-void HandleStatsD(statschar,str1,str2)
-char *statschar;
-char *str1;
-char *str2;
+void 
+HandleStatsD (char *statschar, char *str1, char *str2)
 {
     char *tmpstr;
     char tmpbuf1[mybufsize/2+1];
@@ -3450,10 +3367,8 @@ char *str2;
 #endif /* OPER */
 
 /* Clears channel of ban exceptions */
-void CdExceptions(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+CdExceptions (char *command, char *args, char *subargs)
 {
     int  count = 0;
     int  send = 0;
@@ -3516,15 +3431,15 @@ char *subargs;
 }
 
 /* Send data to server */
-void SendToServer(stuff)
-char *stuff;
+void 
+SendToServer (char *stuff)
 {
     send_to_server("%s", stuff);
 }
 
 /* Should we rate limit the join */
-int RateLimitJoin(server_index)
-int server_index;
+int 
+RateLimitJoin (int server_index)
 {
     char *verstr = server_list[server_index].version_string;
     char *buf = NULL;
@@ -3548,10 +3463,8 @@ int server_index;
 }
 
 /* Extends current topic */
-void ExtendTopic(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+ExtendTopic (char *command, char *args, char *subargs)
 {
     char *tmpchan = NULL;
     ChannelList *chan;
@@ -3572,10 +3485,8 @@ char *subargs;
 }
 
 /* Sets topic delimiter */
-void TopicDelimiter(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+TopicDelimiter (char *command, char *args, char *subargs)
 {
     char *delim;
     char tmpbuf[mybufsize / 32];
@@ -3589,10 +3500,8 @@ char *subargs;
     say("Topic delimiter is %s", ExtTopicDelimiter);
 }
 
-void Monitor(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+Monitor (char *command, char *args, char *subargs)
 {
 	char *nicks;
 
@@ -3680,8 +3589,8 @@ char *ptr;
 }
 
 /* Format server name - enclose IPv6 address in []s */
-char *FormatServerName(server)
-char *server;
+char *
+FormatServerName (char *server)
 {
 #ifdef INET6
     struct in6_addr ipv6_addr;
@@ -3698,9 +3607,7 @@ char *server;
 }
 
 /* Verify if given window pointer is still valid */
-int IsValidWindow(server, window)
-int server;
-Window *window;
+int IsValidWindow(int server, Window *window)
 {
     int flag = 1;
     Window *tmp;
@@ -3712,10 +3619,8 @@ Window *window;
 }
 
 /* Parse notification level string */
-void SetNotificationLevel(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+SetNotificationLevel (char *command, char *args, char *subargs)
 {
 #ifdef HAVE_LIBNOTIFY
     char *tmpstr;
@@ -3756,9 +3661,8 @@ void InitOther(void) {
 }
 
 /* Send notification using libnotify */
-void SendNotification(type, str)
-int type;
-char *str;
+void 
+SendNotification (int type, char *str)
 {
 #ifdef HAVE_LIBNOTIFY
     NotifyNotification *n;
--- a/source/exec.c
+++ b/source/exec.c
@@ -137,9 +137,8 @@ static	void	send_exec_result _((Process *, char *));
  * exec_close: silly, eh?  Well, it makes the code look nicer.  Or does it
  * really?  No.  But what the hell 
  */
-static	int
-exec_close(des)
-	int	des;
+static int 
+exec_close (int des)
 {
 	if (des != -1)
 		new_close(des);
@@ -151,9 +150,8 @@ exec_close(des)
  * for upon process exit.  This is used by waitcmd() in edit.c.  An index of
  * -1 disables this.
  */
-void
-set_wait_process(proccess)
-	int	proccess;
+void 
+set_wait_process (int proccess)
 {
 	wait_index = proccess;
 }
@@ -162,9 +160,8 @@ set_wait_process(proccess)
  * valid_process_index: checks to see if index refers to a valid running
  * process and returns true if this is the case.  Returns false otherwise 
  */
-static	int
-valid_process_index(proccess)
-	int	proccess;
+static int 
+valid_process_index (int proccess)
 {
 	if ((proccess < 0) || (proccess >= process_list_size))
 		return (0);
@@ -185,17 +182,18 @@ valid_process_index(proccess)
 
 volatile static int _child_died = 0;
 
-static	void
-_child_death()
+static void 
+_child_death (void)
 {
 	_child_died = 1;
 }
 
-int
-waitpid(pid, status, options)
-	int	pid;	/* Only works if pid == -1! */
-	int	*status;
-	int	options;
+int 
+waitpid (
+    int pid,	/* Only works if pid == -1! */
+    int *status,
+    int options
+)
 {
 	int rval;
 	void (*prev_sigcld)();
@@ -219,9 +217,8 @@ waitpid(pid, status, options)
 }
 #endif /* not BSDWAIT && NEED_WAITPID */
 
-int
-get_child_exit(pid)
-	int	pid;
+int 
+get_child_exit (int pid)
 {
 	return (check_wait_status(pid));
 }
@@ -230,9 +227,8 @@ get_child_exit(pid)
  * check_wait_status: This waits on child processes, reporting terminations
  * as needed, etc 
  */
-int
-check_wait_status(wanted)
-	int wanted;
+int 
+check_wait_status (int wanted)
 {
 	Process	*proc;
 #ifdef BSDWAIT
@@ -285,8 +281,8 @@ check_wait_status(wanted)
  * the user selected maximum number of output lines.  If so, the processes is
  * effectively killed 
  */
-void
-check_process_limits()
+void 
+check_process_limits (void)
 {
 	int	limit;
 	int	i;
@@ -311,10 +307,8 @@ check_process_limits()
 	}
 }
 
-static void
-send_exec_result(proc, exec_buffer)
-	Process *proc;
-	char *exec_buffer;
+static void 
+send_exec_result (Process *proc, char *exec_buffer)
 {
 	if (proc->redirect)
 	{
@@ -525,8 +519,8 @@ set_process_bits(rd)
  * list_processes: displays a list of all currently running processes,
  * including index number, pid, and process name 
  */
-static	void
-list_processes()
+static void 
+list_processes (void)
 {
 	Process	*proc;
 	int	i;
@@ -555,10 +549,8 @@ list_processes()
 	set_lastlog_msg_level(lastlog_level);
 }
 
-void
-add_process_wait(proc_index, cmd)
-	int 	proc_index;
-	char 	*cmd;
+void 
+add_process_wait (int proc_index, char *cmd)
 {
 	List	*new,
 		**posn;
@@ -578,9 +570,8 @@ add_process_wait(proc_index, cmd)
  * thing.  It only deletes it from the list.  If appropriate, this will also
  * shrink the list as needed 
  */
-static	int
-delete_process(process)
-	int	process;
+static int 
+delete_process (int process)
 {
 	int	flag;
 	List	*cmd,
@@ -664,17 +655,8 @@ delete_process(process)
  * needed.  It will first try to add the process to a currently unused spot
  * in the process table before it increases it's size. 
  */
-static	void
-add_process(name, logical, pid, p_stdin, p_stdout, p_stderr, redirect, who, refnum)
-	char	*name,
-		*logical;
-	int	pid,
-		p_stdin,
-		p_stdout,
-		p_stderr;
-	char	*redirect;
-	char	*who;
-	unsigned int	refnum;
+static void 
+add_process (char *name, char *logical, int pid, int p_stdin, int p_stdout, int p_stderr, char *redirect, char *who, unsigned int refnum)
 {
 	int	i;
 	Process	*proc;
@@ -751,10 +733,8 @@ add_process(name, logical, pid, p_stdin, p_stdout, p_stderr, redirect, who, refn
  * index into the process table.  After the signal is sent, the process is
  * deleted from the process table
  */
-static	void
-kill_process(kill_index, sig)
-	int	kill_index,
-		sig;
+static void 
+kill_process (int kill_index, int sig)
 {
 	if (process_list && (kill_index < process_list_size) && process_list[kill_index])
 	{
@@ -803,9 +783,8 @@ kill_process(kill_index, sig)
 		say("There is no process %d", kill_index);
 }
 
-static	int
-is_logical_unique(logical)
-	char	*logical;
+static int 
+is_logical_unique (char *logical)
 {
 	Process	*proc;
 	int	i;
@@ -822,13 +801,8 @@ is_logical_unique(logical)
  * start_process: Attempts to start the given process using the SHELL as set
  * by the user.
  */
-static	void
-start_process(name, logical, redirect, who, refnum)
-	char	*name,
-		*logical,
-		*who,
-		*redirect;
-	unsigned int	refnum;
+static void 
+start_process (char *name, char *logical, char *redirect, char *who, unsigned int refnum)
 {
 	int	p0[2],
 		p1[2],
@@ -957,11 +931,8 @@ start_process(name, logical, redirect, who, refnum)
  * Otherwise 0 is returned.
  * Added show, to remove some bad recursion, phone, april 1993
  */
-int
-text_to_process(proc_index, text, show)
-	int	proc_index;
-	char	*text;
-	int	show;
+int 
+text_to_process (int proc_index, char *text, int show)
 {
  	u_int	ref;
 	Process	*proc;
@@ -988,9 +959,8 @@ text_to_process(proc_index, text, show)
  * is_process_running: Given an index, this returns true if the index referes
  * to a currently running process, 0 otherwise
  */
-int
-is_process_running(proc_index)
-	int	proc_index;
+int 
+is_process_running (int proc_index)
 {
 	if (proc_index < 0 || proc_index >= process_list_size)
 		return (0);
@@ -1003,9 +973,8 @@ is_process_running(proc_index)
  * logical_to_index: converts a logical process name to it's approriate index
  * in the process list, or -1 if not found
  */
-int
-logical_to_index(logical)
-	char	*logical;
+int 
+logical_to_index (char *logical)
 {
 	Process	*proc;
 	int	i;
@@ -1023,9 +992,8 @@ logical_to_index(logical)
  * get_process_index: parses out a process index or logical name from the
  * given string
  */
-int
-get_process_index(args)
-	char	**args;
+int 
+get_process_index (char **args)
 {
 	char	*s;
 
@@ -1045,9 +1013,8 @@ get_process_index(args)
 }
 
 /* is_process: checks to see if arg is a valid process specification */
-int
-is_process(arg)
-	char	*arg;
+int 
+is_process (char *arg)
 {
 	if (arg && *arg == '%')
 	{
@@ -1062,11 +1029,8 @@ is_process(arg)
  * exec: the /EXEC command.  Handles the whole IRCII process crap. 
  */
 /*ARGSUSED*/
-void
-execcmd(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+execcmd (char *command, char *args, char *subargs)
 {
 	char	*who = (char *) 0,
 		*logical = (char *) 0,
@@ -1316,8 +1280,8 @@ out:
  * clean_up_processes: kills all processes in the procss list by first
  * sending a SIGTERM, then a SIGKILL to clean things up 
  */
-void
-clean_up_processes()
+void 
+clean_up_processes (void)
 {
 	int	i;
 
@@ -1343,8 +1307,8 @@ clean_up_processes()
  * with screen/X, to close all unnessicary fd's that might cause problems
  * later.
  */
-void
-close_all_exec()
+void 
+close_all_exec (void)
 {
 	int	i;
 	int	tmp;
@@ -1366,9 +1330,8 @@ close_all_exec()
 	window_display = tmp;
 }
 
-void
-exec_server_delete(i)
-	int	i;
+void 
+exec_server_delete (int i)
 {
 	int	j;
 
--- a/source/files.c
+++ b/source/files.c
@@ -38,7 +38,8 @@ typedef struct FILE___ File;
 
 static File *FtopEntry=(File *) 0;
 
-File *NewFile()
+File *
+NewFile (void)
 {
     File *tmp=FtopEntry;
     File *tmpfile=(File *) new_malloc(sizeof(File));
@@ -52,8 +53,8 @@ File *NewFile()
     return(tmpfile);
 }
 
-void RemoveFile(file)
-File *file;
+void 
+RemoveFile (File *file)
 {
     File *tmp=FtopEntry;
 
@@ -66,8 +67,8 @@ File *file;
     new_free((char **)&file);
 }
 
-int OpenFileRead(filename)
-char *filename;
+int 
+OpenFileRead (char *filename)
 {
     char *expand=NULL;
     FILE *file;
@@ -84,9 +85,8 @@ char *filename;
     else return(-1);
 }
 
-int OpenFileWrite(filename,type)
-char *filename;
-char *type;
+int 
+OpenFileWrite (char *filename, char *type)
 {
     char *expand=NULL;
     FILE *file;
@@ -104,8 +104,8 @@ char *type;
     else return(-1);
 }
 
-File *LookupFile(fd)
-int fd;
+File *
+LookupFile (int fd)
 {
     File *ptr=FtopEntry;
 
@@ -116,9 +116,8 @@ int fd;
     return((File *) 0);
 }
 
-int FileWrite(fd,stuff)
-int  fd;
-char *stuff;
+int 
+FileWrite (int fd, char *stuff)
 {
     int  result;
     File *ptr=LookupFile(fd);
@@ -131,8 +130,8 @@ char *stuff;
     }
 }
 
-char *FileRead(fd)
-int fd;
+char *
+FileRead (int fd)
 {
     File *ptr=LookupFile(fd);
     char *tmpstr=(char *) 0;
@@ -151,8 +150,8 @@ int fd;
     return(tmpstr);
 }
 
-int FileEof(fd)
-int fd;
+int 
+FileEof (int fd)
 {
     File *ptr=LookupFile(fd);
 
@@ -160,8 +159,8 @@ int fd;
     else return(feof(ptr->file));
 }
 
-int FileClose(fd)
-int fd;
+int 
+FileClose (int fd)
 {
     File *ptr=LookupFile (fd);
 
--- a/source/fish.c
+++ b/source/fish.c
@@ -33,7 +33,8 @@ extern struct encrstr *encrlist;
 /* void initb64(); 
    Initializes the base64->base16 conversion tab. 
    Call this function once when your program starts.  */
-void initb64() {
+void 
+initb64 (void) {
     unsigned int i;
 
     for (i = 0; i < 256; i++) b64buf[i] = 0x00;
@@ -303,10 +304,8 @@ void memXOR(unsigned char *s1, const unsigned char *s2, int n) {
 }
 
 /* Initiate DH 1080 key exchange */
-void KeyExchange(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+KeyExchange (char *command, char *args, char *subargs)
 {
     char *target;
     char *pubkey = MyPubKey;
@@ -326,9 +325,8 @@ char *subargs;
 }
 
 /* Retrieve their key */
-void FishAddRemoteKey(nick, notice)
-char *nick;
-char *notice;
+void 
+FishAddRemoteKey (char *nick, char *notice)
 {
     char pubkey[mybufsize / 2];
     struct encrstr *tmp;
@@ -390,11 +388,8 @@ char *notice;
     }
 }
 
-int FishDecrypt(dest, src, key, bufsize)
-char *dest;
-char *src;
-char *key;
-int bufsize;
+int 
+FishDecrypt (char *dest, char *src, char *key, int bufsize)
 {
     int len;
 
@@ -414,12 +409,8 @@ int bufsize;
 
 /* type = 0 ... private msg
           1 ... public msg */
-int FishEncrypt(dest, src, key, bufsize, type)
-char *dest;
-char *src;
-char *key;
-int bufsize;
-int type;
+int 
+FishEncrypt (char *dest, char *src, char *key, int bufsize, int type)
 {
     int len = strlen(src);
     int i = 0, j, padlen;
--- a/source/flood.c
+++ b/source/flood.c
@@ -64,17 +64,14 @@ static  int flood_users = 0;
  *
  * NOTE:  flood's are never freed.
  */
-int
-/**************************** PATCHED by Flier ******************************/
-/*check_flooding(nick, type, line)*/
-check_flooding(nick, target, type, line)
-/****************************************************************************/
-	char	*nick;
-/**************************** PATCHED by Flier ******************************/
-	char	*target;
+int 
+check_flooding (
 /****************************************************************************/
-	int	type;
-	char	*line;
+    char *nick,
+    char *target,
+    int type,
+    char *line
+)
 {
 	static	int	users = 0,
 			pos = 0;
--- a/source/funny.c
+++ b/source/funny.c
@@ -67,18 +67,14 @@ static	int	funny_min;
 static	int	funny_max;
 static	int	funny_flags;
 
-void
-funny_match(stuff)
-	char	*stuff;
+void 
+funny_match (char *stuff)
 {
 	malloc_strcpy(&match_str, stuff);
 }
 
-void
-set_funny_flags(min, max, flags)
-	int	min,
-		max,
-		flags;
+void 
+set_funny_flags (int min, int max, int flags)
 {
 	funny_min = min;
 	funny_max = max;
@@ -100,10 +96,8 @@ static	size_t	wl_elements = 0;
 static	int	funny_widelist_users _((WideList **, WideList **));
 static	int	funny_widelist_names _((WideList **, WideList **));
 
-static	int
-funny_widelist_users(left, right)
-	WideList	**left,
-			**right;
+static int 
+funny_widelist_users (WideList **left, WideList **right)
 {
 	if ((**left).users > (**right).users)
 		return -1;
@@ -113,10 +107,8 @@ funny_widelist_users(left, right)
 		return my_stricmp((**left).channel, (**right).channel);
 }
 
-static	int
-funny_widelist_names(left, right)
-	WideList	**left,
-			**right;
+static int 
+funny_widelist_names (WideList **left, WideList **right)
 {
 	int	comp;
 
@@ -131,8 +123,8 @@ funny_widelist_names(left, right)
 }
 
 
-void
-funny_print_widelist()
+void 
+funny_print_widelist (void)
 {
 	int	i;
 	char	buffer1[BIG_BUFFER_SIZE+1];
@@ -183,10 +175,8 @@ funny_print_widelist()
 }
 
 /*ARGSUSED*/
-void
-funny_list(from, ArgList)
-	char	*from;
-	char	**ArgList;
+void 
+funny_list (char *from, char **ArgList)
 {
 	char	*channel,
 		*user_cnt,
@@ -274,10 +264,8 @@ funny_list(from, ArgList)
 	}
 }
 
-void
-funny_namreply(from, Args)
-	char	*from;
-	char	**Args;
+void 
+funny_namreply (char *from, char **Args)
 {
 	char	*type,
 		*nick,
@@ -375,10 +363,8 @@ out:
  	restore_message_from();
 }
 
-void
-funny_mode(from, ArgList)
-	char	*from,
-		**ArgList;
+void 
+funny_mode (char *from, char **ArgList)
 {
 	char	*mode, *channel;
 	ChannelList	*tmp = (ChannelList *) 0;
@@ -460,8 +446,8 @@ funny_mode(from, ArgList)
 }
 
 /**************************** PATCHED by Flier ******************************/
-void update_user_mode(modes)
-char *modes;
+void 
+update_user_mode (char *modes)
 {
     int	onoff = 1;
 
@@ -477,7 +463,8 @@ char *modes;
     }
 }
 
-void reinstate_user_modes()
+void 
+reinstate_user_modes (void)
 {
     int  i;
     char modes[64]; /* more than enough */
--- a/source/help.c
+++ b/source/help.c
@@ -104,10 +104,8 @@ static	int	use_help_window = 0;
 /* we are piglet */
 
 /* compar: used by scandir to alphabetize the help entries */
-static	int
-compar(e1, e2)
-	const struct dirent	**e1;
-	const struct dirent	**e2;
+static int 
+compar (const struct dirent **e1, const struct dirent **e2)
 {
 	return (my_stricmp((char *) (*e1)->d_name, (char *) (*e2)->d_name));
 }
@@ -116,9 +114,8 @@ compar(e1, e2)
  * selectent: used by scandir to decide which entries to include in the help
  * listing.  
  */
-static	int
-selectent(entry)
-	const struct dirent	*entry;
+static int 
+selectent (const struct dirent *entry)
 {
 	if (*(entry->d_name) == '.')
 		return (0);
@@ -232,10 +229,8 @@ show_help(window, name)
  * doing help prompts, prompt for the help..
  */
 
-static	void
-help_prompt(name, line)
-	char	*name,
-		*line;
+static void 
+help_prompt (char *name, char *line)
 {
 	if (finished_help_paging)
 	{
@@ -316,10 +311,8 @@ help_prompt(name, line)
  * then we call help_prompt to get the actually displaying of the file
  * on the road.
  */
-static	void
-help_topic(path, name)
-	char	*path;
-	char	*name;
+static void 
+help_topic (char *path, char *name)
 {
 	struct	stat	stat_buf;
 	char	filename[BIG_BUFFER_SIZE+1];
--- a/source/history.c
+++ b/source/history.c
@@ -92,9 +92,8 @@ static	History	*history_tmp = (History *) 0;
  * is no match.  Note that this sticks a '*' at the end if one is not already
  * there. 
  */
-static	char	*
-history_match(match)
-	char	*match;
+static char *
+history_match (char *match)
 {
 	char	*ptr;
 	char	*match_str = (char *)NULL;
@@ -154,10 +153,8 @@ history_match(match)
  * add_to_history_file: This adds the given line of text to the end of the
  * history file using cnt as the history index number. 
  */
-static	void
-add_to_history_file(cnt, line)
-	int	cnt;
-	char	*line;
+static void 
+add_to_history_file (int cnt, char *line)
 {
 	if (hist_file)
 	{
@@ -168,10 +165,8 @@ add_to_history_file(cnt, line)
 	}
 }
 
-static	void
-add_to_history_list(cnt, stuff)
-	int	cnt;
-	char	*stuff;
+static void 
+add_to_history_list (int cnt, char *stuff)
 {
 	History *new;
 
@@ -217,9 +212,8 @@ add_to_history_list(cnt, stuff)
  * function to whatever you send as file.  This expands twiddles and opens
  * the file if all is well 
  */
-void
-set_history_file(file)
-	char	*file;
+void 
+set_history_file (char *file)
 {
 	char	*ptr;
 	int	i,
@@ -283,9 +277,8 @@ set_history_file(file)
  * nulled.  If it exists, it is resized to the new size with a realloc.  Any
  * new entries are nulled. 
  */
-void
-set_history_size(size)
-	int	size;
+void 
+set_history_size (int size)
 {
 	int	i,
 		cnt;
@@ -317,10 +310,8 @@ set_history_size(size)
  * parse_history: given a string of the form "number: stuff", this returns
  * the number as an integer and points ret to stuff 
  */
-static	int
-parse_history(lbuf, ret)
- 	char	*lbuf;
-	char	**ret;
+static int 
+parse_history (char *lbuf, char **ret)
 {
 	char	*ptr;
 	int	entry;
@@ -340,9 +331,8 @@ parse_history(lbuf, ret)
  * array is a circular buffer, and add_to_history handles all that stuff. It
  * automagically allocted and deallocated memory as needed 
  */
-void
-add_to_history(line)
-	char	*line;
+void 
+add_to_history (char *line)
 {
 	char	*ptr;
 
@@ -360,9 +350,8 @@ add_to_history(line)
 		}
 }
 
-static	char	*
-get_from_history_file(which)
-	int	which;
+static char *
+get_from_history_file (int which)
 {
 	char	*ptr;
 /**************************** PATCHED by Flier ******************************/
@@ -401,9 +390,8 @@ get_from_history_file(which)
 	return (ptr);
 }
 
-static	char	*
-get_from_history_buffer(which)
-	int	which;
+static char *
+get_from_history_buffer (int which)
 {
 	if ((get_int_var(HISTORY_VAR) == 0) || (hist_size == 0))
 		return (u_char *) 0;
@@ -444,9 +432,8 @@ get_from_history_buffer(which)
 	}
 }
 
-char	*
-get_from_history(which)
-	int	which;
+char *
+get_from_history (int which)
 {
 	char	*str = (char *)NULL;
 
@@ -459,11 +446,8 @@ get_from_history(which)
 
 /* history: the /HISTORY command, shows the command history buffer. */
 /*ARGSUSED*/
-void
-history(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+history (char *command, char *args, char *subargs)
 {
 	int	cnt,
 		max;
@@ -514,10 +498,8 @@ history(command, args, subargs)
  * returns the found entry as its function value, or null if the entry is not
  * found for some reason.  Note that this routine mallocs the string returned  
  */
-char	*
-do_history(com, rest)
-	char	*com,
-		*rest;
+char *
+do_history (char *com, char *rest)
 {
 	int	hist_num;
 	char	*ptr,
--- a/source/hook.c
+++ b/source/hook.c
@@ -180,10 +180,8 @@ extern	int	load_depth;
 	{ "WINDOW_SWAP",	(Hook *) 0,	2,	0,	0 }
 };
 
-static char	*
-fill_it_out(str, params)
-	char	*str;
-	int	params;
+static char *
+fill_it_out (char *str, int params)
 {
  	char	lbuf[BIG_BUFFER_SIZE + 1];
 	char	*arg,
@@ -231,12 +229,8 @@ struct	CmpInfoStruc
 
 int   cmpinfodone = 0;
 
-static void
-setup_struct(ServReq, SkipSer, SerNum, flags)
-	int	ServReq;
-	int	SkipSer;
-	int	SerNum;
-	int	flags;
+static void 
+setup_struct (int ServReq, int SkipSer, int SerNum, int flags)
 {
 	cmp_info.ServerRequired = ServReq;
 	cmp_info.SkipSerialNum = SkipSer;
@@ -269,15 +263,8 @@ Add_Remove_Check_List(_Item, _Item2)
 	return Add_Remove_Check(_Item, _Item->name);
 }
 
-static	void
-add_numeric_hook(numeric, nick, stuff, noisy, not, server, sernum)
-	int	numeric;
-	char	*nick,
-		*stuff;
-	int	noisy,
-		not;
-	int	server,
-		sernum;
+static void 
+add_numeric_hook (int numeric, char *nick, char *stuff, int noisy, int not, int server, int sernum)
 {
 	NumericList *entry;
 	Hook	*new;
@@ -320,15 +307,8 @@ add_numeric_hook(numeric, nick, stuff, noisy, not, server, sernum)
  * entry to the list as specified by the rest of the parameters.  The new
  * entry is added in alphabetical order (by nick). 
  */
-static	void
-add_hook(which, nick, stuff, noisy, not, server, sernum)
-	int	which;
-	char	*nick,
-		*stuff;
-	int	noisy,
-		not;
-	int	server,
-		sernum;
+static void 
+add_hook (int which, char *nick, char *stuff, int noisy, int not, int server, int sernum)
 {
 	Hook	*new;
 
@@ -391,9 +371,8 @@ show_hook(list, name)
  * If numeric is non-zero, then that particular list is displayed.  The total
  * number of entries displayed is returned 
  */
-static	int
-show_numeric_list(numeric)
-	int	numeric;
+static int 
+show_numeric_list (int numeric)
 {
 	NumericList *tmp;
 	Hook	*list;
@@ -426,9 +405,8 @@ show_numeric_list(numeric)
  * the hook_functions array.  This function returns the number of entries in
  * the list displayed 
  */
-static	int
-show_list(which)
-	int	which;
+static int 
+show_list (int which)
 {
 	Hook	*list;
 	int	cnt = 0;
--- a/source/if.c
+++ b/source/if.c
@@ -48,10 +48,8 @@ static	int	charcount _((char *, int));
  * next_expr finds the next expression delimited by brackets. The type
  * of bracket expected is passed as a parameter. Returns NULL on error.
  */
-char	*
-next_expr(args, itype)
-	char	**args;
-	int	itype;
+char *
+next_expr (char **args, int itype)
 {
 	char	*ptr,
 		*ptr2,
@@ -94,11 +92,8 @@ next_expr(args, itype)
 }
 
 /*ARGSUSED*/
-void
-ifcmd(command, args, subargs)
-	char	*command,
-		*args;
-	char	*subargs;
+void 
+ifcmd (char *command, char *args, char *subargs)
 {
 	char	*exp;
 	char	*sub;
@@ -130,11 +125,8 @@ ifcmd(command, args, subargs)
 }
 
 /*ARGSUSED*/
-void
-whilecmd(command, args, subargs)
-	char	*command,
-		*args;
-	char	*subargs;
+void 
+whilecmd (char *command, char *args, char *subargs)
 {
 	char	*exp = (char *) 0,
 		*ptr,
@@ -176,10 +168,8 @@ whilecmd(command, args, subargs)
 	new_free(&body);
 }
 
-static int    
-charcount(string, what)
-	char    *string;
- 	int	what;
+static int 
+charcount (char *string, int what)
 {
 	int     x       = 0;
 	char    *place  = string - 1;
@@ -195,11 +185,8 @@ charcount(string, what)
  * exactly two commas, it must be a C-like for command, else it must
  * must be an foreach word command
  */
-void
-foreach_handler(command,args,subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+foreach_handler (char *command, char *args, char *subargs)
 {
 	char    *temp = (char *) 0;
 	char    *placeholder;
@@ -224,11 +211,8 @@ foreach_handler(command,args,subargs)
 }
 
 /*ARGSUSED*/
-void
-foreach(command, args, subargs)
-	char	*command,
-		*args;
-	char	*subargs;
+void 
+foreach (char *command, char *args, char *subargs)
 {
 	char	*struc = (char *) 0,
 		*ptr,
@@ -290,11 +274,8 @@ foreach(command, args, subargs)
  * some day.
  */
 
-void
-fe(command, args, subargs)
-	char    *command,
-		*args,
-		*subargs;
+void 
+fe (char *command, char *args, char *subargs)
 {
 	char    *list = (char *) 0,
 		*templist = (char *) 0,
@@ -403,11 +384,8 @@ fe(command, args, subargs)
  *  foreach_handler() routine weeds out any for command that doesnt have
  *  two commans, that checking for those 2 commas is a waste.  I suppose.
  */
-void
-forcmd(command, args, subargs)
-	char    *command;
-	char    *args;
-	char    *subargs;
+void 
+forcmd (char *command, char *args, char *subargs)
 {
 	char	*working = (char *) 0;
 	char	*commence = (char *) 0;
@@ -489,11 +467,8 @@ forcmd(command, args, subargs)
 
 /* fec - iterate over a list of characters */
 
-extern	void
-fec(command, args, subargs)
-	char	*command,
-	*args,
-	*subargs;
+extern void 
+fec (char *command, char *args, char *subargs)
 {
 	char    *pointer;
 	char    *list = (char *) 0;
@@ -571,10 +546,8 @@ fec(command, args, subargs)
  and the others are ignored, so placement of your switches are
  rather important:  Put your most general ones last. */
 #ifndef LITE
-void switchcmd(command, args, subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+switchcmd (char *command, char *args, char *subargs)
 {
     char *control, *body, *header, *commands;
     int af;
@@ -619,10 +592,8 @@ char *subargs;
     }
 }
 
-void repeatcmd(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+repeatcmd (char *command, char *args, char *subargs)
 {
     int value;
     char *num_expr = NULL;
--- a/source/ignore.c
+++ b/source/ignore.c
@@ -96,10 +96,8 @@ typedef struct	IgnoreStru
 /* ignored_nicks: pointer to the head of the ignore list */
 static	Ignore *ignored_nicks = NULL;
 
-static	int
-ignore_usernames_mask(mask, thing)
-	int	mask;
-	int	thing;
+static int 
+ignore_usernames_mask (int mask, int thing)
 {
 	int	i;
 	int	p;
@@ -120,17 +118,8 @@ ignore_usernames_mask(mask, thing)
  * ignore_nickname: adds nick to the ignore list, using type as the type of
  * ignorance to take place.
  */
-static	void
-/**************************** PATCHED by Flier *****************************/
-/*ignore_nickname(nick, type, flag)
-	char	*nick;
-	int	type;
-	int	flag;*/
-ignore_nickname(nick, type, flag, timedignore)
-	char	*nick;
-	int	type;
-        int	flag;
-        char    *timedignore;
+static void 
+ignore_nickname (char *nick, int type, int flag, char *timedignore)
 /***************************************************************************/
 {
 	Ignore	*new;
@@ -307,10 +296,8 @@ ignore_nickname(nick, type, flag, timedignore)
  */
 /**************************** PATCHED by Flier ******************************/
 /*static	int*/
-static void
-/****************************************************************************/
-remove_ignore(nick)
-	char	*nick;
+static void 
+remove_ignore (char *nick)
 {
 	Ignore	*tmp;
 /**************************** PATCHED by Flier ******************************/
@@ -354,10 +341,8 @@ remove_ignore(nick)
  * IGNORE_ALL or ignorace types match, 1 is returned, otherwise 0 is
  * returned.
  */
-int
-is_ignored(nick, type)
-	char	*nick;
-	int	type;
+int 
+is_ignored (char *nick, int type)
 {
 	Ignore	*tmp;
 
@@ -381,9 +366,8 @@ is_ignored(nick, type)
 }
 
 /* ignore_list: shows the entired ignorance list */
-static	void
-ignore_list(nick)
-	char	*nick;
+static void 
+ignore_list (char *nick)
 {
 	Ignore	*tmp;
  	size_t	len = 0;
@@ -599,11 +583,8 @@ ignore_list(nick)
  * user wants to do and calls the proper ignorance command to do it.
  */
 /*ARGSUSED*/
-void
-ignore(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+ignore (char *command, char *args, char *subargs)
 {
 	char	*nick,
 		*type;
@@ -684,9 +665,8 @@ NOTICES NOTES CTCPS CRAP PART JOIN NICK QUIT NONE");
  * set_highlight_char: what the name says..  the character to use
  * for highlighting..  either BOLD, INVERSE, or UNDERLINE..
  */
-void
-set_highlight_char(s)
-	char	*s;
+void 
+set_highlight_char (char *s)
 {
  	size_t	len;
 
@@ -713,10 +693,8 @@ set_highlight_char(s)
 			UNDERLINE");
 }
 
-int
-ignore_combo(flag1, flag2)
-	int	flag1;
-	int	flag2;
+int 
+ignore_combo (int flag1, int flag2)
 {
         if (flag1 == DONT_IGNORE || flag2 == DONT_IGNORE)
                 return DONT_IGNORE;
@@ -731,11 +709,8 @@ ignore_combo(flag1, flag2)
  * double_ignore - makes live simpiler when using doing ignore code
  * added, april 1993, phone.
  */
-int
-double_ignore(nick, userhost, type)
-	char	*nick,
-		*userhost;
-	int	type;
+int 
+double_ignore (char *nick, char *userhost, int type)
 {
 /**************************** Patched by Flier ******************************/
         int isignored;
@@ -773,9 +748,8 @@ double_ignore(nick, userhost, type)
 		return (is_ignored(nick, type));
 }
 
-int
-get_ignore_type(type)
-	char	*type;
+int 
+get_ignore_type (char *type)
 {
 	size_t len = strlen(type);
 	int rv;
@@ -822,7 +796,8 @@ get_ignore_type(type)
 
 /**************************** PATCHED by Flier ******************************/
 /* Clean up allocated memory */
-void CleanUpIgnore() {
+void 
+CleanUpIgnore (void) {
     Ignore *tmpignore;
 
     while (ignored_nicks) {
--- a/source/input.c
+++ b/source/input.c
@@ -77,7 +77,8 @@ static int mbdata_ok = 0;
 static int sz_width = 10; /* how far from right border to shift */
 static int sz_prev_len = 0; /* how many prev. characters to show on shift */
 
-static void ResetNickCompletion() {
+static void 
+ResetNickCompletion (void) {
     tabnickcompl = NULL;
 }
 /****************************************************************************/
@@ -412,9 +413,8 @@ input_check_resized(void)
  *
  * UPDATE_ALL - redraws the entire line 
  */
-void
-update_input(update)
-	int	update;
+void 
+update_input (int update)
 {
 	ScreenInputData* inputdata = &current_screen->inputdata;
 	iconv_t display_conv = NULL;
@@ -604,9 +604,8 @@ refresh_inputline(key, ptr)
 	update_input(UPDATE_ALL);
 }
 
-void
-change_input_prompt(direction)
-	int	direction;
+void 
+change_input_prompt (int direction)
 {
 	if (!current_screen->promptlist)
 	{
@@ -636,9 +635,8 @@ change_input_prompt(direction)
 
 /* input_move_cursor: moves the cursor left or right... got it? */
 /* zero=left, nonzero=right */
-void
-input_move_cursor(dir)
-	int	dir;
+void 
+input_move_cursor (int dir)
 {
 	char* buf  = current_screen->inputdata.buffer.buf;
 	unsigned pos = current_screen->inputdata.buffer.pos;
@@ -949,9 +947,8 @@ re_encode:
  * set_input: sets the input buffer to the given string, discarding whatever
  * was in the input buffer before 
  */
-void
-set_input(str)
-	char	*str;
+void 
+set_input (char *str)
 {
 	u_char converted_input[INPUT_BUFFER_SIZE];
 	struct mb_data mbdata1;
@@ -987,9 +984,8 @@ set_input(str)
 /****************************************************************************/
 }
 
-void
-set_input_raw(str)
-	char* str;
+void 
+set_input_raw (char *str)
 {
 	char* buf    = current_screen->inputdata.buffer.buf;
 	unsigned pos   = current_screen->inputdata.buffer.pos;
@@ -1015,8 +1011,8 @@ set_input_raw(str)
  * actually change the input buffer.  This is a bad way to change the input
  * buffer tho, cause no bounds checking won't be done 
  */
-char	*
-get_input()
+char *
+get_input (void)
 {
 	iconv_const char* source = (iconv_const char*)get_input_raw();
 	
@@ -1103,8 +1099,8 @@ get_input()
 	return converted_buffer;
 }
 
-char	*
-get_input_raw()
+char *
+get_input_raw (void)
 {
 	char* buf    = current_screen->inputdata.buffer.buf;
 	unsigned limit = current_screen->inputdata.buffer.minpos;
@@ -1222,8 +1218,8 @@ input_transpose_characters(key, ptr)
 }
 
 /* init_input: initialized the input buffer by clearing it out */
-void
-init_input()
+void 
+init_input (void)
 {
 	*current_screen->inputdata.buffer.buf = (char) 0;
 	current_screen->inputdata.buffer.pos = current_screen->inputdata.buffer.minpos;
@@ -1243,8 +1239,8 @@ input_yank_cut_buffer(key, ptr)
 }
 
 /* get_input_prompt: returns the current input_prompt */
-char	*
-get_input_prompt()
+char *
+get_input_prompt (void)
 { 
 	return (input_prompt); 
 }
@@ -1254,9 +1250,8 @@ get_input_prompt()
  * buffer.  This prompt cannot be backspaced over, etc.  It's a prompt.
  * Setting the prompt to null uses no prompt 
  */
-void
-set_input_prompt(prompt)
-	char	*prompt;
+void 
+set_input_prompt (char *prompt)
 {
 	if (!prompt)
 	{
@@ -1297,9 +1292,8 @@ set_input_prompt(prompt)
  * have the function.  If you want an input_pause, use add_wait_prompt()
  * with WAIT_PROMPT_KEY.
  */
-char
-input_pause(msg)
-	char	*msg;
+char 
+input_pause (char *msg)
 {
 	char	*ptr = (char *) 0;
 	char	c;
@@ -1353,9 +1347,8 @@ function_curpos(input)
 
 /**************************** PATCHED by Flier ******************************/
 /* set parameters for input prompt shifting */
-void
-set_input_prompt_shift_new(val)
-int val;
+void 
+set_input_prompt_shift_new (int val)
 {
     ScreenInputData* inputdata = &current_screen->inputdata;
 
--- a/source/irc.c
+++ b/source/irc.c
@@ -641,7 +641,7 @@ struct colorstr CmdsColors[NUMCMDCOLORS];
 /* irc_exit: cleans up and leaves */
 RETSIGTYPE
 /**************************** PATCHED by Flier ******************************/
-irc_exit(quit)
+irc_exit(int quit)
 /****************************************************************************/
 {
 	do_hook(EXIT_LIST, "Exiting");
@@ -700,10 +700,8 @@ coredump(sig)
  * the right response to our question.  If the response was affirmative, the
  * user gets booted from irc.  Otherwise, life goes on. 
  */
-static	void
-quit_response(dummy, ptr)
-	char	*dummy;
-	char	*ptr;
+static void 
+quit_response (char *dummy, char *ptr)
 {
  	size_t	len;
  	int	old_irc_io_loop;
@@ -766,8 +764,8 @@ sig_user1()
 	do_sig_user1++;
 }
 
-static void
-real_sig_user1()
+static void 
+real_sig_user1 (void)
 {
 	say("Got SIGUSR1, closing DCC connections and EXECed processes");
 	close_all_dcc();
@@ -811,8 +809,8 @@ sig_refresh_screen()
 }
 
 /* shows the version of irc */
-static	void
-show_version()
+static void 
+show_version (void)
 {
 	printf("ircII version %s\n\r", irc_version);
 	exit (0);
@@ -821,8 +819,8 @@ show_version()
 /*
  * process_hostname: Called at startup and to deal with /SET IRCHOST changes.
  */
-static void
-process_hostname()
+static void 
+process_hostname (void)
 {
 #ifndef INET6
 	struct hostent *hp;
@@ -860,11 +858,8 @@ process_hostname()
 }
 
 /* get_arg: used by parse_args() to get an argument after a switch */
-static	char	*
-get_arg(arg, next, ac)
-	char	*arg;
-	char	*next;
-	int	*ac;
+static char *
+get_arg (char *arg, char *next, int *ac)
 {
 	(*ac)++;
 	if (*arg)
@@ -883,10 +878,8 @@ get_arg(arg, next, ac)
  * parse_args: parse command line arguments for irc, and sets all initial
  * flags, etc. 
  */
-static	char	*
-parse_args(argv, argc)
-	char	**argv;
-	int	argc;
+static char *
+parse_args (char **argv, int argc)
 {
 	char	*arg,
 		*ptr;
@@ -1742,11 +1735,8 @@ int
 /*ARGSUSED*/
 main _((int, char *[], char *[]));
 
-int
-main(argc, argv, envp)
-	int	argc;
-	char	*argv[];
-	char	*envp[];
+int 
+main (int argc, char *argv[], char *envp[])
 {
 	char	*channel;
 
@@ -1942,8 +1932,8 @@ main(argc, argv, envp)
 /* 
  * set_irchost: This sets the source host for subsequent connections.
  */
-void
-set_irchost ()
+void 
+set_irchost (void)
 {
 	char *irchost;
 
--- a/source/ircaux.c
+++ b/source/ircaux.c
@@ -83,8 +83,8 @@ static	int	Init = 0;
 
 static	void	dump_mem _((void));
 
-static	void
-dump_mem()
+static void 
+dump_mem (void)
 {
 	int	i;
 	FILE	*fp;
@@ -171,9 +171,8 @@ dump_mem()
  * new_free:  Why do this?  Why not?  Saves me a bit of trouble here and
  * there 
  */
-void
-new_free(iptr)
-	void	*iptr;
+void 
+new_free (void *iptr)
 {
 	void	**ptr = (void **) iptr;
 #ifdef ALLOC_DEBUG
@@ -239,9 +238,8 @@ static char * wait_pointers[WAIT_BUFFER] = {0}, **current_wait_ptr = wait_pointe
 /*
  * wait_new_free: same as new_free() except that free() is postponed.
  */
-void
-wait_new_free(ptr)
-	char	**ptr;
+void 
+wait_new_free (char **ptr)
 {
 	if (*current_wait_ptr)
 		new_free(current_wait_ptr);
@@ -254,9 +252,8 @@ wait_new_free(ptr)
 /*
  * reall_free: really free the data if level == 0
  */
-void
-really_free(level)
-	int	level;
+void 
+really_free (int level)
 {
 	if (level != 0)
 		return;
@@ -361,11 +358,8 @@ new_malloc(size)
 }
 
 #ifdef ALLOC_DEBUG
-void
-alloc_cmd(command, args, subargs)
-	char    *command,
-		*args,
-		*subargs;
+void 
+alloc_cmd (char *command, char *args, char *subargs)
 {
 	char	*arg;
 	int	f_count = 0,
@@ -435,10 +429,8 @@ alloc_cmd(command, args, subargs)
  * Never call this with ptr pointing to an uninitialised string, as the
  * call to new_free() might crash the client... - phone, jan, 1993.
  */
-void
-malloc_strcpy(ptr, src)
-	char	**ptr;
-	char	*src;
+void 
+malloc_strcpy (char **ptr, char *src)
 {
 	/* no point doing anything else */
 	if (src == *ptr)
@@ -455,10 +447,8 @@ malloc_strcpy(ptr, src)
 }
 
 /* malloc_strcat: Yeah, right */
-void
-malloc_strcat(ptr, src)
-	char	**ptr;
-	char	*src;
+void 
+malloc_strcat (char **ptr, char *src)
 {
 	char	*new;
 
@@ -474,10 +464,8 @@ malloc_strcat(ptr, src)
 		malloc_strcpy(ptr, src);
 }
 
-void
-malloc_strcat_ue(ptr, src)
-	char	**ptr;
-	char	*src;
+void 
+malloc_strcat_ue (char **ptr, char *src)
 {
 	char	*new;
 
@@ -495,9 +483,8 @@ malloc_strcat_ue(ptr, src)
 		malloc_strcpy(ptr, src);
 }
 
-char	*
-upper(s)
-	char	*s;
+char *
+upper (char *s)
 {
 /**************************** PATCHED by Flier ******************************/
 	/*char	*t = (char *) 0;*/
@@ -512,8 +499,7 @@ upper(s)
 }
 
 char *
-lower(s)
-	char *	s;
+lower (char *s)
 {
 	char *	t = (char *) 0;
 
@@ -526,10 +512,8 @@ lower(s)
 
 /**************************** PATCHED by Flier ******************************/
 /* try to find unused port in port range given in /set dcc_ports */
-int BindPort(s,slisten,localaddr)
-int s;
-int slisten;
-struct sockaddr_in *localaddr;
+int 
+BindPort (int s, int slisten, struct sockaddr_in *localaddr)
 {
     int sal=sizeof(struct sockaddr_in);
     int locport;
@@ -576,16 +560,14 @@ struct sockaddr_in *localaddr;
  *
  * -4 connect call failed 
  */
-int
-/**************************** PATCHED by Flier ******************************/
-/*connect_by_number(service, host, nonblocking)*/
-connect_by_number(service,host,nonblocking,dccget)
+int 
+connect_by_number (
 /****************************************************************************/
-	int	service;
-	char	*host;
-	int	nonblocking;
-/**************************** PATCHED by Flier ******************************/
-        int     dccget;
+    int service,
+    char *host,
+    int nonblocking,
+    int dccget
+)
 /****************************************************************************/
 {
 	int	s = -1;
@@ -864,12 +846,8 @@ connect_by_number(service,host,nonblocking,dccget)
  * -2  if host wasn't found
  * -10 if family type wasn't supported for specified host
  */
-static int
-bind_local_addr(localhost, localport, fd, family)
-	char *localhost;
-	char *localport;
-	int fd;
-	int family;
+static int 
+bind_local_addr (char *localhost, char *localport, int fd, int family)
 {
 	struct  addrinfo hintsx, *resx, *res0x;
 	int     err = -1;
@@ -911,10 +889,8 @@ bind_local_addr(localhost, localport, fd, family)
 }
 #endif
 
-char	*
-next_arg(str, new_ptr)
-	char	*str,
-		**new_ptr;
+char *
+next_arg (char *str, char **new_ptr)
 {
 	char	*ptr;
 
@@ -932,10 +908,8 @@ next_arg(str, new_ptr)
 	return ptr;
 }
 
-char	*
-new_next_arg(str, new_ptr)
-	char	*str,
-		**new_ptr;
+char *
+new_next_arg (char *str, char **new_ptr)
 {
 	char	*ptr,
 		*start;
@@ -980,13 +954,14 @@ new_next_arg(str, new_ptr)
 }
 
 /* my_stricmp: case insensitive version of strcmp */
-int
-my_stricmp(str1, str2)
+int 
+my_stricmp (
 /**************************** PATCHED by Flier ******************************/
         /*char	*str1,
 		*str2;*/
-register char	*str1,
-		*str2;
+    register char *str1,
+    register char *str2
+)
 /****************************************************************************/
 {
 	int	xor;
@@ -1118,10 +1093,8 @@ strmcat_ue(dest, src, maxlen)
  * 0.  If it is found, returns the position in source (1 being the first
  * position).  Not the best way to handle this, but what the hell 
  */
-extern	int
-scanstr(source, str)
-	char	*str,
-		*source;
+extern int 
+scanstr (char *source, char *str)
 {
 	int	i,
  		max;
@@ -1138,9 +1111,8 @@ scanstr(source, str)
 }
 
 /* expand_twiddle: expands ~ in pathnames. */
-char	*
-expand_twiddle(str)
-	char	*str;
+char *
+expand_twiddle (char *str)
 {
  	char	lbuf[BIG_BUFFER_SIZE + 1];
 
@@ -1194,9 +1166,8 @@ expand_twiddle(str)
  * rewritten, with help from do_nick_name() from the server code (2.8.5),
  * phone, april 1993.
  */
-char	*
-check_nickname(nick)
-	char	*nick;
+char *
+check_nickname (char *nick)
 {
 	char	*s;
 
@@ -1221,8 +1192,8 @@ check_nickname(nick)
 /*
  * We need this function otherwise bad things happen if you /nick erroneous_nick
  */
-char *check_nickname(nick)
-char *nick;
+char *
+check_nickname (char *nick)
 {
     char *s;
 
@@ -1240,13 +1211,14 @@ char *nick;
  * the group, and returns that position.  If the first character is a ^, then
  * this will match the first occurence not in that group.
  */
-char	*
-sindex(string, group)
+char *
+sindex (
 /**************************** PATCHED by Flier ******************************/
 	/*char	*string,
 		*group;*/
-register char	*string,
-		*group;
+    register char *string,
+    register char *group
+)
 /****************************************************************************/
 {
 	char	*ptr;
@@ -1286,13 +1258,14 @@ register char	*string,
  * the group, and returns that position.  If the first character is a ^, then
  * this will match the first occurence not in that group.
  */
-char	*
-srindex(string, group)
+char *
+srindex (
 /**************************** PATCHED by Flier ******************************/
 	/*char	*string,
 		*group;*/
-register char	*string,
-		*group;
+    register char *string,
+    register char *group
+)
 /****************************************************************************/
 {
 	char	*ptr, *str;
@@ -1329,11 +1302,12 @@ register char	*string,
 }
 
 /* is_number: returns true if the given string is a number, false otherwise */
-int
-is_number(str)
+int 
+is_number (
 /**************************** PATCHED by Flier ******************************/
 	/*char	*str;*/
-register char	*str;
+    register char *str
+)
 /****************************************************************************/
 {
 	while (*str == ' ')
@@ -1354,11 +1328,8 @@ register char	*str;
 }
 
 /* rfgets: exactly like fgets, cept it works backwards through a file!  */
-char	*
-rfgets(lbuf, size, file)
- 	char	*lbuf;
-	int	size;
-	FILE	*file;
+char *
+rfgets (char *lbuf, int size, FILE *file)
 {
 	char	*ptr;
 	off_t	pos;
@@ -1392,10 +1363,8 @@ rfgets(lbuf, size, file)
  * full path name of the file is returned in a static string.  If not, null
  * is returned.  Path is a colon separated list of directories 
  */
-char	*
-path_search(name, path)
-	char	*name;
-	char	*path;
+char *
+path_search (char *name, char *path)
 {
  	static	char	lbuf[BIG_BUFFER_SIZE + 1] = "";
 	char	*ptr,
@@ -1432,10 +1401,8 @@ path_search(name, path)
  * set stuff with the QUOTE_CHAR. It returns a malloced quoted, null
  * terminated string 
  */
-char	*
-double_quote(str, stuff)
-	char	*str;
-	char	*stuff;
+char *
+double_quote (char *str, char *stuff)
 {
  	char	lbuf[BIG_BUFFER_SIZE + 1];
 	char	*ptr = NULL;
@@ -1479,9 +1446,8 @@ double_quote(str, stuff)
  *                                    - Allanon -
  *
  */
-void
-new_stty(option)
-	char	*option;
+void 
+new_stty (char *option)
 {
 #if defined(ESIX) || defined(MIPS_SYSV)
 	struct	termio ttyset;
@@ -1544,9 +1510,8 @@ new_stty(option)
  * OUT: a FILE *, from which read the expanded file
  *
  */
-FILE	*
-zcat(name)
-	char	*name;
+FILE *
+zcat (char *name)
 {
 	FILE	*fp;
 	int	in[2];
@@ -1595,10 +1560,8 @@ zcat(name)
 
 #ifdef NEED_INDEX
 
-extern	char	*
-index(s, c)
-	char	*s;
-	char	c;
+extern char *
+index (char *s, int c)
 {
 # ifdef HAVE_STRSTR
 	return strstr(s, c);
@@ -1616,10 +1579,8 @@ index(s, c)
 
 #ifdef NEED_RINDEX
 
-extern	char	*
-rindex(s, c)
-	char	*s;
-	char	c;
+extern char *
+rindex (char *s, int c)
 {
 # ifdef HAVE_STRRSTR
 	return strrstr(s, c);
@@ -1638,9 +1599,8 @@ rindex(s, c)
 #endif /* NEED_RINDEX */
 
 #ifdef NON_BLOCKING_CONNECTS
-int
-set_non_blocking(fd)
-int	fd;
+int 
+set_non_blocking (int fd)
 {
 	int	res, nonb = 0;
 
@@ -1669,9 +1629,8 @@ no idea how to set an fd to non-blocking
 	return 0;
 }
 
-int
-set_blocking(fd)
-int	fd;
+int 
+set_blocking (int fd)
 {
 	int	res, nonb = 0;
 
--- a/source/ircflush.c
+++ b/source/ircflush.c
@@ -71,8 +71,8 @@ death()
  * setup_master_slave: this searches for an open tty/pty pair, opening the
  * pty as the master device and the tty as the slace device 
  */
-static void
-setup_master_slave()
+static void 
+setup_master_slave (void)
 {
 	char	line[11];
 	char	linec;
@@ -110,10 +110,8 @@ setup_master_slave()
  * of the command line arguments exec'd.  By doing all this, the exec'd
  * process is fooled into flushing each line of output as it occurs.  
  */
-int
-main(argc, argv)
-	int	argc;
-	char	**argv;
+int 
+main (int argc, char **argv)
 {
 	char	buffer[BUFFER_SIZE];
 	int	cnt;
--- a/source/ircio.c
+++ b/source/ircio.c
@@ -103,9 +103,8 @@ new_malloc(size)
  * new_free:  Why do this?  Why not?  Saves me a bit of trouble here and
  * there 
  */
-void
-new_free(ptr)
-	char	**ptr;
+void 
+new_free (char **ptr)
 {
 	if (*ptr)
 	{
@@ -131,10 +130,8 @@ new_free(ptr)
  *
  * -4 connect call failed 
  */
-static	int
-connect_by_number(service, host)
-	int	service;
-	char	*host;
+static int 
+connect_by_number (int service, char *host)
 {
 	int	s;
 	char	buf[100];
@@ -184,10 +181,8 @@ connect_by_number(service, host)
  * Future enhancements: No-blocking io.  It will either discard or dynamically
  * buffer anything that would block. 
  */
-int
-main(argc, argv)
-	int	argc;
-	char	**argv;
+int 
+main (int argc, char **argv)
 {
 	int	des;
 	fd_set	rd;
--- a/source/keys.c
+++ b/source/keys.c
@@ -73,10 +73,8 @@ static	void	bind_it _((char *, char *, u_int, int));
  * number of functions that match the name, and sets where index points
  * to to be the index of the (first) function found.
  */
-static int
-lookup_function(name, func_index)
-	char	*name;
-	int	*func_index;
+static int 
+lookup_function (char *name, int *func_index)
 {
  	size_t	len;
  	int	cnt,
@@ -478,11 +476,8 @@ bind_it(function, string, key, m)
 
 /* parsekeycmd: does the PARSEKEY command.  */
 #ifndef LITE
-void
-parsekeycmd(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+parsekeycmd (char *command, char *args, char *subargs)
 {
 	int	i;
 	char	*arg;
@@ -512,11 +507,8 @@ parsekeycmd(command, args, subargs)
  * key is shown 
  */
 /*ARGSUSED*/
-void
-bindcmd(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+bindcmd (char *command, char *args, char *subargs)
 {
 	u_char	*key;
 	char	*function;
@@ -659,11 +651,8 @@ bindcmd(command, args, subargs)
  * functions
  */
 #ifndef LITE
-void
-rbindcmd(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+rbindcmd (char *command, char *args, char *subargs)
 {
 	int	f;
 	char	*arg;
@@ -752,11 +741,8 @@ change_send_line(func)
  */
 /*ARGSUSED*/
 #ifndef LITE
-void
-typecmd(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+typecmd (char *command, char *args, char *subargs)
 {
 	int	c;
 	char	key;
@@ -3636,10 +3622,8 @@ write_binding(c, m, fp, do_all)
  * save_bindings: this writes all the keys bindings for IRCII to the given
  * FILE pointer using the write_binding function 
  */
-void
-save_bindings(fp, do_all)
-	FILE	*fp;
-	int	do_all;
+void 
+save_bindings (FILE *fp, int do_all)
 {
 	int	i;
 	int	charsize = charset_size();
--- a/source/lastlog.c
+++ b/source/lastlog.c
@@ -47,6 +47,7 @@
 #include "trace.h"
 
 extern void StripAnsi _((char *, char *, int));
+extern void Trace(long area, char *format, char *arg1, char *arg2, char *arg3, char *arg4, char *arg5, char *arg6, char *arg7, char *arg8, char *arg9, char *arg10);
 /****************************************************************************/
 
 static	void	remove_from_lastlog _((Window *));
@@ -80,9 +81,8 @@ static	char	*levels[] =
  * bits_to_lastlog_level: converts the bitmap of lastlog levels into a nice
  * string format.
  */
-char	*
-bits_to_lastlog_level(level)
-	int	level;
+char *
+bits_to_lastlog_level (int level)
 {
 	static	u_char	lbuf[128]; /* this *should* be enough for this */
 	int	i,
@@ -107,9 +107,8 @@ bits_to_lastlog_level(level)
  	return (lbuf);
 }
 
-int
-parse_lastlog_level(str)
-	char	*str;
+int 
+parse_lastlog_level (char *str)
 {
 	char	*ptr,
 		*rest,
@@ -188,9 +187,8 @@ parse_lastlog_level(str)
  * parses the settings and sets the lastlog_level variable appropriately.  It
  * also rewrites the LASTLOG_LEVEL variable to make it look nice 
  */
-void
-set_lastlog_level(str)
-	char	*str;
+void 
+set_lastlog_level (char *str)
 {
 	lastlog_level = parse_lastlog_level(str);
 	set_string_var(LASTLOG_LEVEL_VAR, bits_to_lastlog_level(lastlog_level));
@@ -224,9 +222,8 @@ remove_from_lastlog(window)
  * has gotten larger than it was before, all previous lastlog entry remain.
  * If it get smaller, some are deleted from the end. 
  */
-void
-set_lastlog_size(size)
-	int	size;
+void 
+set_lastlog_size (int size)
 {
 	int	i,
 		diff;
@@ -249,11 +246,8 @@ set_lastlog_size(size)
  * by StElb <stlb@cs.tu-berlin.de>
  */
 /*ARGSUSED*/
-void
-lastlog(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+lastlog (char *command, char *args, char *subargs)
 {
 	int	cnt,
 		from = 0,
@@ -613,9 +607,8 @@ out:
 }
 
 /* set_lastlog_msg_level: sets the message level for recording in the lastlog */
-int
-set_lastlog_msg_level(level)
-	int	level;
+int 
+set_lastlog_msg_level (int level)
 {
 	int	old;
 
@@ -651,7 +644,7 @@ add_to_lastlog(window, line)
 			new->msg = (char *) 0;
 			malloc_strcpy(&(new->msg), line);
                         Trace(SZ_TRACE_LASTLOG, "add lastlog to window %d: %p %s",
-                              window->refnum, new, line);
+                              (char *)window->refnum, (char *)new, (char *)line, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 
 			if (window->lastlog_head)
 				window->lastlog_head->prev = new;
@@ -663,8 +656,8 @@ add_to_lastlog(window, line)
 			if (window->lastlog_size++ == get_int_var(LASTLOG_VAR))
 				remove_from_lastlog(window);
                         Trace(SZ_TRACE_LASTLOG, "lastlog size %d, head %p, tail %p",
-                              window->lastlog_size, window->lastlog_head,
-                              window->lastlog_tail);
+                              (char *)window->lastlog_size, (char *)window->lastlog_head,
+                              (char *)window->lastlog_tail, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 		}
 	}
 }
@@ -676,21 +669,20 @@ islogged(window)
 	return (window->lastlog_level & msg_level) ? 1 : 0;
 }
 
-int
-real_notify_level()
+int 
+real_notify_level (void)
 {
 	return (notify_level);
 }
 
-int
-real_lastlog_level()
+int 
+real_lastlog_level (void)
 {
 	return (lastlog_level);
 }
 
-void
-set_notify_level(str)
-	char	*str;
+void 
+set_notify_level (char *str)
 {
 	notify_level = parse_lastlog_level(str);
 	set_string_var(NOTIFY_LEVEL_VAR, bits_to_lastlog_level(notify_level));
--- a/source/log.c
+++ b/source/log.c
@@ -171,9 +171,8 @@ do_log(flag, logfile, fp)
 }
 
 /* logger: if flag is 0, logging is turned off, else it's turned on */
-void
-logger(flag)
-	int	flag;
+void 
+logger (int flag)
 {
 	char	*logfile;
 
@@ -196,9 +195,8 @@ logger(flag)
  * closes the last log file and reopens it with the new name.  This is called
  * automatically when you SET LOGFILE. 
  */
-void
-set_log_file(filename)
-	char	*filename;
+void 
+set_log_file (char *filename)
 {
 	char	*expanded;
 
--- a/source/mail.c
+++ b/source/mail.c
@@ -92,8 +92,8 @@ static	void	init_mail _((void));
 #endif
 
 /* init_mail: this initialized the path to the users mailbox */
-static	void
-init_mail()
+static void 
+init_mail (void)
 {
 #if defined(AMS_MAIL) || defined(UNIX_MAIL)
 # ifdef UNIX_MAIL
@@ -127,10 +127,8 @@ init_mail()
  * count_files: counts all the visible files in the specified directory and
  * returns that number as the function value 
  */
-static	u_int
-count_files(dir_name, lasttime)
-	char	*dir_name;
-	time_t	lasttime;
+static u_int 
+count_files (char *dir_name, time_t lasttime)
 {
 	DIR	*dir;
 	struct	direct	*dirbuf;
@@ -186,8 +184,8 @@ end:
  * check_mail_status: returns 0 if mail status has not changed, 1 if mail
  * status has changed 
  */
-int
-check_mail_status()
+int 
+check_mail_status (void)
 {
 
 #if defined(AMS_MAIL) || defined(UNIX_MAIL)
@@ -221,8 +219,8 @@ check_mail_status()
  * returns it as static string.  If there are no mail messages, null is
  * returned. 
  */
-char	*
-check_mail()
+char *
+check_mail (void)
 {
 #if !defined(AMS_MAIL) && !defined(UNIX_MAIL)
 	return	(char *) 0;
--- a/source/menu.c
+++ b/source/menu.c
@@ -124,9 +124,8 @@ install_menu(NewMenu, TotalMade)
 	say("Menu \"%s\" added", NewMenu->Name);
 }
 
-void
-load_menu(FileName)
-	char	*FileName;
+void 
+load_menu (char *FileName)
 {
 	FILE	*fp;
 	Menu	*NewMenu = NULL;
@@ -272,9 +271,8 @@ ShowMenuByWindow(window, flags)
 	return ThisMenu->TotalOptions;
 }
 
-int
-ShowMenu(Name)
-	char	*Name;
+int 
+ShowMenu (char *Name)
 {
 	Menu	*ThisMenu;
 	Window	*window;
@@ -293,9 +291,8 @@ ShowMenu(Name)
 	return ShowMenuByWindow(window, SMF_CALCONLY);
 }
 
-void
-set_menu(Value)
-	char	*Value;
+void 
+set_menu (char *Value)
 {
 	Window	*window;
 	WindowMenu *menu_info;
@@ -341,28 +338,24 @@ enter_menu(key, ptr)
 }
 
 
-void
-menu_previous(args)
-	char	*args;
+void 
+menu_previous (char *args)
 {
 }
 
-void
-menu_submenu(args)
-	char	*args;
+void 
+menu_submenu (char *args)
 {
 }
 
-void
-menu_exit(args)
-	char	*args;
+void 
+menu_exit (char *args)
 {
 	current_screen->inside_menu = -1;
 }
 
-void
-menu_channels(args)
-	char	*args;
+void 
+menu_channels (char *args)
 {
 }
 
@@ -440,9 +433,8 @@ menu_key(ikey)
 		ShowMenuByWindow(window, SMF_CURSONLY);
 }
 
-void
-menu_command(args)
-	char	*args;
+void 
+menu_command (char *args)
 {
 	parse_line((char *) 0, args, empty_string, 0, 0, 0);
 }
--- a/source/names.c
+++ b/source/names.c
@@ -52,6 +52,7 @@
 #include "myvars.h"
 #include "whowas.h"
 #include "trace.h"
+#include "struct.h"
 
 #include <sys/time.h>
 #include <unistd.h>
@@ -76,6 +77,8 @@ extern void UpdateChanLogFName _((ChannelList *));
 extern void ChannelLogReport _((char *, ChannelList *));
 extern void ChannelLogSave _((char *, ChannelList *));
 extern int  RateLimitJoin _((int));
+extern void Trace(long area, char *format, char *arg1, char *arg2, char *arg3, char *arg4, char *arg5, char *arg6, char *arg7, char *arg8, char *arg9, char *arg10);
+extern int IsValidWindow(int server, Window *window);
 
 extern NickList *tabnickcompl;
 /****************************************************************************/
@@ -196,9 +199,8 @@ lookup_channel(channel, server, do_unlink)
 }
 
 /**************************** PATCHED by Flier ******************************/
-void rename_channel(old_channel, new_channel)
-char *old_channel;
-char *new_channel;
+void 
+rename_channel (char *old_channel, char *new_channel)
 {
     ChannelList	*chan;
 
@@ -264,7 +266,7 @@ add_channel(channel, server, connected, copy, key, nowho)
                 new_free(&(new->topiclock));
                 ClearBans(new);
                 new_free(&new);
-                Trace(SZ_TRACE_CHANNEL, "unlink channel %s from server %d", channel, server);
+                Trace(SZ_TRACE_CHANNEL, "unlink channel %s from server %d", (char *)channel, (char *)server, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
             }
             new = whowaschan->channellist;
             new->next = (ChannelList *) 0;
@@ -273,12 +275,12 @@ add_channel(channel, server, connected, copy, key, nowho)
             new_free(&whowaschan);
             if (!IsValidWindow(server, new->window)) {
                 new->window = NULL;
-                Trace(SZ_TRACE_CHANNEL, "invalid window for channel %s, resetting", channel);
+                Trace(SZ_TRACE_CHANNEL, "invalid window for channel %s, resetting", (char *)channel, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
             }
             Trace(SZ_TRACE_CHANNEL, "channel %s found in whowas cache, window %d (%s) %p", channel,
-                  new->window ? new->window->refnum : -1,
-                  new->window ? EMPTY_STR(new->window->name) : "",
-                  new->window);
+                  (char *)(new->window ? new->window->refnum : -1),
+                  (char *)(new->window ? EMPTY_STR(new->window->name) : ""),
+                  (char *)new->window, NULL, NULL, NULL, NULL, NULL, NULL);
         }
         else
 /****************************************************************************/
@@ -302,7 +304,7 @@ add_channel(channel, server, connected, copy, key, nowho)
                 new->chanlogfpath = (char *) 0;
                 new->window = NULL;
                 resetchan = 1;
-                Trace(SZ_TRACE_CHANNEL, "add channel %s to server %d", channel, server);
+                Trace(SZ_TRACE_CHANNEL, "add channel %s to server %d", (char *)channel, (char *)server, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 /****************************************************************************/
 	}
         else
@@ -311,17 +313,17 @@ add_channel(channel, server, connected, copy, key, nowho)
                 if (!(new->nicks)) resetchan = 1;
                 if (!IsValidWindow(server, new->window)) {
                     new->window = NULL;
-                    Trace(SZ_TRACE_CHANNEL, "invalid window for channel %s, resetting", channel);
+                    Trace(SZ_TRACE_CHANNEL, "invalid window for channel %s, resetting", (char *)channel, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                 }
-                Trace(SZ_TRACE_CHANNEL, "channel %s found on server %d, window %d (%s) %p", channel,
-                      server, new->window ? new->window->refnum : -1,
-                      new->window ? EMPTY_STR(new->window->name) : "",
-                      new->window);
+                Trace(SZ_TRACE_CHANNEL, "channel %s found on server %d, window %d (%s) %p", (char *)channel,
+                      (char *)server, (char *)(new->window ? new->window->refnum : -1),
+                      (char *)(new->window ? EMPTY_STR(new->window->name) : ""),
+                      (char *)new->window, NULL, NULL, NULL, NULL, NULL);
                 if ((tmpwin = is_bound(channel, server))) {
                     Trace(SZ_TRACE_CHANNEL, "bound to window %d (%s) %p",
-                          tmpwin ? tmpwin->refnum : -1,
-                          tmpwin ? EMPTY_STR(tmpwin->name) : "",
-                          tmpwin);
+                          (char *)(tmpwin ? tmpwin->refnum : -1),
+                          (char *)(tmpwin ? EMPTY_STR(tmpwin->name) : ""),
+                          (char *)tmpwin, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                     new->window = tmpwin;
                 }
 /****************************************************************************/
@@ -385,21 +387,21 @@ add_channel(channel, server, connected, copy, key, nowho)
                 if (new->window == NULL) {
                     if ((tmpwin = is_bound(channel, server))) {
                         Trace(SZ_TRACE_CHANNEL, "bound to window %d (%s) %p",
-                              tmpwin ? tmpwin->refnum : -1,
-                              tmpwin ? EMPTY_STR(tmpwin->name) : "",
-                              tmpwin);
+                              (char *)(tmpwin ? tmpwin->refnum : -1),
+                              (char *)(tmpwin ? EMPTY_STR(tmpwin->name) : ""),
+                              (char *)tmpwin, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                         new->window = tmpwin;
                     }
                     else {
-                        Trace(SZ_TRACE_CHANNEL, "linked to current window");
+                        Trace(SZ_TRACE_CHANNEL, "linked to current window", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                         new->window = curr_scr_win;
                     }
                 }
                 Trace(SZ_TRACE_WINDOW, "channel %s linked to window %d (%s) (%p)",
                       channel,
-                      new->window ? new->window->refnum : -1,
-                      new->window ? EMPTY_STR(new->window->name) : "",
-                      new->window);
+                      (char *)(new->window ? new->window->refnum : -1),
+                      (char *)(new->window ? EMPTY_STR(new->window->name) : ""),
+                      (char *)new->window, NULL, NULL, NULL, NULL, NULL, NULL);
 /****************************************************************************/
 		clear_channel(new);
 	}
@@ -434,7 +436,7 @@ add_channel(channel, server, connected, copy, key, nowho)
 					set_channel_by_refnum(tmp->refnum, channel);
 					new->window = tmp;
 					update_all_status();
-                                        Trace(SZ_TRACE_WINDOW, "adding channel %s", channel);
+                                        Trace(SZ_TRACE_WINDOW, "adding channel %s", channel, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                                         TraceWindowInfo(2, tmp);
 					return;
 				}
@@ -447,13 +449,13 @@ add_channel(channel, server, connected, copy, key, nowho)
 			set_channel_by_refnum(possible->refnum, channel);
 			new->window = possible;
 			update_all_status();
-                        Trace(SZ_TRACE_WINDOW, "adding channel %s", channel);
+                        Trace(SZ_TRACE_WINDOW, "adding channel %s", channel, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                         TraceWindowInfo(2, possible);
 			return;
 		}
 		set_channel_by_refnum(0, channel);
 		new->window = curr_scr_win;
-                Trace(SZ_TRACE_WINDOW, "adding channel %s to current window", channel);
+                Trace(SZ_TRACE_WINDOW, "adding channel %s to current window", channel, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                 TraceWindowInfo(2, curr_scr_win);
 	}
 	update_all_windows();
@@ -1608,10 +1610,8 @@ char    *servmodes;
 /*
  * get_channel_mode: returns the current mode string for the given channel
  */
-char	*
-get_channel_mode(channel, server)
-	char	*channel;
-	int	server;
+char *
+get_channel_mode (char *channel, int server)
 {
 	ChannelList *tmp;
 
@@ -1661,11 +1661,8 @@ ChannelList *tmpchan;
  * is_channel_mode: returns the logical AND of the given mode with the
  * channels mode.  Useful for testing a channels mode 
  */
-int
-is_channel_mode(channel, mode, server_index)
-	char	*channel;
-	int	mode;
-	int	server_index;
+int 
+is_channel_mode (char *channel, int mode, int server_index)
 {
 	ChannelList *tmp;
 
@@ -1723,10 +1720,8 @@ free_channel(channel)
  * server_list[server].chan_list to be the current_channel, or 0 if the
  * list is empty. 
  */
-void
-remove_channel(channel, server)
-	char	*channel;
-	int	server;
+void 
+remove_channel (char *channel, int server)
 {
 	ChannelList *tmp;
 
@@ -1777,10 +1772,8 @@ remove_channel(channel, server)
 /*
  * purge given channel from memory, for use on numeric 405
  */
-void
-PurgeChannel(channel,server)
-char *channel;
-int  server;
+void 
+PurgeChannel (char *channel, int server)
 {
     ChannelList *tmp;
 
@@ -1822,11 +1815,8 @@ NickList *tmp;
  * the nickname is not on the channel or the channel doesn't exist, nothing
  * happens. 
  */
-void
-remove_from_channel(channel, nick, server)
-	char	*channel;
-	char	*nick;
-	int	server;
+void 
+remove_from_channel (char *channel, char *nick, int server)
 {
 	ChannelList *chan;
 	NickList *tmp;
@@ -1883,11 +1873,8 @@ remove_from_channel(channel, nick, server)
  * rename_nick: in response to a changed nickname, this looks up the given
  * nickname on all you channels and changes it the new_nick 
  */
-void
-rename_nick(old_nick, new_nick, server)
-	char	*old_nick,
-		*new_nick;
-	int	server;
+void 
+rename_nick (char *old_nick, char *new_nick, int server)
 {
 	ChannelList *chan;
 	NickList *tmp;
@@ -1912,7 +1899,7 @@ rename_nick(old_nick, new_nick, server)
 /**************************** PATCHED by Flier ******************************/
                                 remove_nick_from_hash(chan,tmp);
                                 Trace(SZ_TRACE_NICK, "nick rename %s -> %s in %s",
-                                      old_nick, new_nick, chan->channel);
+                                      old_nick, new_nick, chan->channel, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 /****************************************************************************/
 				new_free(&tmp->nick);
 				malloc_strcpy(&tmp->nick, new_nick);
@@ -1937,11 +1924,8 @@ rename_nick(old_nick, new_nick, server)
  * false otherwise.  Also returns false if the given channel is not on the
  * channel list. 
  */
-int
-is_on_channel(channel, server, nick)
-	char	*channel;
-	int	server;
-	char	*nick;
+int 
+is_on_channel (char *channel, int server, char *nick)
 {
 	ChannelList *chan;
 
@@ -1957,10 +1941,8 @@ is_on_channel(channel, server, nick)
 	return 0;
 }
 
-int
-is_chanop(channel, nick)
-	char	*channel;
-	char	*nick;
+int 
+is_chanop (char *channel, char *nick)
 {
 	ChannelList *chan;
 	NickList *Nick;
@@ -1978,11 +1960,8 @@ is_chanop(channel, nick)
 	return 0;
 }
 
-int
-has_voice(channel, nick, server)
-	char	*channel;
-	char	*nick;
-	int	server;
+int 
+has_voice (char *channel, char *nick, int server)
 {
 	ChannelList *chan;
 	NickList *Nick;
@@ -2034,8 +2013,8 @@ show_channel(chan)
 }
 
 /* list_channels: displays your current channel and your channel list */
-void
-list_channels()
+void 
+list_channels (void)
 {
 	ChannelList *tmp;
 	int	server,
@@ -2086,10 +2065,8 @@ list_channels()
 		say("You are not on any channels");
 }
 
-void
-switch_channels(key, ptr)
- 	u_int	key;
-	char *	ptr;
+void 
+switch_channels (u_int key, char *ptr)
 {
 	ChannelList *	tmp;
 	char *	s;
@@ -2135,10 +2112,8 @@ switch_channels(key, ptr)
 	}
 }
 
-void
-change_server_channels(old, new)
-	int	old,
-		new;
+void 
+change_server_channels (int old, int new)
 {
 	ChannelList *tmp;
 
@@ -2154,9 +2129,8 @@ change_server_channels(old, new)
 		server_list[new].chan_list = (ChannelList *) 0;
 }
 
-void
-clear_channel_list(server)
-	int	server;
+void 
+clear_channel_list (int server)
 {
 	ChannelList *tmp,
 		*next;
@@ -2184,9 +2158,8 @@ clear_channel_list(server)
  * clear each channel nickname list and re-JOINs each channel in the 
  * channel_list ..  
  */
-void
-reconnect_all_channels(server)
-	int	server;
+void 
+reconnect_all_channels (int server)
 {
 	ChannelList *tmp = (ChannelList *) 0;
 	char	*mode, *chan;
@@ -2195,7 +2168,7 @@ reconnect_all_channels(server)
 /****************************************************************************/
 
 /**************************** PATCHED by Flier ******************************/
-    Trace(SZ_TRACE_CHANNEL, "reconnecting all channels for server %d", server);
+    Trace(SZ_TRACE_CHANNEL, "reconnecting all channels for server %d", (char*)server, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     TraceChannelInfo(2, server_list[server].chan_list);
 
         /*for (tmp = server_list[server].chan_list; tmp; tmp = tmp->next)*/
@@ -2240,15 +2213,13 @@ reconnect_all_channels(server)
 /****************************************************************************/
 	}
 /**************************** PATCHED by Flier ******************************/
-    Trace(SZ_TRACE_CHANNEL, "reconnect done");
+    Trace(SZ_TRACE_CHANNEL, "reconnect done", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     TraceChannelInfo(2, server_list[server].chan_list);
 /****************************************************************************/
 }
 
-char	*
-what_channel(nick, server)
-	char	*nick;
-	int	server;
+char *
+what_channel (char *nick, int server)
 {
 	ChannelList *tmp;
 
@@ -2265,11 +2236,8 @@ what_channel(nick, server)
 	return (char *) 0;
 }
 
-char	*
-walk_channels(nick, init, server)
-	int	init;
-	char	*nick;
-	int	server;
+char *
+walk_channels (char *nick, int init, int server)
 {
 	static	ChannelList *tmp = (ChannelList *) 0;
 
@@ -2286,10 +2254,8 @@ walk_channels(nick, init, server)
 	return (char *) 0;
 }
 
-int
-get_channel_oper(channel, server)
-	char	*channel;
-	int	server;
+int 
+get_channel_oper (char *channel, int server)
 {
 	ChannelList *chan;
 
@@ -2340,9 +2306,8 @@ create_channel_list(window)
 	return value;
 }
 
-extern void
-channel_server_delete(server)
-	int     server;
+extern void 
+channel_server_delete (int server)
 {
 	ChannelList     *tmp;
 	int	i;
@@ -2353,10 +2318,8 @@ channel_server_delete(server)
 				tmp->server--;
 }
 
-extern	int
-chan_is_connected(channel, server)
-	char *	channel;
-	int	server;
+extern int 
+chan_is_connected (char *channel, int server)
 {
 	ChannelList *	cp = lookup_channel(channel, server, CHAN_NOUNLINK);
 
@@ -2366,9 +2329,8 @@ chan_is_connected(channel, server)
 	return (cp->connected == CHAN_JOINED);
 }
 
-void
-mark_not_connected(server)
-	int	server;
+void 
+mark_not_connected (int server)
 {
 	ChannelList	*tmp;
 
--- a/source/newio.c
+++ b/source/newio.c
@@ -175,8 +175,8 @@ dgets_timeout(sec)
 	return old_timeout;
 }
 
-static	void
-init_io()
+static void 
+init_io (void)
 {
 	static	int	first = 1;
 
@@ -196,12 +196,8 @@ init_io()
  * pointers.  Returns the number of character read in.  Returns 0 on EOF and
  * -1 on a timeout (see dgets_timeout()) 
  */
-int
-dgets(str, len, des, specials)
-	char	*str;
-	int	len;
-	int	des;
-	char	*specials;
+int 
+dgets (char *str, int len, int des, char *specials)
 {
 	char	*ptr, ch;
  	size_t	cnt = 0;
@@ -534,9 +530,8 @@ new_select(rd, wd, time_out)
 }
 
 /* new_close: works just like close */
-void
-new_close(des)
-	int	des;
+void 
+new_close (int des)
 {
 	if (des < 0)
 		return;
@@ -549,9 +544,8 @@ new_close(des)
 }
 
 /* set's socket options */
-extern	void
-set_socket_options(s)
-	int	s;
+extern void 
+set_socket_options (int s)
 {
 #if defined(ESIX)
 	mark_socket(s);
--- a/source/notice.c
+++ b/source/notice.c
@@ -80,10 +80,8 @@ static	void	parse_server_notice _((char *, char *, char *));
  * and send that info to parse_note() 
  */
 #ifndef LITE
-static	void
-parse_note(server, line)
-	char	*server;
-	char	*line;
+static void 
+parse_note (char *server, char *line)
 {
 	char	*date,
 		*nick,
@@ -125,11 +123,8 @@ parse_note(server, line)
 }
 #endif
 
-static	void
-parse_server_notice(from, to, line)
-	char	*from,
- 		*to,
-		*line;
+static void 
+parse_server_notice (char *from, char *to, char *line)
 {
 	char	server[81],
 		version[21];
@@ -244,9 +239,7 @@ parse_server_notice(from, to, line)
 }
 
 void 
-parse_notice(from, Args)
-	char 	*from;
-	char 	**Args;
+parse_notice (char *from, char **Args)
 {
 	int	level,
 		type;
@@ -392,8 +385,8 @@ out:
 /*
  * load the initial .ircrc
  */
-void
-load_ircrc()
+void 
+load_ircrc (void)
 {
 	static	int done = 0;
 
@@ -415,8 +408,8 @@ load_ircrc()
 /*
  * load the initial .ircquick
  */
-void
-load_ircquick()
+void 
+load_ircquick (void)
 {
 	static	int done = 0;
 
@@ -439,9 +432,8 @@ load_ircquick()
  * beyond.  I guess its handled rather badly at the moment....
  * added by phone, late 1992.
  */
-void
-got_initial_version(line)
-	char	*line;
+void 
+got_initial_version (char *line)
 {
  	char	server[256],
 		version[256];
@@ -560,8 +552,8 @@ got_initial_version(line)
 		get_server_port(parsing_server_index));
 }
 
-void
-maybe_load_ircrc()
+void 
+maybe_load_ircrc (void)
 {
 	if (never_connected)
 	{
--- a/source/notify.c
+++ b/source/notify.c
@@ -71,8 +71,7 @@ NotifyList	*notify_list = (NotifyList *) 0;
 
 /* Rewritten, -lynx */
 char *
-get_notify_list(which)
-	int which;
+get_notify_list (int which)
 {
 	char	*list = (char *) 0;
 	NotifyList	*tmp;
@@ -94,9 +93,8 @@ get_notify_list(which)
 }
 
 /* Rewritten, -lynx */
-void
-show_notify_list(all)
-	int	all;
+void 
+show_notify_list (int all)
 {
 /**************************** Patched by Flier ******************************/
 	/*char	*list;
@@ -168,11 +166,8 @@ show_notify_list(all)
 
 /* notify: the NOTIFY command.  Does the whole ball-o-wax */
 /*ARGSUSED*/
-void
-notify(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+notify (char *command, char *args, char *subargs)
 {
 	char	*nick,
 		*list = (char *) 0,
@@ -330,8 +325,8 @@ notify(command, args, subargs)
  *
  * Thank you Michael... leaving me bugs to fix :) Well I fixed them!
  */
-void
-do_notify()
+void 
+do_notify (void)
 {
 	static	int	location = 0;
 	int	count,
@@ -380,11 +375,8 @@ do_notify()
  * ideally, a message_from((char *) 0, LOG_CURRENT) should be the what is the
  * current window level.
  */
-void
-notify_mark(nick, flag, doit)
-	char	*nick;
-	int	flag;
-	int	doit;
+void 
+notify_mark (char *nick, int flag, int doit)
 {
 	NotifyList	*tmp;
 	char	*s = get_string_var(NOTIFY_HANDLER_VAR);
@@ -489,9 +481,8 @@ save_notify(fp)
 /* I hate broken compilers -mrg */
 static	char	*vals[] = { "NOISY", "QUIET", "OLD", (char *) 0 };
 
-void
-set_notify_handler(value)
-	char	*value;
+void 
+set_notify_handler (char *value)
 {
  	size_t	len;
 	int	i;
--- a/source/numbers.c
+++ b/source/numbers.c
@@ -125,6 +125,7 @@ static	void	not_valid_channel _((char *, char **));
 static	void	cannot_join_channel _((char *, char **));
 static	void	version _((char *, char **));
 static	void	invite _((char *, char **));
+extern int  DecryptMessage _((char *, char *));
 
 static	int	already_doing_reset_nickname = 0;
 /**************************** Patched by Flier ******************************/
@@ -136,8 +137,8 @@ char *OldNick = NULL;
  * numeric_banner: This returns in a static string of either "xxx" where
  * xxx is the current numeric, or "***" if SHOW_NUMBERS is OFF 
  */
-char	*
-numeric_banner()
+char *
+numeric_banner (void)
 {
 /**************************** PATCHED by Flier ******************************/
         /*static	char	thing[4];*/
@@ -167,10 +168,8 @@ numeric_banner()
  * possible formats that the irc server spits out.  you'd think someone would
  * simplify this 
  */
-void
-display_msg(from, ArgList)
-	char	*from,
-		**ArgList;
+void 
+display_msg (char *from, char **ArgList)
 {
 	char	*ptr;
 	char	*rest;
@@ -235,10 +234,8 @@ display_msg(from, ArgList)
 
 /**************************** PATCHED by Flier ******************************/
 /* display_luser: handles the /Luser formatting. By Zakath */
-void display_luser(comm, from, ArgList)
-int  comm;
-char *from;
-char **ArgList;
+void 
+display_luser (int comm, char *from, char **ArgList)
 {
     int  invnum;
     int  opernum;
@@ -489,10 +486,8 @@ char **ArgList;
  * password_sendline: called by send_line() in get_password() to handle
  * hitting of the return key, etc 
  */
-static	void
-password_sendline(data, line)
-	char	*data;
-	char	*line;
+static void 
+password_sendline (char *data, char *line)
 {
 	int	new_server;
 
@@ -509,8 +504,8 @@ password_sendline(data, line)
  * then reconnection is attempted with that password.  but, the reality of
  * the situation is that no one really uses user passwords.  ah well 
  */
-static	void
-get_password()
+static void 
+get_password (void)
 {
 	char	server_num[8];
 
@@ -528,11 +523,8 @@ get_password()
 /*ARGSUSED*/
 /**************************** PATCHED by Flier ******************************/
 /*static	void*/
-void
-/****************************************************************************/
-nickname_sendline(data, nick)
-	char	*data;
-	char	*nick;
+void 
+nickname_sendline (char *data, char *nick)
 {
 	int	new_server, server;
 
@@ -587,11 +579,8 @@ nickname_sendline(data, nick)
  */
 /**************************** PATCHED by Flier ******************************/
 /*static	void*/
-void
-/****************************************************************************/
-reset_nickname(from, ArgList)
-	char	*from,
-		**ArgList;
+void 
+reset_nickname (char *from, char **ArgList)
 {
 	char	server_num[10];
 	char	*s;
@@ -631,10 +620,8 @@ reset_nickname(from, ArgList)
 }
 
 /*ARGSUSED*/
-static	void
-channel_topic(from, ArgList)
-	char	*from,
-		**ArgList;
+static void 
+channel_topic (char *from, char **ArgList)
 {
 	char	*topic, *channel;
 /**************************** Patched by Flier ******************************/
@@ -686,7 +673,8 @@ channel_topic(from, ArgList)
 }
 
 /**************************** Patched by Flier ******************************/
-int DisplayNickInfo() {
+int 
+DisplayNickInfo (void) {
     int ret=1;
 
     if (OrigNickChange && OrigNickSent && OrigNickQuiet) ret=0;
@@ -694,10 +682,8 @@ int DisplayNickInfo() {
 }
 /****************************************************************************/
 
-static	void
-nickname_in_use(from, ArgList)
-	char	*from,
-		**ArgList;
+static void 
+nickname_in_use (char *from, char **ArgList)
 {
 	PasteArgs(ArgList, 0);
  	if (is_server_connected(parsing_server_index)) {
@@ -726,10 +712,8 @@ nickname_in_use(from, ArgList)
 	reset_nickname(from, ArgList);
 }
 
-static	void
-not_valid_channel(from, ArgList)
-	char	*from,
-		**ArgList;
+static void 
+not_valid_channel (char *from, char **ArgList)
 {
 	char	*channel;
 	char	*s;
@@ -759,10 +743,8 @@ not_valid_channel(from, ArgList)
 #define ERR_BADCHANNELKEY    475
 #define ERR_BADCHANMASK      476
 */
-static	void
-cannot_join_channel(from, ArgList)
-	char	*from,	
-		**ArgList;
+static void 
+cannot_join_channel (char *from, char **ArgList)
 {
 	char	*chan;
 	char	buffer[BIG_BUFFER_SIZE+1];
@@ -910,10 +892,8 @@ cannot_join_channel(from, ArgList)
 
 
 /*ARGSUSED*/
-static	void
-version(from, ArgList)
-	char	*from,
-		**ArgList;
+static void 
+version (char *from, char **ArgList)
 {
 	if (ArgList[2])
 	{
@@ -1012,10 +992,8 @@ char **ArgList;
 /****************************************************************************/
 
 /*ARGSUSED*/
-static	void
-invite(from, ArgList)
-	char	*from,
-		**ArgList;
+static void 
+invite (char *from, char **ArgList)
 {
 	char	*who,
 		*channel;
@@ -1040,11 +1018,8 @@ invite(from, ArgList)
  * responses from the server.  I wasn't real careful to be sure I got them
  * all, but the default case should handle any I missed (sorry) 
  */
-void
-numbered_command(from, comm, ArgList)
-	char	*from;
-	int	comm;
-	char	**ArgList;
+void 
+numbered_command (char *from, int comm, char **ArgList)
 {
 	char	*user;
 	char	none_of_these = 0;
--- a/source/operv.c
+++ b/source/operv.c
@@ -41,9 +41,8 @@ static  int  OldWord;   /* holds number  for previous word, if NewNotice is 0 */
 static  int  OVTS=1;    /* 1 if time stamping is enabled */
 static  char *OldPtr;   /* holds pointer for previous word, if NewNotice is 0 */
 
-void CreateMode(tmpbuf,sizeofbuf)
-char *tmpbuf;
-int  sizeofbuf;
+void 
+CreateMode (char *tmpbuf, int sizeofbuf)
 {
     /* we need to send aditional usermodes (+swfuckrn), for ircd 2.9/2.10 only send +w */
     if (get_server_version(from_server)==Server2_11)
@@ -51,10 +50,8 @@ int  sizeofbuf;
     else strmcpy(tmpbuf,"swfuckrn",sizeofbuf);
 }
 
-void OperVision(command,args,subargs)
-char *command;
-char *args;
-char *subargs;
+void 
+OperVision (char *command, char *args, char *subargs)
 {
     int incurwin=0;
     int sendmodes=1;
@@ -126,8 +123,8 @@ char *subargs;
 /* Takes (u@h), removes (), colorizes, returns u@h */
 /* Also works with [u@h]   -Flier */
 /* Also works with n!u@h   -Pier  */
-char *OVuh(word)
-char *word;
+char *
+OVuh (char *word)
 {
     int i;
     int sht = 1;
@@ -167,8 +164,8 @@ char *word;
 
 /* Returns domain, minus host and top */
 /* fixed by Flier to work on hostname.domain (like irc.net) */
-char *OVsvdmn(string)
-char *string;
+char *
+OVsvdmn (char *string)
 {
     int  i, l;
     char *c;
@@ -190,10 +187,8 @@ char *string;
 
 /* Gets word(s) from string. Similar to $word() in IrcII */
 /* Added caching   -Flier */
-char *OVgetword(a,b,string)
-int a;
-int b;
-char *string;
+char *
+OVgetword (int a, int b, char *string)
 {
     int  i=1;
     static char tmpbuf1[mybufsize/2];
@@ -248,8 +243,8 @@ char *string;
 }
 
 /* Gets nick form nick!user@host */
-char *OVgetnick(nuh)
-char *nuh;
+char *
+OVgetnick (char *nuh)
 {
     char *tmpstr;
     static char tmpbuf[mybufsize/4];
@@ -270,9 +265,8 @@ void OVnobrackets(char *inbuf, char *outbuf, int outsize)
         outbuf[strlen(outbuf) - 1] = '\0';
 }
 
-void OVformat(line,from)
-char *line;
-char *from;
+void 
+OVformat (char *line, char *from)
 {
     char *tmp;
     char *tmpline;
@@ -393,7 +387,7 @@ char *from;
             strcpy(word3,OVgetword(0,5,tmpline));  /* user */
 	    snprintf(word2,sizeof(word2),"(%s@%s)",word3,
                     OVgetword(0,7,tmpline));       /* host */
-            strcpy(word3,OVgetword(9,0));
+            strcpy(word3,OVgetword(9,0,NULL));
         }
         else {
 	    strcpy(word2,OVgetword(0,4,tmpline));  /* user@host */
@@ -1074,7 +1068,7 @@ char *from;
         if ((tmp=index(word1,'!')) && index(word1,'@')) {
             *tmp++='\0';
             snprintf(word2,sizeof(word2),"(%s)",tmp);
-            strcpy(word3,OVgetword(0,3));
+            strcpy(word3,OVgetword(0,3,NULL));
         }
         else {
             strcpy(word1,OVgetword(0,5,tmpline));  /* Nick */
--- a/source/output.c
+++ b/source/output.c
@@ -81,10 +81,8 @@ extern char *TimeStamp _((int));
  * swoops into effect 
  */
 /*ARGSUSED*/
-void
-refresh_screen(key, ptr)
- 	u_int	key;
-	char *	ptr;
+void 
+refresh_screen (u_int key, char *ptr)
 {
 	term_clear_screen();
 	if (term_resize())
@@ -96,8 +94,8 @@ refresh_screen(key, ptr)
 }
 
 /* init_windows:  */
-void
-init_screen()
+void 
+init_screen (void)
 {
 	new_window();
 	term_init();
@@ -110,9 +108,8 @@ init_screen()
 }
 
 /* put_file: uses put_it() to display the contents of a file to the display */
-void
-put_file(filename)
-	char	*filename;
+void 
+put_file (char *filename)
 {
 	FILE	*fp;
 	char	line[1024];		/* too big?  too small?  who cares? */
--- a/source/parse.c
+++ b/source/parse.c
@@ -108,6 +108,8 @@ extern char *OpenCreateFile _((char *, int));
 extern void e_nick _((char *, char *, char *));
 extern void e_channel _((char *, char *, char *));
 extern void timercmd _((char *, char *, char *));
+extern void Trace(long area, char *format, char *arg1, char *arg2, char *arg3, char *arg4, char *arg5, char *arg6, char *arg7, char *arg8, char *arg9, char *arg10);
+extern int  GrabURL _((char *, char *, size_t, char *, char *, char *, int));
 
 #if defined(CELE)
 extern struct timeval PingSent;
@@ -177,9 +179,8 @@ static	void	p_part _((char *, char **));
  * begins with MULTI_CHANNEL and has no '*', or STRING_CHANNEL, then its a
  * channel 
  */
-int
-is_channel(to)
- 	char	*to;
+int 
+is_channel (char *to)
 {
 	int	version;
 
@@ -194,10 +195,8 @@ is_channel(to)
 }
 
 
-char	*
-PasteArgs(Args, StartPoint)
-	char	**Args;
-	int	StartPoint;
+char *
+PasteArgs (char **Args, int StartPoint)
 {
 	int	i;
 
@@ -215,11 +214,8 @@ PasteArgs(Args, StartPoint)
  * setting FromUserHost if it should be, and returns all the arguements
  * that are there.   Re-written by phone, dec 1992.
  */
-static	void
-BreakArgs(Input, Sender, OutPut)
-	char	*Input;
-	char	**Sender;
-	char	**OutPut;
+static void 
+BreakArgs (char *Input, char **Sender, char **OutPut)
 {
 	char	*s = Input,
 		*t;
@@ -275,9 +271,8 @@ BreakArgs(Input, Sender, OutPut)
 }
 
 /* beep_em: Not hard to figure this one out */
-void
-beep_em(beeps)
-	int	beeps;
+void 
+beep_em (int beeps)
 {
 	int	cnt,
 		i;
@@ -287,10 +282,8 @@ beep_em(beeps)
 }
 
 /* in response to a TOPIC message from the server */
-static	void
-p_topic(from, ArgList)
-	char	*from,
-		**ArgList;
+static void 
+p_topic (char *from, char **ArgList)
 {
 	int	flag;
 /**************************** PATCHED by Flier ******************************/
@@ -384,18 +377,15 @@ p_topic(from, ArgList)
  	restore_message_from();
 }
 
-static	void
-p_linreply(ArgList)
-	char	**ArgList;
+static void 
+p_linreply (char **ArgList)
 {
 	PasteArgs(ArgList, 0);
 	say("%s", ArgList[0]);
 }
 
-static	void
-p_wall(from, ArgList)
-	char	*from,
-		**ArgList;
+static void 
+p_wall (char *from, char **ArgList)
 {
 	int	flag,
 		level;
@@ -436,10 +426,8 @@ p_wall(from, ArgList)
  	restore_message_from();
 }
 
-static	void
-p_wallops(from, ArgList)
-	char	*from,
-		**ArgList;
+static void 
+p_wallops (char *from, char **ArgList)
 {
 	int	flag, level;
 	char	*line;
@@ -507,10 +495,8 @@ p_wallops(from, ArgList)
 }
 
 /*ARGSUSED*/
-void
-whoreply(from, ArgList)
-	char	**ArgList,
-		*from;
+void 
+whoreply (char *from, char **ArgList)
 {
 	static	char	format[40];
 	static	int	last_width = -1;
@@ -672,10 +658,8 @@ whoreply(from, ArgList)
 /****************************************************************************/
 }
 
-static	void
-p_privmsg(from, Args)
-	char	*from,
-		**Args;
+static void 
+p_privmsg (char *from, char **Args)
 {
 	int	level,
 		flag,
@@ -910,10 +894,8 @@ out:
 }
 
 #if 0
-static	void
-p_msgcmd(from, ArgList)
-	char	*from,
-		**ArgList;
+static void 
+p_msgcmd (char *from, char **ArgList)
 {
 	char	*high,
 		*channel,
@@ -972,10 +954,8 @@ p_msgcmd(from, ArgList)
 #endif
 
 /*ARGSUSED*/
-static	void
-p_quit(from, ArgList)
-	char	*from,
-		**ArgList;
+static void 
+p_quit (char *from, char **ArgList)
 {
 	int	one_prints = 0;
 	char	*chan;
@@ -1125,10 +1105,8 @@ done:
 }
 
 /*ARGSUSED*/
-static	void
-p_pong(from, ArgList)
-	char	*from,
-		**ArgList;
+static void 
+p_pong (char *from, char **ArgList)
 {
 	int	flag;
 /**************************** PATCHED by Flier ******************************/
@@ -1206,10 +1184,8 @@ p_pong(from, ArgList)
 }
 
 /*ARGSUSED*/
-static	void
-p_error(from, ArgList)
-	char	*from,
-		**ArgList;
+static void 
+p_error (char *from, char **ArgList)
 {
 	PasteArgs(ArgList, 0);
 	if (!ArgList[0])
@@ -1217,10 +1193,8 @@ p_error(from, ArgList)
 	say("%s", ArgList[0]);
 }
 
-static	void
-p_channel(from, ArgList)
-	char	*from;
-	char	**ArgList;
+static void 
+p_channel (char *from, char **ArgList)
 {
 	int	join;
 	char	*channel;
@@ -1413,10 +1387,8 @@ p_channel(from, ArgList)
         }
 }
 
-static	void
-p_invite(from, ArgList)
-	char	*from,
-		**ArgList;
+static void 
+p_invite (char *from, char **ArgList)
 {
 	char	*high;
 	int	flag;
@@ -1467,10 +1439,8 @@ p_invite(from, ArgList)
 	}
 }
 
-static	void
-p_server_kill(from, ArgList)
-	char	*from,
-		**ArgList;
+static void 
+p_server_kill (char *from, char **ArgList)
 {
 	/*
 	 * this is so bogus checking for a server name having a '.'
@@ -1495,18 +1465,15 @@ p_server_kill(from, ArgList)
 		say("Use /SERVER to reconnect to a server");
 }
 
-static	void
-p_ping(ArgList)
-	char	**ArgList;
+static void 
+p_ping (char **ArgList)
 {
 	PasteArgs(ArgList, 0);
 	send_to_server("PONG :%s", ArgList[0]);
 }
 
-static	void
-p_nick(from, ArgList)
-	char	*from,
-		**ArgList;
+static void 
+p_nick (char *from, char **ArgList)
 {
 	int	one_prints = 0,
 		its_me = 0;
@@ -1521,10 +1488,10 @@ p_nick(from, ArgList)
 	line = ArgList[0];
 /**************************** Patched by Flier ******************************/
 	/*if (my_stricmp(from, get_server_nickname(parsing_server_index)) == 0) {*/
-        Trace(SZ_TRACE_NICK, "nick change %s -> %s", from, line);
-        Trace(SZ_TRACE_NICK, "SentNick %d   OldNick %s  my nick %s", SentNick,
+        Trace(SZ_TRACE_NICK, "nick change %s -> %s", from, line, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
+        Trace(SZ_TRACE_NICK, "SentNick %d   OldNick %s  my nick %s", (char *)SentNick,
               OldNick ? OldNick : empty_string,
-              get_server_nickname(parsing_server_index));
+              get_server_nickname(parsing_server_index),NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 	if ((SentNick && !my_stricmp(from, OldNick)) ||
             !my_stricmp(from, get_server_nickname(parsing_server_index))) {
 /****************************************************************************/
@@ -1532,7 +1499,7 @@ p_nick(from, ArgList)
  			malloc_strcpy(&nickname, line);
 /**************************** Patched by Flier ******************************/
                 Trace(SZ_TRACE_NICK, "nick set server nickname for server %d to %s",
-                      parsing_server_index, line);
+                      (char *)parsing_server_index, line, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 /****************************************************************************/
 		set_server_nickname(parsing_server_index, line);
 		its_me = 1;
@@ -1633,10 +1600,8 @@ p_nick(from, ArgList)
  	restore_message_from();
 }
 
-static	void
-p_mode(from, ArgList)
-	char	*from,
-		**ArgList;
+static void 
+p_mode (char *from, char **ArgList)
 {
 	char	*channel;
 	char	*line;
@@ -1692,10 +1657,8 @@ p_mode(from, ArgList)
  	restore_message_from();
 }
 
-static	void
-p_kick(from, ArgList)
-	char	*from,
-		**ArgList;
+static void 
+p_kick (char *from, char **ArgList)
 {
 	char	*channel,
 		*who,
@@ -1831,10 +1794,8 @@ p_kick(from, ArgList)
 	}
 }
 
-static	void
-p_part(from, ArgList)
-	char	*from,
-		**ArgList;
+static void 
+p_part (char *from, char **ArgList)
 {
 	char	*channel;
 	char	*comment;
@@ -1917,16 +1878,14 @@ p_part(from, ArgList)
  * parse_server: parses messages from the server, doing what should be done
  * with them 
  */
-void
-parse_server(line)
-	char	*line;
+void 
+parse_server (char *line)
 {
 	server_list[parsing_server_index].parse_server(line);
 }
 
-void
-irc2_parse_server(line)
-	char	*line;
+void 
+irc2_parse_server (char *line)
 {
 	char	*from,
 		*comm,
@@ -1946,7 +1905,7 @@ irc2_parse_server(line)
 		*end-- = '\0';
 
 /**************************** Patched by Flier ******************************/
-        Trace(SZ_TRACE_IO, "<-- %d: %s", parsing_server_index, line);
+        Trace(SZ_TRACE_IO, "<-- %d: %s", (char *)parsing_server_index, line, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 /****************************************************************************/
 	if (*line == ':')
 	{
--- a/source/queue.c
+++ b/source/queue.c
@@ -73,11 +73,8 @@ static	void	display_all_queues _((Queue *));
 static	void	print_queue _((Queue *));
 static	int	num_entries _((Queue *));
 
-extern	void 
-queuecmd(cmd, args, subargs)
-	char	*cmd,
-		*args,
-		*subargs;
+extern void 
+queuecmd (char *cmd, char *args, char *subargs)
 {
 	Queue	*tmp;
 	char	*arg = (char *) 0,
@@ -193,10 +190,8 @@ queuecmd(cmd, args, subargs)
  * returns the queue BEFORE the queue we are looking for
  * returns the last queue if no match
  */
-static	Queue	*
-lookup_queue(queue, what)
-	Queue	*queue;
-	char	*what;
+static Queue *
+lookup_queue (Queue *queue, char *what)
 {
 	Queue	*tmp = queue;
 
@@ -216,9 +211,8 @@ lookup_queue(queue, what)
 }
 
 /* returns the last CmdList in a queue, useful for appending commands */
-static	CmdList	*
-walk_commands(queue)
-	Queue 	*queue;
+static CmdList *
+walk_commands (Queue *queue)
 {
 	CmdList	*ctmp;
 	
@@ -237,10 +231,8 @@ walk_commands(queue)
 
 /*----------------------------------------------------------------*/
 /* Make a new queue, link it in, and return it. */
-static	Queue	*
-make_new_queue(afterqueue, name)
-	Queue	*afterqueue;
-	char	*name;
+static Queue *
+make_new_queue (Queue *afterqueue, char *name)
 {
 	Queue	*tmp;
 
@@ -258,11 +250,8 @@ make_new_queue(afterqueue, name)
 	
 /* add a command to a queue, at the end of the list */
 /* expands the whole thing once and stores it */
-static	int
-add_commands_to_queue(queue, what, subargs)
-	Queue	*queue;
-	char	*what;
-	char	*subargs;
+static int 
+add_commands_to_queue (Queue *queue, char *what, char *subargs)
 {
 	CmdList *ctmp = walk_commands(queue);
 	char	*list = (char *) 0,
@@ -289,10 +278,8 @@ add_commands_to_queue(queue, what, subargs)
 
 
 /* remove the Xth command from the queue */
-static	int
-delete_commands_from_queue(queue, which)
-	Queue	*queue;
-	int	which;
+static int 
+delete_commands_from_queue (Queue *queue, int which)
 {
 	CmdList *ctmp = queue->first;
 	CmdList *blah;
@@ -323,9 +310,8 @@ delete_commands_from_queue(queue, which)
 
 /*-------------------------------------------------------------------*/
 /* flush a queue, deallocate the memory, and return the next in line */
-static	Queue	*
-remove_a_queue(queue)
-	Queue	*queue;
+static Queue *
+remove_a_queue (Queue *queue)
 {
 	Queue *tmp;
 
@@ -336,9 +322,8 @@ remove_a_queue(queue)
 }
 
 /* walk through a queue, deallocating the entries */
-static	void
-flush_queue(queue)
-	Queue	*queue;
+static void 
+flush_queue (Queue *queue)
 {
 	CmdList	*tmp,
 		*tmp2;
@@ -359,10 +344,8 @@ flush_queue(queue)
 /*------------------------------------------------------------------------*/
 /* run the queue, and if noflush, then return the queue, else return the
    next queue */
-static	Queue	*
-do_queue(queue, noflush)
-	Queue	*queue;
-	int	noflush;
+static Queue *
+do_queue (Queue *queue, int noflush)
 {
 	CmdList	*tmp;
 	
@@ -384,9 +367,8 @@ do_queue(queue, noflush)
 
 /* ---------------------------------------------------------------------- */
 /* output the contents of all the queues to the screen */
-static	void
-display_all_queues(queue)
-	Queue	*queue;
+static void 
+display_all_queues (Queue *queue)
 {
 	Queue *tmp;
 
@@ -406,9 +388,8 @@ display_all_queues(queue)
 }
 
 /* output the contents of a queue to the screen */
-static	void
-print_queue(queue)
-	Queue	*queue;
+static void 
+print_queue (Queue *queue)
 {
 	CmdList *tmp;
 	int 	x = 0;
@@ -424,9 +405,8 @@ print_queue(queue)
 }
 
 /* return the number of entries in a queue */
-static	int
-num_entries(queue)
-	Queue	*queue;
+static int 
+num_entries (Queue *queue)
 {
 	int x = 1;
 	CmdList *tmp;
--- a/source/reg.c
+++ b/source/reg.c
@@ -165,19 +165,16 @@ _wild_match(mask, string)
 }
 
 #if 0
-int
-match(pattern, string)
-	char	*pattern, *string;
+int 
+match (char *pattern, char *string)
 {
 /* -1 on false >= 0 on true */
   return ((_wild_match(pattern, string)>=0)?1:0);
 }
 #endif
 
-int
-wild_match(pattern, str)
-	char	*pattern,
-		*str;
+int 
+wild_match (char *pattern, char *str)
 {
 	/* assuming a -1 return of false */
 	return _wild_match((u_char *) pattern, (u_char *) str) + 1;
--- a/source/scandir.c
+++ b/source/scandir.c
@@ -59,16 +59,8 @@ static char sccsid[] = "@(#)scandir.c	5.3 (Berkeley) 6/18/88";
 */
 #include "scandir.h"
 
-int
-scandir(Name, dirlist, Selector, Sorter)
-#if defined(__linux__) || defined(__sgi)
-    const char            *Name;
-#else
-    char		  *Name;
-#endif
-    struct dirent		***dirlist;
-    int			 (*Selector)();
-    int			 (*Sorter)();
+int 
+scandir (char *Name, struct dirent ***dirlist, int (*Selector)(void), int (*Sorter)(void))
 {
     struct dirent	 **names;
     static  struct dirent	  *E;
@@ -129,8 +121,8 @@ scandir(Name, dirlist, Selector, Sorter)
  * Alphabetic order comparison routine for those who want it. 
  */
 #ifndef alphasort
-int alphasort(d1, d2)
-struct dirent **d1, **d2;
+int 
+alphasort (struct dirent **d1, struct dirent **d2)
 {
     return(strcmp((*d1)->d_name, (*d2)->d_name));
 }
@@ -141,14 +133,8 @@ struct dirent **d1, **d2;
 /* End of Mike Sandrof's change */
 #include "scandir.h"
 
-int scandir(dirname, namelist, select, dcomp)
-#ifdef NeXT
-const char *dirname;
-#else
-char *dirname;
-#endif /* NeXT */
-struct direct *(*namelist[]);
-int (*select) (), (*dcomp) ();
+int 
+scandir (char *dirname, struct direct *(*namelist[]), int (*select)(void), int (*dcomp)(void))
 {
     register struct direct *d,
           *p,
@@ -220,9 +206,8 @@ int (*select) (), (*dcomp) ();
 /*
  * Alphabetic order comparison routine for those who want it. 
  */
-int alphasort(d1, d2)
-struct direct **d1,
-     **d2;
+int 
+alphasort (struct direct **d1, struct direct **d2)
 {
     return (strcmp((*d1)->d_name, (*d2)->d_name));
 }
--- a/source/screen.c
+++ b/source/screen.c
@@ -109,6 +109,7 @@ void redraw_window _((Window *, int, int));
 /****************************************************************************/
 static	char	*next_line_back _((Window *));
 static	int	lastlog_lines _((Window *));
+extern void Trace(long area, char *format, char *arg1, char *arg2, char *arg3, char *arg4, char *arg5, char *arg6, char *arg7, char *arg8, char *arg9, char *arg10);
 
 /**************************** PATCHED by Flier ******************************/
 #if 0
@@ -129,9 +130,8 @@ void debugit(char *format,...) {
 #endif
 
 #ifdef SZNCURSES
-void my_addstr(str,len)
-char *str;
-int len;
+void 
+my_addstr (char *str, int len)
 {
     if (len) {
 #ifdef WANTANSI
@@ -296,10 +296,8 @@ set_current_screen(screen)
  * commands and output from that server (including output generated by IRCII)
  * to who.  Setting who to null disables this 
  */
-void
-window_redirect(who, server)
-	char	*who;
-	int	server;
+void 
+window_redirect (char *who, int server)
 {
 	char	buf[BIG_BUFFER_SIZE+1];
 
@@ -312,9 +310,8 @@ window_redirect(who, server)
 	current_screen->redirect_server = server;
 }
 
-int
-check_screen_redirect(nick)
-	char	*nick;
+int 
+check_screen_redirect (char *nick)
 {
 	Screen	*screen,
 		*tmp_screen;
@@ -479,9 +476,8 @@ scroll_window(window)
 }
 
 /* display_highlight: turns off and on the display highlight.  */
-static	char
-display_highlight(flag)
-	int	flag;
+static char 
+display_highlight (int flag)
 {
 	static	int	highlight = OFF;
 
@@ -520,9 +516,8 @@ display_highlight(flag)
 }
 
 /* display_bold: turns off and on the display bolding.  */
-static	char
-display_bold(flag)
-	int	flag;
+static char 
+display_bold (int flag)
 {
 	static	int	bold = OFF;
 
@@ -734,10 +729,8 @@ display_nonshift(void)
  * If the input is longer than line may be, it cuts it.
  * Return value: Number of columns printed
  */
-int
-output_line(str, startpos)
-	char	*str;
-	int	startpos;
+int 
+output_line (char *str, int startpos)
 {
 	static	int	high = OFF,
 			bold = OFF;
@@ -1052,8 +1045,8 @@ rite(window, str, show, redraw, backscroll, logged)
  * physical position of the cursor, but it will force rite() to reset the
  * cursor upon its next call 
  */
-void
-cursor_not_in_display()
+void 
+cursor_not_in_display (void)
 {
 	Debug((3, "cursor_not_in_display: screen %d cursor_window set to NULL", current_screen->screennum));
 	current_screen->cursor_window = NULL;
@@ -1066,8 +1059,8 @@ cursor_not_in_display()
  * cursor is in a window, thus letting the input updating routines move the
  * cursor down to the input line.  Dumb dumb dumb 
  */
-void
-cursor_in_display()
+void 
+cursor_in_display (void)
 {
 	Debug((3, "cursor_in_display: screen %d cursor_window set to window %d (%d)", current_screen->screennum, curr_scr_win->refnum, curr_scr_win->screen->screennum));
 	current_screen->cursor_window = curr_scr_win;
@@ -1077,8 +1070,8 @@ cursor_in_display()
  * is_cursor_in_display: returns true if the cursor is in one of the windows
  * (cursor_window is not null), false otherwise 
  */
-int
-is_cursor_in_display()
+int 
+is_cursor_in_display (void)
 {
 	if  (current_screen->cursor_window)
 		return (1);
@@ -1220,8 +1213,8 @@ resize_display(window)
  * positions of all the windows.  Currently, all windows are rebalanced and
  * window size proportionality is lost 
  */
-void
-recalculate_windows()
+void 
+recalculate_windows (void)
 {
 	int	base_size,
 	size,
@@ -1288,9 +1281,8 @@ clear_window(window)
 }
 
 /* clear_all_windows: This clears all *visible* windows */
-void
-clear_all_windows(unhold)
-	int	unhold;
+void 
+clear_all_windows (int unhold)
 {
 	Window	*tmp;
 
@@ -1376,8 +1368,8 @@ redraw_window(window, just_one, backscroll)
  * current positions in the window list.  This doesn't change any sizes of
  * the windows 
  */
-void
-recalculate_window_positions()
+void 
+recalculate_window_positions (void)
 {
 	Window	*tmp;
 	int	top;
@@ -1398,8 +1390,8 @@ recalculate_window_positions()
  * portion of the screen.  All windows and status lines are draws.  This does
  * nothing for the input line of the screen.  Only visible windows are drawn 
  */
-void
-redraw_all_windows()
+void 
+redraw_all_windows (void)
 {
 	Window	*tmp;
 
@@ -1411,9 +1403,8 @@ redraw_all_windows()
 
 /* strlen() with internal format codes stripped */
 /* Return value: number of columns this string takes */
-int
-my_strlen_i(c)
-	char *c;
+int 
+my_strlen_i (char *c)
 {
 	int result = 0;
 	
@@ -1445,9 +1436,8 @@ my_strlen_i(c)
 
 /* strlen() with colour codes stripped */
 /* Return value: number of columns this string takes */
-int
-my_strlen_c(c)
-	char *c;
+int 
+my_strlen_c (char *c)
 {
 	int result = 0;
 	
@@ -1489,9 +1479,8 @@ my_strlen_c(c)
 /* strlen() with colour codes converted to internal codes */
 /* Doesn't do actual conversion */
 /* Return value: Number of bytes this string takes when converted */
-int
-my_strlen_ci(c)
-	char *c;
+int 
+my_strlen_ci (char *c)
 {
 	int result = 0;
 
@@ -1523,10 +1512,8 @@ my_strlen_ci(c)
 
 /* strcpy() with colour codes converted to internal codes */
 /* Converts the codes */
-void
-my_strcpy_ci(dest, c)
-	char *dest;
-	char *c;
+void 
+my_strcpy_ci (char *dest, char *c)
 {
 	struct mb_data mbdata;
 #ifdef HAVE_ICONV_OPEN
@@ -1565,9 +1552,8 @@ my_strcpy_ci(dest, c)
 }
 
 #define	MAXIMUM_SPLITS	40
-static	char	**
-split_up_line(str)
-	char	*str;
+static char **
+split_up_line (char *str)
 {
 	static	char	*output[MAXIMUM_SPLITS] =
 	{ 
@@ -2171,8 +2157,8 @@ add_to_screen(incoming)
  * update_all_windows: This goes through each visible window and draws the
  * necessary portions according the the update field of the window. 
  */
-void
-update_all_windows()
+void 
+update_all_windows (void)
 {
 	Window	*tmp;
 	int	fast_window,
@@ -2333,8 +2319,8 @@ new_window()
 	return (new);
 }
 
-void
-close_all_screen()
+void 
+close_all_screen (void)
 {
 	Screen *screen;
 
@@ -2724,7 +2710,7 @@ next_line_back(window)
                    that (fixes translation when scrolling backwards) */
 		len = strlen(LogLine->msg);
 		my_str = new_malloc(len + 1);
-                Trace(SZ_TRACE_LASTLOG, "next_line_back %p %s", LogLine, LogLine->msg);
+                Trace(SZ_TRACE_LASTLOG, "next_line_back %p %s", (char *)LogLine, (char *)LogLine->msg, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 		bcopy(LogLine->msg, my_str, len);
 		my_str[len] = '\0';
 		TheirLines = split_up_line(my_str);
@@ -2804,15 +2790,15 @@ display_lastlog_lines(start, end, window)
         if (window->top_of_display->next && window->top_of_display->next->line)
             has_next = 1;
         Trace(SZ_TRACE_LASTLOG, "display lastlog window %d (size %d, scrolled %d): start %d  end %d  has_next %d",
-              window->refnum, window->lastlog_size, window->new_scrolled_lines, start,
-              end, has_next);
+              (char *)window->refnum, (char *)window->lastlog_size, (char *)window->new_scrolled_lines, (char *)start,
+              (char *)end, (char *)has_next, NULL, NULL, NULL, NULL);
 /****************************************************************************/
 
 	(void)next_line_back(window);
 
 	for (i = window->new_scrolled_lines; i--;) {
 		Line = next_line_back(NULL);
-                if (Line) Trace(SZ_TRACE_LASTLOG, "lastlog1 skip %d) %s", i, Line);
+                if (Line) Trace(SZ_TRACE_LASTLOG, "lastlog1 skip %d) %s", (char*)i, Line, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
         }
 
  	/* WTF is this? -krys */
@@ -2824,12 +2810,12 @@ display_lastlog_lines(start, end, window)
 /****************************************************************************/
 		if (Disp->linetype) {
 			Line = next_line_back(NULL);
-                        if (Line) Trace(SZ_TRACE_LASTLOG, "lastlog2 skip %d) %s", i, Line);
+                        if (Line) Trace(SZ_TRACE_LASTLOG, "lastlog2 skip %d) %s", (char*)i, Line, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                 }
 
 	for (i = 0; i < start; i++) {
 		Line = next_line_back(NULL);
-                if (Line) Trace(SZ_TRACE_LASTLOG, "lastlog3 skip %d) %s", i, Line);
+                if (Line) Trace(SZ_TRACE_LASTLOG, "lastlog3 skip %d) %s", (char*)i, Line, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
         }
 
 	for (; i < end; i++)
@@ -2839,7 +2825,7 @@ display_lastlog_lines(start, end, window)
 		term_move_cursor(0, window->top + window->menu.lines +
 			window->scrolled_lines - i - 1);
 		rite(window, Line, 0, 0, 1, 0);
-                Trace(SZ_TRACE_LASTLOG, "lastlog4 display %d) %s", i, Line);
+                Trace(SZ_TRACE_LASTLOG, "lastlog4 display %d) %s", (char*)i, Line, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 	}
 }
 
@@ -2847,15 +2833,14 @@ display_lastlog_lines(start, end, window)
  * scrollback_{back,forw}wards_lines: scroll the named distance, called by
  * internal functions here.
  */
-static	void
-scrollback_backwards_lines(ScrollDist)
-	int	ScrollDist;
+static void 
+scrollback_backwards_lines (int ScrollDist)
 {
 	Window	*window;
 	int totallines;
 
 	Debug((3, "scrollback_backwards_lines(%d)", ScrollDist));
-        Trace(SZ_TRACE_LASTLOG, "scrollback_backwards_lines %d", ScrollDist);
+        Trace(SZ_TRACE_LASTLOG, "scrollback_backwards_lines %d", (char*)ScrollDist, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 	window = curr_scr_win;
 	if (!window->scrolled_lines && !window->scroll)
 	{
@@ -2864,13 +2849,13 @@ scrollback_backwards_lines(ScrollDist)
 	}
 	totallines = lastlog_lines(window);
 	Debug((3, "totallines = %d, scrolled_lines = %d", totallines, window->scrolled_lines));
-        Trace(SZ_TRACE_LASTLOG, "totallines = %d, scrolled_lines = %d", totallines,
-              window->scrolled_lines);
+        Trace(SZ_TRACE_LASTLOG, "totallines = %d, scrolled_lines = %d", (char*)totallines,
+              (char*)window->scrolled_lines, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 	if (ScrollDist + window->scrolled_lines > totallines)
 	{
 		ScrollDist = totallines - window->scrolled_lines;
 		Debug((3, "  adjusting ScrollDist to %d", ScrollDist));
-                Trace(SZ_TRACE_LASTLOG, "adjusting ScrollDist to %d", ScrollDist);
+                Trace(SZ_TRACE_LASTLOG, "adjusting ScrollDist to %d", (char*)ScrollDist, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 	}
 	if (ScrollDist == 0)
 	{
@@ -2884,9 +2869,9 @@ scrollback_backwards_lines(ScrollDist)
 	    window->top + window->menu.lines + window->display_size - 1,
 	    -ScrollDist));
         Trace(SZ_TRACE_LASTLOG, "going to term_scroll(%d, %d, %d)",
-                window->top + window->menu.lines,
-                window->top + window->menu.lines + window->display_size - 1,
-                -ScrollDist);
+                (char*)(window->top + window->menu.lines),
+                (char*)(window->top + window->menu.lines + window->display_size - 1),
+                (char*)-ScrollDist, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 	term_scroll(window->top + window->menu.lines,
 	    window->top + window->menu.lines + window->display_size - 1,
 	    -ScrollDist);
@@ -2896,18 +2881,18 @@ scrollback_backwards_lines(ScrollDist)
 	    window->new_scrolled_lines,
 	    window->display_size));
         Trace(SZ_TRACE_LASTLOG, "scrolled_lines %d, new_scrolled_lines %d, display_size %d",
-              window->scrolled_lines,
-              window->new_scrolled_lines,
-              window->display_size);
+              (char*)window->scrolled_lines,
+              (char*)window->new_scrolled_lines,
+              (char*)window->display_size, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 
 	Debug((3, "going to display_lastlog_lines(%d, %d, %s)",
 	    window->scrolled_lines - ScrollDist,
 	    window->scrolled_lines,
 	    window->name));
         Trace(SZ_TRACE_LASTLOG, "going to display_lastlog_lines(%d, %d, %d)",
-              window->scrolled_lines - ScrollDist,
-              window->scrolled_lines,
-              window->refnum);
+              (char *)window->scrolled_lines - ScrollDist,
+              (char *)window->scrolled_lines,
+              (char *)window->refnum, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 	display_lastlog_lines(window->scrolled_lines - ScrollDist,
 	    window->scrolled_lines,
 	    window);
@@ -2917,14 +2902,13 @@ scrollback_backwards_lines(ScrollDist)
 	update_window_status(window, 0);
 }
 
-static	void
-scrollback_forwards_lines(ScrollDist)
-	int	ScrollDist;
+static void 
+scrollback_forwards_lines (int ScrollDist)
 {
 	Window	*window;
 
 	Debug((3, "scrollback_forward_lines(%d)", ScrollDist));
-        Trace(SZ_TRACE_LASTLOG, "scrollback_forward_lines %d", ScrollDist);
+        Trace(SZ_TRACE_LASTLOG, "scrollback_forward_lines %d", (char *)ScrollDist, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 	window = curr_scr_win;
 	if (!window->scrolled_lines)
 	{
@@ -2935,16 +2919,16 @@ scrollback_forwards_lines(ScrollDist)
 		ScrollDist = window->scrolled_lines;
 
 	Debug((3, "scrolled_lines = %d", window->scrolled_lines));
-        Trace(SZ_TRACE_LASTLOG, "scrolled_lines %d", window->scrolled_lines);
+        Trace(SZ_TRACE_LASTLOG, "scrolled_lines %d", (char *)window->scrolled_lines, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 	window->scrolled_lines -= ScrollDist;
 	Debug((3, "going to term_scroll(%d, %d, %d)",
 	    window->top + window->menu.lines,
 	    window->top + window->menu.lines + window->display_size - 1,
 	    ScrollDist));
         Trace(SZ_TRACE_LASTLOG, "going to term_scroll(%d, %d, %d)",
-              window->top + window->menu.lines,
-              window->top + window->menu.lines + window->display_size - 1,
-              ScrollDist);
+              (char *)(window->top + window->menu.lines),
+              (char *)(window->top + window->menu.lines + window->display_size - 1),
+              (char *)ScrollDist, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 	term_scroll(window->top + window->menu.lines,
 	    window->top + window->menu.lines + window->display_size - 1,
 	    ScrollDist);
@@ -2954,9 +2938,9 @@ scrollback_forwards_lines(ScrollDist)
 	    window->new_scrolled_lines,
 	    window->display_size));
         Trace(SZ_TRACE_LASTLOG, "scrolled_lines %d, new_scrolled_lines %d, display_size %d",
-              window->scrolled_lines,
-              window->new_scrolled_lines,
-              window->display_size);
+              (char *)window->scrolled_lines,
+              (char *)window->new_scrolled_lines,
+              (char *)window->display_size, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 
 	if (window->scrolled_lines < window->display_size)
 		redraw_window(window,
@@ -2967,9 +2951,9 @@ scrollback_forwards_lines(ScrollDist)
 	    window->scrolled_lines - window->display_size + ScrollDist,
 	    window->name));
         Trace(SZ_TRACE_LASTLOG, "going to display_lastlog_lines(%d, %d, %d)",
-              window->scrolled_lines - window->display_size,
-              window->scrolled_lines - window->display_size + ScrollDist,
-              window->refnum);
+              (char *)(window->scrolled_lines - window->display_size),
+              (char *)(window->scrolled_lines - window->display_size + ScrollDist),
+              (char *)window->refnum, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 	display_lastlog_lines(window->scrolled_lines - window->display_size,
 	    window->scrolled_lines - window->display_size + ScrollDist,
 	    window);
--- a/source/server.c
+++ b/source/server.c
@@ -81,6 +81,7 @@ static	void	login_to_server _((int));
 static	int	connect_to_server_direct _((char *, int, char *, char *));
 static	int	connect_to_server_process _((char *, int, char *, char *));
 static	void	irc2_login_to_server _((int));
+extern void Trace(long area, char *format, char *arg1, char *arg2, char *arg3, char *arg4, char *arg5, char *arg6, char *arg7, char *arg8, char *arg9, char *arg10);
 
 /*
  * Don't want to start ircio by default...
@@ -120,10 +121,8 @@ extern	int	dgets_errno;
  * validity of the index.  It also first sends a "QUIT" to the server being
  * closed
  */
-void
-close_server(server_index, message)
-	int	server_index;
-	char	*message;
+void 
+close_server (int server_index, char *message)
 {
 	char	buffer[BIG_BUFFER_SIZE+1];
 	int	i,
@@ -179,14 +178,14 @@ close_server(server_index, message)
                     say("You were connected to server %s for %dd %02dh %02dm",
                         get_server_name(i), timedays, timehours, timeminutes);
                     Trace(SZ_TRACE_CONNECT, "connection to server %s:%d closed",
-                          get_server_name(i), server_list[i].port);
+                          (char *)get_server_name(i), (char *)server_list[i].port, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                     TraceServerInfo(2, 1);
                     server_list[i].ConnectTime = 0;
                     ChannelLogReportAll("ended", server_list[i].chan_list);
                 }
                 else {
                     Trace(SZ_TRACE_CONNECT, "server %s:%d closed",
-                          get_server_name(i), server_list[i].port);
+                          (char *)get_server_name(i), (char *)server_list[i].port, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                     TraceServerInfo(2, 1);
                 }
 /****************************************************************************/
@@ -257,9 +256,8 @@ close_server(server_index, message)
  * which servers in the server list have currently active read descriptors.
  */
 
-void
-set_server_bits(rd, wd)
-	fd_set *rd, *wd;
+void 
+set_server_bits (fd_set *rd, fd_set *wd)
 {
 	int	i;
 
@@ -284,9 +282,8 @@ set_server_bits(rd, wd)
  * 2) If the server wasn't a primary server, connect_to_server() is called to
  * try to keep that connection alive.
  */
-void
-do_server(rd, wd)
-	fd_set	*rd, *wd;
+void 
+do_server (fd_set *rd, fd_set *wd)
 {
 	char	lbuf[BIG_BUFFER_SIZE + 1];
 	int	des, j;
@@ -488,11 +485,8 @@ real_continue:
  * names in the server list, returning the index into the list if found, or
  * -1 if not found
  */
-extern	int
-find_in_server_list(server, port, nick)
-	char	*server;
-	int	port;
-	char	*nick;
+extern int 
+find_in_server_list (char *server, int port, char *nick)
 {
 	int	i, maybe = -1;
 	size_t	len;
@@ -545,9 +539,8 @@ find_in_server_list(server, port, nick)
  * parse_server_index:  given a string, this checks if it's a number, and if
  * so checks it validity as a server index.  Otherwise -1 is returned
  */
-int
-parse_server_index(str)
-	char	*str;
+int 
+parse_server_index (char *str)
 {
 	int	i;
 
@@ -567,24 +560,18 @@ parse_server_index(str)
  * passes.  If the server is not on the list, it is added to the end. In
  * either case, the server is made the current server.
  */
-void
-add_to_server_list(server, port, password, nick, group, overwrite)
-	char	*server;
-	int	port;
-	char	*password;
-	char	*nick;
-	char	*group;
-	int	overwrite;
+void 
+add_to_server_list (char *server, int port, char *password, char *nick, char *group, int overwrite)
 {
 	int	i;
 
 /**************************** PATCHED by Flier ******************************/
-        Trace(SZ_TRACE_SERVER, "adding server %s:%d", FormatServerName(server), port);
+        Trace(SZ_TRACE_SERVER, "adding server %s:%d", (char *)FormatServerName(server), (char *)port, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
         TraceServerInfo(2, 0);
 /****************************************************************************/
 	if ((from_server = find_in_server_list(server, port, nick)) == -1)
 	{
-                Trace(SZ_TRACE_SERVER, "server not found");
+                Trace(SZ_TRACE_SERVER, "server not found", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 		from_server = number_of_servers++;
 		if (server_list)
 			server_list = (Server *) new_realloc((char *) server_list, number_of_servers * sizeof(Server));
@@ -682,7 +669,7 @@ add_to_server_list(server, port, password, nick, group, overwrite)
 	}
 	else
 	{
-                Trace(SZ_TRACE_SERVER, "server found at %d", from_server);
+                Trace(SZ_TRACE_SERVER, "server found at %d", (char *)from_server, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 		if (overwrite)
 		{
 			server_list[from_server].port = port;
@@ -702,14 +689,13 @@ add_to_server_list(server, port, password, nick, group, overwrite)
 			malloc_strcpy(&(server_list[from_server].name), server);
 	}
 /**************************** PATCHED by Flier ******************************/
-    Trace(SZ_TRACE_SERVER, "server added at %d", from_server);
+    Trace(SZ_TRACE_SERVER, "server added at %d", (char *)from_server, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     TraceServerInfo(2, 1);
 /****************************************************************************/
 }
 
-extern  void
-ctcp_reply_backlog_change(s)
-	int	s;
+extern void 
+ctcp_reply_backlog_change (int s)
 {
 	int	i, j, delta;
 
@@ -733,9 +719,8 @@ ctcp_reply_backlog_change(s)
 	}
 }
 
-extern	void
-remove_from_server_list(i)
-	int	i;
+extern void 
+remove_from_server_list (int i)
 {
 	int	old_server = from_server,
 		flag = 1;
@@ -751,7 +736,7 @@ remove_from_server_list(i)
 
 /**************************** PATCHED by Flier ******************************/
     Trace(SZ_TRACE_SERVER, "removing server %d) %s:%d",
-          i, get_server_name(i), server_list[i].port);
+          (char *)i, (char *)get_server_name(i), (char *)server_list[i].port, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     TraceServerInfo(2, 0);
 /****************************************************************************/
 
@@ -848,7 +833,7 @@ remove_from_server_list(i)
             new_free(&server_list);
             server_list = NULL;
         }
-    Trace(SZ_TRACE_SERVER, "removed server");
+    Trace(SZ_TRACE_SERVER, "removed server", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     TraceServerInfo(2, 0);
 /****************************************************************************/
 }
@@ -861,13 +846,8 @@ remove_from_server_list(i)
  * or password are missing or empty,  their respective returned value will
  * point to null.
  */
-void
-parse_server_info(name, port, password, nick, group)
-	char	**name,
-		**port,
-		**password,
-		**nick,
-		**group;
+void 
+parse_server_info (char **name, char **port, char **password, char **nick, char **group)
 {
 	char *ptr, *ename, *savename = (char *) 0;
 
@@ -945,9 +925,8 @@ parse_server_info(name, port, password, nick, group)
  * Note also that this routine mucks around with the server string passed to it,
  * so make sure this is ok .
  */
-void
-build_server_list(servers)
-	char	*servers;
+void 
+build_server_list (char *servers)
 {
 	char	*host,
 		*rest,
@@ -990,12 +969,8 @@ build_server_list(servers)
  *
  * This version of connect_to_server() connects directly to a server
  */
-static	int
-connect_to_server_direct(server_name, port, nick, group)
-	char	*server_name;
-	int	port;
-	char	*nick;
-	char	*group;
+static int 
+connect_to_server_direct (char *server_name, int port, char *nick, char *group)
 {
 	int	new_des;
 #ifdef INET6
@@ -1104,12 +1079,8 @@ connect_to_server_direct(server_name, port, nick, group)
  * This version of connect_to_server() uses the ircio process to talk to a
  * server
  */
-static	int
-connect_to_server_process(server_name, port, nick, group)
-	char	*server_name;
-	int	port;
-	char	*nick;
-	char	*group;
+static int 
+connect_to_server_process (char *server_name, int port, char *nick, char *group)
 {
 	int	write_des[2],
 		read_des[2],
@@ -1218,13 +1189,8 @@ connect_to_server_process(server_name, port, nick, group)
  * checked in the notice.c routines to make sure that connection was truely
  * successful (and not closed immediately by the server).
  */
-int
-connect_to_server(server_name, port, nick, group, c_server)
-	char	*server_name;
-	int	port;
-	char	*nick;
-	char	*group;
-	int	c_server;
+int 
+connect_to_server (char *server_name, int port, char *nick, char *group, int c_server)
 {
 	int	server_index;
 #ifdef INET6
@@ -1264,7 +1230,7 @@ connect_to_server(server_name, port, nick, group, c_server)
          * Now client is confused about servers. */
         for (i = 0; i < number_of_servers; i++) {
             if ((server_list[i].flags) & CLEAR_PENDING) {
-                Trace(SZ_TRACE_CONNECT, "clear channels on server %d", i);
+                Trace(SZ_TRACE_CONNECT, "clear channels on server %d", (char *)i, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                 clear_channel_list(i);
             }
             if ((server_list[i].flags) & CLOSE_PENDING) {
@@ -1297,7 +1263,7 @@ connect_to_server(server_name, port, nick, group, c_server)
 
 /**************************** PATCHED by Flier ******************************/
                 Trace(SZ_TRACE_CONNECT, "connecting to %s:%d",
-                      FormatServerName(server_name), port);
+                      (char *)FormatServerName(server_name), (char *)port, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                 TraceServerInfo(2, 1);
                 /* transfer auto-reply and tabkey lists */
                 if (CheckServer(c_server) && server_index >= 0) {
@@ -1552,9 +1518,8 @@ char **errorstr;
 }
 #endif
 
-static	void
-login_to_server(server)
-	int server;
+static void 
+login_to_server (int server)
 {
 #ifdef NON_BLOCKING_CONNECTS
 	int	old_serv = server_list[server].close_serv;
@@ -1705,9 +1670,8 @@ login_to_server(server)
 	irc2_login_to_server(server);
 }
 
-static	void
-irc2_login_to_server(server)
-	int	server;
+static void 
+irc2_login_to_server (int server)
 {
 
 	if (server_list[server].password)
@@ -1725,10 +1689,8 @@ irc2_login_to_server(server)
  * oldconn is set if this connection is really an old connection being
  * resurected (eg. connection to server failed).
  */
-void
-get_connected(server, oldconn)
-	int	server;
-	int	oldconn;
+void 
+get_connected (int server, int oldconn)
 {
 	int	s,
 		ret = -1;
@@ -1791,8 +1753,8 @@ get_connected(server, oldconn)
  * information from a file and adds this stuff to the server list.  See
  * build_server_list()
  */
-int
-read_server_file()
+int 
+read_server_file (void)
 {
 	FILE *fp;
 	char format[11];
@@ -1816,8 +1778,8 @@ read_server_file()
 #endif
 
 /* display_server_list: just guess what this does */
-void
-display_server_list()
+void 
+display_server_list (void)
 {
 	int	i;
 /**************************** Patched by Flier ******************************/
@@ -1942,10 +1904,8 @@ display_server_list()
 		say("The server list is empty");
 }
 
-void
-MarkAllAway(command, message)
-	char	*command;
-	char	*message;
+void 
+MarkAllAway (char *command, char *message)
 {
 	int	old_server;
 
@@ -1976,10 +1936,8 @@ MarkAllAway(command, message)
  * set_server_password: this sets the password for the server with the given
  * index.  If password is null, the password for the given server is returned
  */
-char	*
-set_server_password(server_index, password)
-	int	server_index;
-	char	*password;
+char *
+set_server_password (int server_index, char *password)
 {
 
 	if (server_list)
@@ -1996,11 +1954,8 @@ set_server_password(server_index, password)
  * server: the /SERVER command. Read the SERVER help page about
  */
 /*ARGSUSED*/
-void
-servercmd(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+servercmd (char *command, char *args, char *subargs)
 {
 	char	*server,
 		*port,
@@ -2202,8 +2157,8 @@ servercmd(command, args, subargs)
  * flush_server: eats all output from server, until there is at least a
  * second delay between bits of servers crap... useful to abort a /links.
  */
-void
-flush_server()
+void 
+flush_server (void)
 {
 	fd_set rd;
 	struct timeval time_out;
@@ -2253,18 +2208,15 @@ flush_server()
  * the whois value is non-zero, then the server sends End of WHOIS and things
  * can be done more effienciently
  */
-void
-set_server_whois(server_index, value)
-	int	server_index,
-		value;
+void 
+set_server_whois (int server_index, int value)
 {
 	server_list[server_index].whois = value;
 }
 
 /* get_server_whois: Returns the whois value for the given server index */
-int
-get_server_whois(server_index)
-	int	server_index;
+int 
+get_server_whois (int server_index)
 {
 	if (server_index == -1 || !is_server_ok(server_index))
 		server_index = primary_server;
@@ -2272,28 +2224,22 @@ get_server_whois(server_index)
 }
 
 
-void
-set_server_2_6_2(server_index, value)
-	int	server_index,
-		value;
+void 
+set_server_2_6_2 (int server_index, int value)
 {
 	set_server_flag(server_index, SERVER_2_6_2, value);
 }
 
-int
-get_server_2_6_2(server_index)
-	int	server_index;
+int 
+get_server_2_6_2 (int server_index)
 {
 	if (server_index == -1 || !is_server_ok(server_index))
 		server_index = primary_server;
 	return (get_server_flag(server_index, SERVER_2_6_2));
 }
 
-void
-set_server_flag(server_index, flag, value)
-	int	server_index;
-	int	flag;
-	int	value;
+void 
+set_server_flag (int server_index, int flag, int value)
 {
 	if (server_index == -1 || !is_server_ok(server_index))
 		server_index = primary_server;
@@ -2303,10 +2249,8 @@ set_server_flag(server_index, flag, value)
 		server_list[server_index].flags &= ~flag;
 }
 
-int
-get_server_flag(server_index, value)
-	int	server_index;
-	int	value;
+int 
+get_server_flag (int server_index, int value)
 {
 	if (server_index == -1 || !is_server_ok(server_index))
 		server_index = primary_server;
@@ -2314,10 +2258,8 @@ get_server_flag(server_index, value)
 }
 
 /**************************** PATCHED by Flier ******************************/
-void set_server_umode_flag(server_index, flag, add)
-int server_index;
-char flag;
-int add;
+void 
+set_server_umode_flag (int server_index, int flag, int add)
 {
     int flagvalue;
     int *flags;
@@ -2334,9 +2276,8 @@ int add;
     else *flags &= ~flagvalue;
 }
 
-int get_server_umode_flag(server_index, flag)
-int server_index;
-char flag;
+int 
+get_server_umode_flag (int server_index, int flag)
 {
     int flagvalue;
     int flags;
@@ -2357,8 +2298,7 @@ char flag;
  * get_server_password: get the password for this server.
  */
 char *
-get_server_password(server_index)
-	int	server_index;
+get_server_password (int server_index)
 {
 	if (server_index == -1 || !is_server_ok(server_index))
 		server_index = primary_server;
@@ -2369,8 +2309,7 @@ get_server_password(server_index)
  * get_server_group: get the group for this server.
  */
 char *
-get_server_group(server_index)
-	int	server_index;
+get_server_group (int server_index)
 {
 	if (server_index == -1 || !is_server_ok(server_index))
 		server_index = primary_server;
@@ -2382,10 +2321,8 @@ get_server_group(server_index)
  * zero version means pre 2.6, a one version means 2.6 aso. (look server.h
  * for typedef)
  */
-void
-set_server_version(server_index, version)
-	int	server_index;
-	int	version;
+void 
+set_server_version (int server_index, int version)
 {
 	if (server_index == -1 || !is_server_ok(server_index))
 		server_index = primary_server;
@@ -2396,9 +2333,8 @@ set_server_version(server_index, version)
  * get_server_version: returns the server version value for the given server
  * index
  */
-int
-get_server_version(server_index)
-	int	server_index;
+int 
+get_server_version (int server_index)
 {
 	if (server_index == -1 || !is_server_ok(server_index))
 		server_index = primary_server;
@@ -2409,9 +2345,8 @@ get_server_version(server_index)
 }
 
 /* get_server_name: returns the name for the given server index */
-char	*
-get_server_name(server_index)
-	int	server_index;
+char *
+get_server_name (int server_index)
 {
 	if (server_index == -1 || !is_server_ok(server_index))
 		server_index = primary_server;
@@ -2419,9 +2354,8 @@ get_server_name(server_index)
 }
 
 /* set_server_itsname: returns the server's idea of its name */
-char	*
-get_server_itsname(server_index)
-	int	server_index;
+char *
+get_server_itsname (int server_index)
 {
 	if (server_index == -1 || !is_server_ok(server_index))
 		server_index = primary_server;
@@ -2433,10 +2367,8 @@ get_server_itsname(server_index)
 		return "<None>";
 }
 
-void
-set_server_itsname(server_index, name)
-	int	server_index;
-	char	*name;
+void 
+set_server_itsname (int server_index, char *name)
 {
 	if (server_index == -1 || !is_server_ok(server_index))
 		server_index = primary_server;
@@ -2447,9 +2379,8 @@ set_server_itsname(server_index, name)
  * is_server_open: Returns true if the given server index represents a server
  * with a live connection, returns false otherwise
  */
-int
-is_server_open(server_index)
-	int	server_index;
+int 
+is_server_open (int server_index)
 {
 	if (!is_server_ok(server_index))
 		return (0);
@@ -2460,8 +2391,8 @@ is_server_open(server_index)
 /*
  * is_server_valid: Returns true if the given server index is valid
  */
-int is_server_valid(server_index)
-int server_index;
+int 
+is_server_valid (int server_index)
 {
     if (server_index < 0 || server_index >= number_of_servers)
         return(0);
@@ -2482,9 +2413,8 @@ int is_server_ok(int server_index) {
  * means that both the tcp connection is open and the user is properly
  * registered
  */
-int
-is_server_connected(server_index)
-	int	server_index;
+int 
+is_server_connected (int server_index)
 {
 /**************************** PATCHED by Flier ******************************/
 	/*if (server_index < 0)
@@ -2495,9 +2425,8 @@ is_server_connected(server_index)
 }
 
 /* get_server_port: Returns the connection port for the given server index */
-int
-get_server_port(server_index)
-	int	server_index;
+int 
+get_server_port (int server_index)
 {
     if (server_index == -1 || !is_server_ok(server_index))
         server_index = primary_server;
@@ -2511,9 +2440,8 @@ get_server_port(server_index)
  * get_server_nickname: returns the current nickname for the given server
  * index
  */
-char	*
-get_server_nickname(server_index)
-	int	server_index;
+char *
+get_server_nickname (int server_index)
 {
 /**************************** PATCHED by Flier ******************************/
     if (!is_server_ok(server_index))
@@ -2619,9 +2547,8 @@ set_server_qtail(server_index, value)
  * get_server_operator: returns true if the user has op privs on the server,
  * false otherwise
  */
-int
-get_server_operator(server_index)
-	int	server_index;
+int 
+get_server_operator (int server_index)
 {
 /**************************** PATCHED by Flier ******************************/
     if (!is_server_ok(server_index)) return(0);
@@ -2633,10 +2560,8 @@ get_server_operator(server_index)
  * set_server_operator: If flag is non-zero, marks the user as having op
  * privs on the given server.
  */
-void
-set_server_operator(server_index, flag)
-	int	server_index;
-	int	flag;
+void 
+set_server_operator (int server_index, int flag)
 {
 /**************************** PATCHED by Flier ******************************/
     if (!is_server_ok(server_index)) return;
@@ -2649,10 +2574,8 @@ set_server_operator(server_index, flag)
  * This nickname is then used for all future connections to that server
  * (unless changed with NICK while connected to the server
  */
-void
-set_server_nickname(server_index, nick)
-	int	server_index;
-	char	*nick;
+void 
+set_server_nickname (int server_index, char *nick)
 {
     if (server_index != -1)
     {
@@ -2669,10 +2592,8 @@ set_server_nickname(server_index, nick)
     update_all_status();
 }
 
-void
-set_server_motd(server_index, flag)
-	int	server_index;
-	int	flag;
+void 
+set_server_motd (int server_index, int flag)
 {
 /**************************** PATCHED by Flier ******************************/
 	/*if (server_index != -1)*/
@@ -2681,9 +2602,8 @@ set_server_motd(server_index, flag)
     server_list[server_index].motd = flag;
 }
 
-int
-get_server_motd(server_index)
-	int	server_index;
+int 
+get_server_motd (int server_index)
 {
 /**************************** PATCHED by Flier ******************************/
 	/*if (server_index != -1)*/
@@ -2693,10 +2613,8 @@ get_server_motd(server_index)
 	return (0);
 }
 
-void
-server_is_connected(server_index, value)
-	int	server_index,
-		value;
+void 
+server_is_connected (int server_index, int value)
 {
 /**************************** PATCHED by Flier ******************************/
     if (!is_server_ok(server_index)) return;
@@ -2762,7 +2680,7 @@ send_to_server(format, arg1, arg2, arg3, arg4, arg5,
 		if (len > (IRCD_BUFFER_SIZE - 2))
  			lbuf[IRCD_BUFFER_SIZE - 2] = (char) 0;
 /**************************** Patched by Flier ******************************/
-                Trace(SZ_TRACE_IO, "--> %d: %s", server, lbuf);
+                Trace(SZ_TRACE_IO, "--> %d: %s", (char *)server, (char *)lbuf, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
 /****************************************************************************/
 		len++;
  		strmcat(lbuf, "\n", IRCD_BUFFER_SIZE);
@@ -2819,10 +2737,8 @@ send_to_server(format, arg1, arg2, arg3, arg4, arg5,
  * Connect to a UNIX domain socket. Only works for servers.
  * submitted by Avalon for use with server 2.7.2 and beyond.
  */
-int
-connect_to_unix(port, path)
-	int	port;
-	char	*path;
+int 
+connect_to_unix (int port, char *path)
 {
 	struct	sockaddr_un un;
 	int	    sock;
@@ -2845,8 +2761,8 @@ connect_to_unix(port, path)
  * close_all_server: Used whn creating new screens to close all the open
  * server connections in the child process...
  */
-extern	void
-close_all_server()
+extern void 
+close_all_server (void)
 {
 	int	i;
 
@@ -2859,8 +2775,8 @@ close_all_server()
 	}
 }
 
-extern	char	*
-create_server_list()
+extern char *
+create_server_list (void)
 {
 	int	i;
 	char	*value = (char *) 0;
@@ -2882,10 +2798,8 @@ create_server_list()
 	return value;
 }
 
-static	void
-add_to_server_buffer(server, buf)
-	int	server;
-	char	*buf;
+static void 
+add_to_server_buffer (int server, char *buf)
 {
 	if (buf && *buf)
 	{
@@ -2896,11 +2810,8 @@ add_to_server_buffer(server, buf)
 	}
 }
 
-void
-disconnectcmd(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+disconnectcmd (char *command, char *args, char *subargs)
 {
 	char	*server;
 	char	*message;
@@ -2974,10 +2885,8 @@ done:
 		say("You are not connected to a server. Use /SERVER to connect.");
 }
 
-int
-find_server_group(group, add)
-	char	*group;
-	int	add;
+int 
+find_server_group (char *group, int add)
 {
 	static	int	next = 1;
 	SGroup *g = (SGroup *) find_in_list((List **) &server_group_list, group, 0);
@@ -2997,9 +2906,8 @@ end:
 	return g->number;
 }
 
-char	*
-find_server_group_name(number)
-	int	number;
+char *
+find_server_group_name (int number)
 {
 	SGroup *g = server_group_list;
 
--- a/source/stack.c
+++ b/source/stack.c
@@ -55,10 +55,8 @@ static	void	do_stack_on _((int, char *));
 static	void	do_stack_alias _((int, char *, int));
 static	void	do_stack_set _((int, char *));
 
-static	void
-do_stack_on(type, args)
-	int	type;
-	char	*args;
+static void 
+do_stack_on (int type, char *args)
 {
 	char	foo[4];
  	int	cnt, i, which = 0;
@@ -229,11 +227,8 @@ do_stack_on(type, args)
 	say("Unknown STACK ON type ??");
 }
 
-static	void
-do_stack_alias(type, args, which)
-	int	type;
-	char	*args;
-	int	which;
+static void 
+do_stack_alias (int type, char *args, int which)
 {
 	char	*name;
 	AliasStack	*aptr,
@@ -287,10 +282,8 @@ do_stack_alias(type, args, which)
 	say("Unknown STACK type ??");
 }
 
-static	void
-do_stack_set(type, args)
-	int	type;
-	char	*args;
+static void 
+do_stack_set (int type, char *args)
 {
 	SetStack *tmp = set_stack;
 
@@ -332,11 +325,8 @@ alias_stack_add(aptr, which)
 	return;
 }
 
-void
-stackcmd(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+stackcmd (char *command, char *args, char *subargs)
 {
 	char	*arg,
 		*cmd = NULL;
--- a/source/status.c
+++ b/source/status.c
@@ -216,8 +216,8 @@ alarmed()
 	do_status_alarmed = 1;
 }
 
-void
-real_status_alarmed()
+void 
+real_status_alarmed (void)
 {
 	char	time_str[16];
 
@@ -233,9 +233,8 @@ real_status_alarmed()
  * routine will be activated every 10 seconds or so.  If flag is 0, the timer
  * and signal stuff are reset 
  */
-static	void
-alarm_switch(flag)
-	int	flag;
+static void 
+alarm_switch (int flag)
 {
 	static	int	alarm_on = 0;
 
@@ -265,9 +264,8 @@ alarm_switch(flag)
  * 23 and MM is between 0 and 59.  This routine also looks for one special
  * case, "OFF", which sets the alarm string to null 
  */
-void
-set_alarm(str)
-	char	*str;
+void 
+set_alarm (char *str)
 {
 	char	hours[10],
 		minutes[10],
@@ -464,9 +462,8 @@ update_clock(buf, len, flag)
 }
 
 /*ARGSUSED*/
-void
-reset_clock(unused)
-	char	*unused;
+void 
+reset_clock (char *unused)
 {
 	update_clock(0, 0, RESET_TIME);
 	update_all_status();
@@ -475,10 +472,8 @@ reset_clock(unused)
 /**************************** PATCHED by Flier ******************************/
 /* Insert SBAR color into buffer - for status bar */
 #ifdef WANTANSI
-void InsertStatusColor(ccode,buffer,bufsize)
-char ccode;
-char *buffer;
-int  bufsize;
+void 
+InsertStatusColor (int ccode, char *buffer, int bufsize)
 {
     char *color=empty_string;
 
@@ -541,10 +536,8 @@ int  bufsize;
  * converted, all subsequence occurences are left unchanged.  This routine
  * mallocs the returned string. 
  */
-static	char	*
-convert_sub_format(format, c)
-	char	*format;
-	int	c;
+static char *
+convert_sub_format (char *format, int c)
 {
 	char	lbuf[BIG_BUFFER_SIZE + 1];
 	static	char	bletch[] = "%% ";
@@ -591,10 +584,8 @@ convert_sub_format(format, c)
 	return (ptr);
 }
 
-static	char	*
-convert_format(format, k)
-	char	*format;
-	int	k;
+static char *
+convert_format (char *format, int k)
 {
 	char	lbuf[BIG_BUFFER_SIZE + 1];
 	char	*ptr,
@@ -1049,9 +1040,8 @@ convert_format(format, k)
 	return (malloc_ptr);
 }
 
-void
-build_status(format)
-	char	*format;
+void 
+build_status (char *format)
 {
 	int	i, k;
 
@@ -1091,10 +1081,8 @@ build_status(format)
 
 /**************************** PATCHED by Flier ******************************/
 #ifdef CELE
-void
-Cquick_status(format,qstat)
-char *format;
-int qstat;
+void 
+Cquick_status (char *format, int qstat)
 {
     int	i,k;
 
--- a/source/term.c
+++ b/source/term.c
@@ -276,9 +276,8 @@ int term_read(char *buf, size_t count) {
 #endif /* SZNCURSES */
 /****************************************************************************/
 
-void
-term_set_fp(fp)
-	FILE	*fp;
+void 
+term_set_fp (FILE *fp)
 {
 	term_fp = fp;
 }
@@ -321,8 +320,8 @@ putchar_x(c)
 #endif
 }
 
-void
-term_flush()
+void 
+term_flush (void)
 {
 /**************************** PATCHED by Flier ******************************/
 	/*fflush(term_fp);*/
@@ -338,8 +337,8 @@ term_flush()
  * term_reset: sets terminal attributed back to what they were before the
  * program started 
  */
-void
-term_reset()
+void 
+term_reset (void)
 {
 /**************************** PATCHED by Flier ******************************/
 #ifndef SZNCURSES
@@ -444,8 +443,8 @@ term_pause(key, ptr)
  * wserv, we set the termial to RAW, no ECHO, so that all the signals are
  * ignored.. fixes quite a few problems...  -phone, jan 1993..
  */
-void
-term_init()
+void 
+term_init (void)
 {
 #ifndef	STTY_ONLY
 /**************************** PATCHED by Flier ******************************/
@@ -705,7 +704,8 @@ term_init()
 }
 
 /**************************** PATCHED by Flier ******************************/
-void term_close() {
+void 
+term_close (void) {
     if (tty_des != -1)
         close(tty_des);
 }
@@ -718,8 +718,8 @@ void term_close() {
  * the terminal size has changed since last time term_resize() has been
  * called, 1 is returned.  If it is unchanged, 0 is returned. 
  */
-int
-term_resize()
+int 
+term_resize (void)
 {
 /**************************** PATCHED by Flier ******************************/
 #ifdef SZNCURSES
@@ -802,8 +802,8 @@ term_resize()
 /**************************** PATCHED by Flier ******************************/
 #ifndef SZNCURSES
 /****************************************************************************/
-static	int
-term_null_function()
+static int 
+term_null_function (void)
 {
 	return (1);
 }
@@ -838,9 +838,8 @@ term_CE_clear_to_eol()
  * doesn't reposition the cursor at all, so the cursor must be in the correct
  * spot at the beginning and you must move it back afterwards 
  */
-void
-term_space_erase(x)
-	int	x;
+void 
+term_space_erase (int x)
 {
 	int	i,
 		cnt;
@@ -914,11 +913,8 @@ term_CS_scroll(line1, line2, n)
 /**************************** PATCHED by Flier ******************************/
 #ifndef SZNCURSES
 /****************************************************************************/
-static	int
-term_ALDL_scroll(line1, line2, n)
-	int	line1,
-		line2,
-		n;
+static int 
+term_ALDL_scroll (int line1, int line2, int n)
 {
 	int	i;
 
@@ -953,11 +949,8 @@ term_ALDL_scroll(line1, line2, n)
 /**************************** PATCHED by Flier ******************************/
 #ifndef SZNCURSES
 /****************************************************************************/
-static	int
-term_param_ALDL_scroll(line1, line2, n)
-	int	line1,
-		line2,
-		n;
+static int 
+term_param_ALDL_scroll (int line1, int line2, int n)
 {
 	if (n > 0)
 	{
@@ -1114,17 +1107,15 @@ term_LE_cursor_left()
 /**************************** PATCHED by Flier ******************************/
 #ifndef SZNCURSES
 /****************************************************************************/
-static	int
-term_BS_cursor_left()
+static int 
+term_BS_cursor_left (void)
 {
 	fputc('\010', term_fp);
 	return (0);
 }
 
-extern	void
-copy_window_size(nlines, cols)
-	int	*nlines,
-		*cols;
+extern void 
+copy_window_size (int *nlines, int *cols)
 {
 	*nlines = li;
 	*cols = co;
@@ -1133,8 +1124,8 @@ copy_window_size(nlines, cols)
 #endif /* ! SZNCURSES */
 /****************************************************************************/
 
-extern	int
-term_eight_bit()
+extern int 
+term_eight_bit (void)
 {
 /**************************** PATCHED by Flier ******************************/
 #ifdef SZNCURSES
@@ -1153,9 +1144,8 @@ term_eight_bit()
 #endif /* STTY_ONLY */
 
 
-extern	void
-set_term_eight_bit(value)
-	int	value;
+extern void 
+set_term_eight_bit (int value)
 {
 /**************************** PATCHED by Flier ******************************/
 #ifndef SZNCURSES
--- a/source/trace.c
+++ b/source/trace.c
@@ -39,8 +39,8 @@ void SetTraceLevel(long mask)
     TraceMask = mask;
 }
 
-char *BitsToTraceLevel(mask)
-long mask;
+char *
+BitsToTraceLevel (long mask)
 {
     int i;
     static char buf[mybufsize];
@@ -61,8 +61,8 @@ long mask;
 #endif
 
 /* Set trace mask */
-void SetTrace(level)
-char *level;
+void 
+SetTrace (char *level)
 {
 #ifdef SZTRACE
     int i, neg, len;
@@ -118,13 +118,13 @@ char *level;
     TraceMask = mask;
     set_string_var(TRACE_VAR, BitsToTraceLevel(TraceMask));
 #else
-    say("Trace facility was not enabled at compile time");
+    /* say("Trace facility was not enabled at compile time"); */
 #endif
 }
 
 #ifdef SZTRACE
-char *FindArea(area)
-long area;
+char *
+FindArea (long area)
 {
     int i;
 
@@ -140,19 +140,7 @@ long area;
 #ifdef HAVE_STDARG_H
 void Trace(long area, char *format, ...)
 #else
-void Trace(area, format, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10)
-long area;
-char *format;
-char *arg1;
-char *arg2;
-char *arg3;
-char *arg4;
-char *arg5;
-char *arg6;
-char *arg7;
-char *arg8;
-char *arg9,
-char *arg10;
+void Trace(long area, char *format, char *arg1, char *arg2, char *arg3, char *arg4, char *arg5, char *arg6, char *arg7, char *arg8, char *arg9, char *arg10)
 #endif
 {
 #ifdef SZTRACE
@@ -201,9 +189,8 @@ char *arg10;
 #endif
 }
 
-void TraceServerInfo(indent, fullinfo)
-int indent;
-int fullinfo;
+void 
+TraceServerInfo (int indent, int fullinfo)
 {
 #ifdef SZTRACE
     int i;
--- a/source/translat.c
+++ b/source/translat.c
@@ -137,11 +137,8 @@ get_digraph(ic1)
  * This routine is *NOT* finished yet.
  */
 
-void
-digraph(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+digraph (char *command, char *args, char *subargs)
 {
 	char	*arg;
 	char	c1,
@@ -286,9 +283,8 @@ digraph(command, args, subargs)
 	}
 }
 
-static	char
-my_getarg(args)
-	char	**args;
+static char 
+my_getarg (char **args)
 {
 	char *arg;
 
--- a/source/vars.c
+++ b/source/vars.c
@@ -382,8 +382,8 @@ IrcVariable irc_variable[] =
  * init_variables: initializes the string variables that can't really be
  * initialized properly above 
  */
-void
-init_variables()
+void 
+init_variables (void)
 {
 /**************************** PATCHED by Flier ******************************/
         int old_disp;
@@ -518,10 +518,8 @@ check_variable_order(void)
  * set to that number, and it returns the first match.  Index will contain
  * the index into the array of the first found entry 
  */
-static	int
-find_variable(org_name, cnt)
-	char	*org_name;
-	int	*cnt;
+static int 
+find_variable (char *org_name, int *cnt)
 {
 	IrcVariable *v,
 		    *first;
@@ -571,10 +569,8 @@ find_variable(org_name, cnt)
  * do_boolean: just a handy thing.  Returns 1 if the str is not ON, OFF, or
  * TOGGLE 
  */
-int
-do_boolean(str, value)
-	char	*str;
-	int	*value;
+int 
+do_boolean (char *str, int *value)
 {
 	upper(str);
 	if (strcmp(str, var_settings[ON]) == 0)
@@ -599,10 +595,8 @@ do_boolean(str, value)
  * of manors.  It displays the results of the set and executes the function
  * defined in the var structure 
  */
-void
-set_var_value(var_index, value)
-	int	var_index;
-	char	*value;
+void 
+set_var_value (int var_index, char *value)
 {
 	char	*rest;
 	IrcVariable *var;
@@ -760,11 +754,8 @@ set_var_value(var_index, value)
  * partial, but non-ambbiguous, and setting depends on the variable being set 
  */
 /*ARGSUSED*/
-void
-set_variable(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+set_variable (char *command, char *args, char *subargs)
 {
 	char	*var;
 	int     cnt,
@@ -804,9 +795,8 @@ set_variable(command, args, subargs)
  * get_string_var: returns the value of the string variable given as an index
  * into the variable table.  Does no checking of variable types, etc 
  */
-char	*
-get_string_var(var)
-	int	var;
+char *
+get_string_var (int var)
 {
 	return (irc_variable[var].string);
 }
@@ -815,9 +805,8 @@ get_string_var(var)
  * get_int_var: returns the value of the integer string given as an index
  * into the variable table.  Does no checking of variable types, etc 
  */
-int
-get_int_var(var)
-	int	var;
+int 
+get_int_var (int var)
 {
 	return (irc_variable[var].integer);
 }
@@ -827,10 +816,8 @@ get_int_var(var)
  * variable table to the given string.  If string is null, the current value
  * of the string variable is freed and set to null 
  */
-void
-set_string_var(var, string)
-	int	var;
-	char	*string;
+void 
+set_string_var (int var, char *string)
 {
 	if (string)
 		malloc_strcpy(&(irc_variable[var].string), string);
@@ -842,10 +829,8 @@ set_string_var(var, string)
  * set_int_var: sets the integer value of the variable given as an index into
  * the variable table to the given value 
  */
-void
-set_int_var(var, value)
-	int	var;
-	unsigned int	value;
+void 
+set_int_var (int var, unsigned int value)
 {
 #ifndef LITE
 	if (var == NOVICE_VAR && !load_depth && !value)
@@ -905,9 +890,8 @@ save_variables(fp, do_all)
 	}
 }
 
-char	*
-make_string_var(var_name)
-	char	*var_name;
+char *
+make_string_var (char *var_name)
 {
 	int	cnt,
 		var_index;
@@ -945,9 +929,8 @@ out:
 }
 
 /* exec_warning: a warning message displayed whenever EXEC_PROTECTION is turned off.  */
-static	void
-exec_warning(value)
-	int	value;
+static void 
+exec_warning (int value)
 {
 #ifndef LITE
 	if (value == OFF)
@@ -958,9 +941,8 @@ exec_warning(value)
 #endif
 }
 
-static	void
-input_warning(value)
-	int	value;
+static void 
+input_warning (int value)
 {
 #ifndef LITE
 	if (value == OFF)
@@ -972,24 +954,22 @@ input_warning(value)
 }
 
 /* returns the size of the character set */
-int
-charset_size()
+int 
+charset_size (void)
 {
 	return get_int_var(EIGHT_BIT_CHARACTERS_VAR) ? 256 : 128;
 }
 
-static	void
-eight_bit_characters(value)
-	int	value;
+static void 
+eight_bit_characters (int value)
 {
 	if (value == ON && !term_eight_bit())
 		say("Warning!  Your terminal says it does not support eight bit characters");
 	set_term_eight_bit(value);
 }
 
-static	void
-set_realname(value)
-	char	*value;
+static void 
+set_realname (char *value)
 {
 
         if (value)
@@ -999,38 +979,38 @@ set_realname(value)
 }
 
 /**************************** PATCHED by Flier ******************************/
-static void SetScrollZstr(value)
-char *value;
+static void 
+SetScrollZstr (char *value)
 {
     if (value && *value) malloc_strcpy(&ScrollZstr,value);
     else malloc_strcpy(&ScrollZstr,empty_string);
 }
 
-static void SetMaxModes(value)
-int value;
+static void 
+SetMaxModes (int value)
 {
     if (value>6) value=6;
     if (value<1) value=1;
     set_int_var(MAX_MODES_VAR,value);
 }
 
-static void SetMaxWallopNicks(value)
-int value;
+static void 
+SetMaxWallopNicks (int value)
 {
     if (value>70) value=70;
     if (value<1) value=1;
     set_int_var(MAX_WALLOP_NICKS_VAR,value);
 }
 
-static void SetDCCBlockSize(value)
-int value;
+static void 
+SetDCCBlockSize (int value)
 {
     if (value>BIG_BUFFER_SIZE || value<16 || (value%2)) value=1024;
     set_int_var(DCC_BLOCK_SIZE_VAR,value);
 }
 
-static void SetDCCHost(value)
-char *value;
+static void 
+SetDCCHost (char *value)
 {
     if (value && *value) {
         struct in_addr inp;
@@ -1045,8 +1025,8 @@ char *value;
     }
 }
 
-static void SetDCCPorts(value)
-char *value;
+static void 
+SetDCCPorts (char *value)
 {
     char *tmpstr;
     char tmpbuf[mybufsize/4+1];
@@ -1069,22 +1049,23 @@ char *value;
     }
 }
 
-void CleanUpVars() {
+void 
+CleanUpVars (void) {
     int i;
 
     for (i=0;irc_variable[i].name;i++)
         if (irc_variable[i].type==STR_TYPE_VAR) new_free(&(irc_variable[i].string));
 }
 
-static void Cnotifystring(value)
-char *value;
+static void 
+Cnotifystring (char *value)
 {
     if (value && *value) malloc_strcpy(&CelerityNtfy,value);
     else malloc_strcpy(&CelerityNtfy,empty_string);
 }
 
-static void SetAwayFile(file)
-char *file;
+static void 
+SetAwayFile (char *file)
 {
     char *ptr;
 
@@ -1100,8 +1081,8 @@ char *file;
     else set_string_var(AWAY_FILE_VAR,DEFAULT_AWAY_FILE);
 }
 
-void SetStampFormat(tsformat)
-char *tsformat;
+void 
+SetStampFormat (char *tsformat)
 {
     int flag = 0;
     char *format = get_string_var(STAMP_FORMAT);
@@ -1127,8 +1108,8 @@ char *tsformat;
 #endif /* HAVE_STRFTIME */
 }
 
-static void SetStatusLines(value)
-int value;
+static void 
+SetStatusLines (int value)
 {
     if (value > 3) value = 3;
     if (value < 1) value = 1;
@@ -1136,15 +1117,15 @@ int value;
     StatusLines = value - 1;
 }
 
-static void SetUsername(new_username)
-char *new_username;
+static void 
+SetUsername (char *new_username)
 {
     if (new_username) strmcpy(username, new_username, NAME_LEN);
     else strmcpy(username, empty_string, NAME_LEN);
 }
 
-void SetSSLPriority(priority)
-char *priority;
+void 
+SetSSLPriority (char *priority)
 {
 #if defined(HAVE_SSL)
     const char *errpos;
@@ -1169,8 +1150,8 @@ char *priority;
 #endif
 }
 
-void SetSSLCAFile(filepath)
-char *filepath;
+void 
+SetSSLCAFile (char *filepath)
 {
 #if defined(HAVE_SSL) || defined(HAVE_OPENSSL)
     FILE *fpx;
@@ -1188,8 +1169,8 @@ char *filepath;
 #endif
 }
 
-static void SetURLBufferSize(value)
-int value;
+static void 
+SetURLBufferSize (int value)
 {
     struct urlstr *tmpurl;
 
--- a/source/whois.c
+++ b/source/whois.c
@@ -104,9 +104,8 @@ static	int	whois_type_head _((int));
 static	void	(*whois_func_head _((int))) _((WhoisStuff *, char *, char *));
 static	WhoisQueue	*remove_from_whois_queue _((int));
 
-void
-set_beep_on_msg(str)
-	char	*str;
+void 
+set_beep_on_msg (char *str)
 {
 	beep_on_level = parse_lastlog_level(str);
 	set_string_var(BEEP_ON_MSG_VAR, bits_to_lastlog_level(beep_on_level));
@@ -116,9 +115,8 @@ set_beep_on_msg(str)
  * whois_queue_head: returns the nickname at the head of the whois queue, or
  * NULL if the queue is empty.  It does not modify the queue in any way. 
  */
-static	char	*
-whois_queue_head(server_index)
-int	server_index;
+static char *
+whois_queue_head (int server_index)
 {
 	if ((WQ_head = (WhoisQueue *) get_server_qhead(server_index)) != NULL)
 		return (WQ_head->nick);
@@ -126,9 +124,8 @@ int	server_index;
 		return ((char *) 0);
 }
 
-static	int
-whois_type_head(server_index)
-int	server_index;
+static int 
+whois_type_head (int server_index)
 {
 	if ((WQ_head = (WhoisQueue *) get_server_qhead(server_index)) != NULL)
 		return (WQ_head->type);
@@ -170,8 +167,8 @@ int	server_index;
  * server reconnection to assure that no bogus entries are left in the whois
  * queue 
  */
-void
-clean_whois_queue()
+void 
+clean_whois_queue (void)
 {
 	WhoisQueue *thing;
 
@@ -193,10 +190,8 @@ clean_whois_queue()
  * actually an ISON.
  */
 /*ARGSUSED*/
-void
-ison_returned(from, ArgList)
-	char	*from,
-		**ArgList;
+void 
+ison_returned (char *from, char **ArgList)
 {
 	WhoisQueue *thing;
 
@@ -246,10 +241,8 @@ ison_returned(from, ArgList)
  * entry from the returned data.
  */
 /*ARGSUSED*/
-void
-userhost_returned(from, ArgList)
-	char	*from,
-		**ArgList;
+void 
+userhost_returned (char *from, char **ArgList)
 {
 	WhoisQueue *thing;
 	WhoisStuff *whois_stuff = NULL;
@@ -385,10 +378,8 @@ userhost_returned(from, ArgList)
  * prevent wildcards from interfering with what they want done.  See
  * channel() in edit.c 
  */
-void
-whois_name(from, ArgList)
-	char	*from;
-	char	**ArgList;
+void 
+whois_name (char *from, char **ArgList)
 {
 	char	*nick,
 		*user,
@@ -442,10 +433,8 @@ whois_name(from, ArgList)
  * 314 when the user does a WHOWAS or when a WHOIS'd user is no longer on IRC 
  * and has set the AUTO_WHOWAS variable.
  */
-void
-whowas_name(from, ArgList)
-	char	*from;
-	char	**ArgList;
+void 
+whowas_name (char *from, char **ArgList)
 {
 	char	*nick,
 		*user,
@@ -498,10 +487,8 @@ whowas_name(from, ArgList)
 	set_lastlog_msg_level(lastlog_level);
 }
 
-void
-whois_channels(from, ArgList)
-	char	*from;
-	char	**ArgList;
+void 
+whois_channels (char *from, char **ArgList)
 {
 	char	*ptr;
 	char	*line;
@@ -540,10 +527,8 @@ whois_channels(from, ArgList)
  * is NULL. This can happen if something is added to an empty whois queue
  * between the whois name being received and the server.
  */
-void
-whois_server(from, ArgList)
-	char	*from;
-	char	**ArgList;
+void 
+whois_server (char *from, char **ArgList)
 {
 	char	*server,
 		*ptr;
@@ -588,10 +573,8 @@ whois_server(from, ArgList)
  * numeric 313 from the server.  If the ignore_whois_crap flag is set,
  * nothing is dispayed. 
  */
-void
-whois_oper(from, ArgList)
-	char	*from;
-	char	**ArgList;
+void 
+whois_oper (char *from, char **ArgList)
 {
 	WhoisStuff *whois_stuff;
 
@@ -637,9 +620,8 @@ whois_oper(from, ArgList)
 
 /**************************** Patched by Flier ******************************/
 /* by braneded */
-void whois_admin(from,ArgList)
-char *from;
-char **ArgList;
+void 
+whois_admin (char *from, char **ArgList)
 {
     if (!ignore_whois_crap) {
         char *nick;
@@ -671,9 +653,8 @@ char **ArgList;
 }
 
 /* by flashback */
-void whois_secure(from,ArgList)
-    char *from;
-    char **ArgList;
+void 
+whois_secure (char *from, char **ArgList)
 {
     if (!ignore_whois_crap) {
         char *nick;
@@ -705,9 +686,8 @@ void whois_secure(from,ArgList)
 }
 
 /* by braneded */
-void whois_identified(from,ArgList)
-char *from;
-char **ArgList;
+void 
+whois_identified (char *from, char **ArgList)
 {
     if (!ignore_whois_crap) {
         char *nick;
@@ -738,9 +718,8 @@ char **ArgList;
     }
 }
 
-void whois_actually(from,ArgList)
-char *from;
-char **ArgList;
+void 
+whois_actually (char *from, char **ArgList)
 {
     if (!ignore_whois_crap) {
         char *nick;
@@ -773,9 +752,8 @@ char **ArgList;
     }
 }
 
-void whois_connecting(from, ArgList)
-char *from;
-char **ArgList;
+void 
+whois_connecting (char *from, char **ArgList)
 {
     if (!ignore_whois_crap) {
         char *str;
@@ -824,10 +802,8 @@ char **ArgList;
 }
 /****************************************************************************/
 
-void
-whois_lastcom(from, ArgList)
-	char	*from;
-	char	**ArgList;
+void 
+whois_lastcom (char *from, char **ArgList)
 {
 	if (!ignore_whois_crap)
 	{
@@ -937,10 +913,8 @@ whois_lastcom(from, ArgList)
  * numeric 313 from the server.  If the ignore_whois_crap flag is set,
  * nothing is dispayed. 
  */
-void
-whois_chop(from, ArgList)
-	char	*from;
-	char	**ArgList;
+void 
+whois_chop (char *from, char **ArgList)
 {
 	WhoisStuff *whois_stuff;
 
@@ -965,10 +939,8 @@ whois_chop(from, ArgList)
 	}
 }
 
-void
-end_of_whois(from, ArgList)
-	char	*from;
-	char	**ArgList;
+void 
+end_of_whois (char *from, char **ArgList)
 {
 	char	*nick;
 	char	*ptr;
@@ -1032,15 +1004,13 @@ end_of_whois(from, ArgList)
  * used to use it, now use no such command.  -phone, april 1993.
  */
 /*ARGSUSED*/
-void
-/**************************** PATCHED by Flier ******************************/
-/*no_such_nickname(from, ArgList)*/
-no_such_nickname(from,ArgList,dontshow)
+void 
+no_such_nickname (
 /****************************************************************************/
-	char	*from,
-		**ArgList;
-/**************************** PATCHED by Flier ******************************/
-        int     dontshow;
+    char *from,
+    char **ArgList,
+    int dontshow
+)
 /****************************************************************************/
 {
 	char	*nick;
@@ -1125,10 +1095,8 @@ no_such_nickname(from,ArgList,dontshow)
  * by this routine if the ignore_whois_crap flag is set 
  */
 /*ARGSUSED*/
-void
-user_is_away(from, ArgList)
-	char	*from,
-		**ArgList;
+void 
+user_is_away (char *from, char **ArgList)
 {
 	static	char	*last_away_msg = (char *) 0,
 			*last_away_nick = (char *) 0;
@@ -1390,8 +1358,8 @@ whois_ignore_walls(stuff, nick, text)
 /****************************************************************************/
 }
 
-void
-convert_to_whois()
+void 
+convert_to_whois (void)
 {
 	char	*NextAsked;
 	char	*Names;
@@ -1599,15 +1567,13 @@ add_ison_to_whois(nick, func)
 }
 
 /**************************** PATCHED by Flier ******************************/
-void
-add_userhost_to_whois(nick, func)
-	char	*nick;
-	void	(*func)();
+void 
+add_userhost_to_whois (char *nick, void (*func)(void))
 {
 #ifdef HAVE_STDARG_H
 	va_list vlist;
 
-	typed_add_to_whois_queue(WHOIS_USERHOST, nick, func, (char *) 0, vlist);
+	typed_add_to_whois_queue(WHOIS_USERHOST, nick, (void (*)(WhoisStuff *, char *, char *))func, (char *) 0, vlist);
 #else
 	typed_add_to_whois_queue(WHOIS_USERHOST, nick, func, (char *) 0, 0);
 #endif /* HAVE_STDARG_H */
--- a/source/whowas.c
+++ b/source/whowas.c
@@ -49,6 +49,7 @@ static int whowas_userlist_count=0;
 static int whowas_reg_count=0;
 static int whowas_chan_count=0;
 
+extern void Trace(long area, char *format, char *arg1, char *arg2, char *arg3, char *arg4, char *arg5, char *arg6, char *arg7, char *arg8, char *arg9, char *arg10);
 extern WhowasList *check_whowas_buffer(nick,userhost,channel,unlink)
 char *nick;
 char *userhost;
@@ -59,7 +60,7 @@ int  unlink;
     WhowasList *last=(WhowasList *) 0;
 
     Trace(SZ_TRACE_WHOWAS, "searching for %s!%s in %s (unlink = %d)",
-          nick, userhost, channel, unlink);
+          (char *)nick, (char *)userhost, (char *)channel, (char *)unlink, NULL, NULL, NULL, NULL, NULL, NULL);
     for (tmp=whowas_userlist_list;tmp;tmp=tmp->next) {
         if (!my_stricmp(tmp->nicklist->userhost,userhost) &&
             !my_stricmp(tmp->channel,channel)) {
@@ -69,7 +70,7 @@ int  unlink;
                 whowas_userlist_count--;
             }
             Trace(SZ_TRACE_WHOWAS, "entry found in whowas userlist list %d",
-                  whowas_userlist_count);
+                  (char *)whowas_userlist_count, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
             return(tmp);
         }
         last=tmp;
@@ -84,12 +85,12 @@ int  unlink;
                 whowas_reg_count--;
             }
             Trace(SZ_TRACE_WHOWAS, "entry found in whowas reg list %d",
-                  whowas_reg_count);
+                  (char *)whowas_reg_count, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
             return(tmp);
         }
         last=tmp;
     }
-    Trace(SZ_TRACE_WHOWAS, "entry not found");
+    Trace(SZ_TRACE_WHOWAS, "entry not found", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     return((WhowasList *) 0);
 }
 
@@ -102,7 +103,7 @@ char *channel;
 
     if (!nicklist || !(nicklist->userhost)) return;
     Trace(SZ_TRACE_WHOWAS, "add %s!%s from %s",
-          nicklist->nick, nicklist->userhost, channel);
+          (char *)nicklist->nick, (char *)nicklist->userhost, (char *)channel, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     if (nicklist->frlist) {
         if (whowas_userlist_count>=whowas_userlist_max) {
             whowas_userlist_count-=
@@ -122,7 +123,7 @@ char *channel;
         *slot=new;
         whowas_userlist_count++;
         Trace(SZ_TRACE_WHOWAS, "added to whowas userlist list %d",
-              whowas_userlist_count);
+              (char *)whowas_userlist_count, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     }
     else {
         if (whowas_reg_count>=whowas_reg_max) {
@@ -143,7 +144,7 @@ char *channel;
         *slot=new;
         whowas_reg_count++;
         Trace(SZ_TRACE_WHOWAS, "added to whowas reg list %d",
-              whowas_reg_count);
+              (char *)whowas_reg_count, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     }
 }
 
@@ -158,13 +159,13 @@ int count;
 
     /* if no ..count.. then remove ..time.. links */
     Trace(SZ_TRACE_WHOWAS, "remove %d oldest entri(es) from whowas %s list",
-          count, *list == whowas_userlist_list ? "userlist" : "reg");
+          (char *)count, (char *)(*list == whowas_userlist_list ? "userlist" : "reg"), NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     if (!count) {
         t=time(NULL);
         while (*list && ((*list)->time+timet)<=t) {
             tmp=*list;
             Trace(SZ_TRACE_WHOWAS, "remove %s!%s from %s",
-                  tmp->nicklist->nick, tmp->nicklist->userhost, tmp->channel);
+                  (char *)tmp->nicklist->nick, (char *)tmp->nicklist->userhost, (char *)tmp->channel, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
             new_free(&(tmp->nicklist->nick));
             new_free(&(tmp->nicklist->userhost));
             new_free(&(tmp->nicklist));
@@ -178,7 +179,7 @@ int count;
         while (*list && count) {
             tmp=*list;
             Trace(SZ_TRACE_WHOWAS, "remove %s!%s from %s",
-                  tmp->nicklist->nick, tmp->nicklist->userhost, tmp->channel);
+                  (char *)tmp->nicklist->nick, (char *)tmp->nicklist->userhost, (char *)tmp->channel, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
             new_free(&(tmp->nicklist->nick));
             new_free(&(tmp->nicklist->userhost));
             new_free(&(tmp->nicklist));
@@ -189,24 +190,25 @@ int count;
             count--;
         }
     }
-    Trace(SZ_TRACE_WHOWAS, "removed %d entri(es)", total);
+    Trace(SZ_TRACE_WHOWAS, "removed %d entri(es)", (char *)total, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     return(total);
 }
 
-void clean_whowas_list() {
+void 
+clean_whowas_list (void) {
     whowas_userlist_count-=remove_oldest_whowas(&whowas_userlist_list,25*60,0);
     whowas_reg_count-=remove_oldest_whowas(&whowas_reg_list,15*60,0);
 }
 
 /* Used to rehash whowas listings for new users */
-void synch_whowas_adduser(added)
-struct friends *added;
+void 
+synch_whowas_adduser (struct friends *added)
 {
     WhowasList *tmp;
     char user[mybufsize/2];
 
     Trace(SZ_TRACE_WHOWAS, "sync whowas with new userlist entry %s for %s",
-          added->userhost, added->channels);
+          (char *)added->userhost, (char *)added->channels, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     for (tmp=whowas_userlist_list;tmp;tmp=tmp->next) {
         if (!tmp->nicklist) continue;
         if (CheckChannel(tmp->channel,added->channels)) {
@@ -215,7 +217,7 @@ struct friends *added;
                 tmp->nicklist->frlist=added;
                 Trace(SZ_TRACE_WHOWAS,
                       "entry for %s updated in whowas userlist list",
-                      user);
+                      (char *)user, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
             }
         }
     }
@@ -227,20 +229,20 @@ struct friends *added;
                 tmp->nicklist->frlist=added;
                 Trace(SZ_TRACE_WHOWAS,
                       "entry for %s updated in whowas reg list",
-                      user);
+                      (char *)user, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
             }
         }
     }
 }
 
 /* Used to rehash whowas listings for removed userlist entries */
-void synch_whowas_unuser(entry)
-struct friends *entry;
+void 
+synch_whowas_unuser (struct friends *entry)
 {
     WhowasList *tmp;
 
     Trace(SZ_TRACE_WHOWAS, "sync whowas with removed userlist entry %s for %s",
-          entry->userhost, entry->channels);
+          (char *)entry->userhost, (char *)entry->channels, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     for (tmp=whowas_userlist_list;tmp;tmp=tmp->next) {
         if (!tmp->nicklist || !(tmp->nicklist->frlist)) continue;
         if (!my_stricmp(tmp->nicklist->frlist->userhost,entry->userhost) &&
@@ -248,7 +250,7 @@ struct friends *entry;
                 tmp->nicklist->frlist=(struct friends *) 0;
                 Trace(SZ_TRACE_WHOWAS,
                       "entry for %s!%s updated in whowas userlist list",
-                      tmp->nicklist->nick, tmp->nicklist->userhost);
+                      (char *)tmp->nicklist->nick, (char *)tmp->nicklist->userhost, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
         }
     }
     for (tmp=whowas_reg_list;tmp;tmp=tmp->next) {
@@ -258,20 +260,20 @@ struct friends *entry;
                 tmp->nicklist->frlist=(struct friends *) 0;
                 Trace(SZ_TRACE_WHOWAS,
                       "entry for %s!%s updated in whowas reg list",
-                      tmp->nicklist->nick, tmp->nicklist->userhost);
+                      (char *)tmp->nicklist->nick, (char *)tmp->nicklist->userhost, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
         }
     }
 }
 
 /* Used to rehash whowas listings for new shitlist entries */
-void synch_whowas_addshit(added)
-struct autobankicks *added;
+void 
+synch_whowas_addshit (struct autobankicks *added)
 {
     WhowasList *tmp;
     char user[BIG_BUFFER_SIZE+1];
 
     Trace(SZ_TRACE_WHOWAS, "sync whowas with new shitlist entry %s for %s",
-          added->userhost, added->channels);
+          (char *)added->userhost, (char *)added->channels, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     for (tmp=whowas_userlist_list;tmp;tmp=tmp->next) {
         if (!tmp->nicklist) continue;
         if (CheckChannel(tmp->channel,added->channels)) {
@@ -280,7 +282,7 @@ struct autobankicks *added;
                 tmp->nicklist->shitlist=added;
                 Trace(SZ_TRACE_WHOWAS,
                       "entry for %s updated in whowas userlist list",
-                      user);
+                      (char *)user, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
             }
         }
     }
@@ -292,20 +294,20 @@ struct autobankicks *added;
                 tmp->nicklist->shitlist=added;
                 Trace(SZ_TRACE_WHOWAS,
                       "entry for %s updated in whowas reg list",
-                      user);
+                      (char *)user, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
             }
         }
     }
 }
 
 /* Used to rehash whowas listings for removed shitlist entries */
-void synch_whowas_unshit(entry)
-struct autobankicks *entry;
+void 
+synch_whowas_unshit (struct autobankicks *entry)
 {
     WhowasList *tmp;
 
     Trace(SZ_TRACE_WHOWAS, "sync whowas with removed shitlist entry %s for %s",
-          entry->userhost, entry->channels);
+          (char *)entry->userhost, (char *)entry->channels, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     for (tmp=whowas_userlist_list;tmp;tmp=tmp->next) {
         if (!tmp->nicklist || !(tmp->nicklist->shitlist)) continue;
         if (!my_stricmp(tmp->nicklist->shitlist->userhost,entry->userhost) &&
@@ -313,7 +315,7 @@ struct autobankicks *entry;
                 tmp->nicklist->shitlist=(struct autobankicks *) 0;
                 Trace(SZ_TRACE_WHOWAS,
                       "entry for %s!%s updated in whowas userlist list",
-                      tmp->nicklist->nick, tmp->nicklist->userhost);
+                      (char *)tmp->nicklist->nick, (char *)tmp->nicklist->userhost, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
             }
     }
     for (tmp=whowas_reg_list;tmp;tmp=tmp->next) {
@@ -323,7 +325,7 @@ struct autobankicks *entry;
                 tmp->nicklist->shitlist=(struct autobankicks *) 0;
                 Trace(SZ_TRACE_WHOWAS,
                       "entry for %s!%s updated in whowas reg list",
-                      tmp->nicklist->nick, tmp->nicklist->userhost);
+                      (char *)tmp->nicklist->nick, (char *)tmp->nicklist->userhost, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
             }
     }
 }
@@ -339,7 +341,7 @@ int unlink;
     WhowasChanList *last=(WhowasChanList *) 0;
 
     Trace(SZ_TRACE_WHOWAS, "searching for channel %s (unlink=%d)",
-          channel, unlink);
+          (char *)channel, (char *)unlink, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     for (tmp=whowas_chan_list;tmp;tmp=tmp->next) {
         if (!my_stricmp(tmp->channellist->channel,channel)) {
             if (unlink) {
@@ -348,12 +350,12 @@ int unlink;
                 whowas_chan_count--;
             }
             Trace(SZ_TRACE_WHOWAS, "entry found %d",
-                  whowas_chan_count);
+                  (char *)whowas_chan_count, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
             return(tmp);
         }
         last=tmp;
     }
-    Trace(SZ_TRACE_WHOWAS, "entry not found");
+    Trace(SZ_TRACE_WHOWAS, "entry not found", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     return((WhowasChanList *) 0);
 }
 
@@ -363,7 +365,7 @@ ChannelList *channel;
     WhowasChanList *new;
     WhowasChanList **slot;
 
-    Trace(SZ_TRACE_WHOWAS, "add channel %s window %p", channel->channel, channel->window);
+    Trace(SZ_TRACE_WHOWAS, "add channel %s window %p", (char *)channel->channel, (char *)channel->window, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     if (check_whowas_chan_buffer(channel->channel,0)) return(0);
     if (whowas_chan_count>=whowas_chan_max) {
         whowas_chan_count-=
@@ -379,7 +381,7 @@ ChannelList *channel;
     new->next=*slot;
     *slot=new;
     whowas_chan_count++;
-    Trace(SZ_TRACE_WHOWAS, "added %d", whowas_chan_count);
+    Trace(SZ_TRACE_WHOWAS, "added %d", (char *)whowas_chan_count, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     return(1);
 }
 
@@ -393,12 +395,12 @@ int count;
     int total=0;
 
     /* if no ..count.. then remove ..time.. links */
-    Trace(SZ_TRACE_WHOWAS, "remove %d oldest channel entri(es)", count);
+    Trace(SZ_TRACE_WHOWAS, "remove %d oldest channel entri(es)", (char *)count, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     if (!count) {
         t = time(NULL);
         while (*list && ((*list)->time+timet)<=t) {
             tmp=*list;
-            Trace(SZ_TRACE_WHOWAS, "remove %s", tmp->channellist->channel);
+            Trace(SZ_TRACE_WHOWAS, "remove %s", (char *)tmp->channellist->channel, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
             new_free(&(tmp->channellist->channel));
             new_free(&(tmp->channellist->s_mode));
             new_free(&(tmp->channellist->key));
@@ -419,7 +421,7 @@ int count;
     else {
         while (*list && count) {
             tmp=*list;
-            Trace(SZ_TRACE_WHOWAS, "remove %s", tmp->channellist->channel);
+            Trace(SZ_TRACE_WHOWAS, "remove %s", (char *)tmp->channellist->channel, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
             new_free(&(tmp->channellist->channel));
             new_free(&(tmp->channellist->s_mode));
             new_free(&(tmp->channellist->key));
@@ -438,17 +440,19 @@ int count;
             count--;
         }
     }
-    Trace(SZ_TRACE_WHOWAS, "removed %d entri(es)", total);
+    Trace(SZ_TRACE_WHOWAS, "removed %d entri(es)", (char *)total, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     return(total);
 }
 
-void clean_whowas_chan_list() {
+void 
+clean_whowas_chan_list (void) {
     whowas_chan_count-=remove_oldest_chan_whowas(&whowas_chan_list,24*60*60,0);
 }
 
 /* Clean up memory used by whowas lists */
-void CleanUpWhowas() {
-    Trace(SZ_TRACE_WHOWAS, "clean up whowas");
+void 
+CleanUpWhowas (void) {
+    Trace(SZ_TRACE_WHOWAS, "clean up whowas", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
     remove_oldest_whowas(&whowas_userlist_list,0,whowas_userlist_max);
     remove_oldest_whowas(&whowas_reg_list,0,whowas_reg_max);
     remove_oldest_chan_whowas(&whowas_chan_list,0,whowas_chan_max);
@@ -461,12 +465,12 @@ void swap_whowas_chan_win_ptr(Window *v_window, Window *window) {
         if (tmp->channellist->window == v_window) {
             tmp->channellist->window = window;
             Trace(SZ_TRACE_WHOWAS, "swap window pointer for channel %s: %p -> %p",
-                  tmp->channellist->channel, v_window, window);
+                  (char *)tmp->channellist->channel, (char *)v_window, (char *)window, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
         }
         else if (tmp->channellist->window == window) {
             tmp->channellist->window = v_window;
             Trace(SZ_TRACE_WHOWAS, "swap window pointer for channel %s: %p -> %p",
-                  tmp->channellist->channel, window, v_window);
+                  (char *)tmp->channellist->channel, (char *)window, (char *)v_window, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
         }
     }
 }
--- a/source/window.c
+++ b/source/window.c
@@ -54,6 +54,7 @@
 #include "dcc.h"
 #include "translat.h"
 #include "parse.h"
+#include "whowas.h"
 
 /**************************** PATCHED by Flier ******************************/
 #include "myvars.h"
@@ -64,6 +65,8 @@
 #endif
 /****************************************************************************/
 
+extern void Trace(long area, char *format, char *arg1, char *arg2, char *arg3, char *arg4, char *arg5, char *arg6, char *arg7, char *arg8, char *arg9, char *arg10);
+
 /* value for underline mode, is 0 when on!  -lynx */
 int	underline = 1;
 
@@ -340,7 +343,7 @@ add_window_to_server_group(window, group)
 		}
 	window->server_group = i;
 	say("Window's server group is now %s", group);
-        Trace(SZ_TRACE_WINDOW, "window %d set server group %s", window->refnum, group);
+        Trace(SZ_TRACE_WINDOW, "window %d set server group %s", (char *)window->refnum, (char *)group, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
         TraceWindowInfo(2, window);
 	update_window_status(window, 1);
 }
@@ -349,9 +352,8 @@ add_window_to_server_group(window, group)
  * set_scroll_lines: called by /SET SCROLL_LINES to check the scroll lines
  * value 
  */
-void
-set_scroll_lines(size)
-	int	size;
+void 
+set_scroll_lines (int size)
 {
 	if (size == 0)
 	{
@@ -371,9 +373,8 @@ set_scroll_lines(size)
  * set_scroll: called by /SET SCROLL to make sure the SCROLL_LINES variable
  * is set correctly 
  */
-void
-set_scroll(value)
-	int	value;
+void 
+set_scroll (int value)
 {
 	if (value && (get_int_var(SCROLL_LINES_VAR) == 0))
 	{
@@ -399,9 +400,8 @@ set_scroll(value)
  * reset_line_cnt: called by /SET HOLD_MODE to reset the line counter so we
  * always get a held screen after the proper number of lines 
  */
-void
-reset_line_cnt(value)
-	int	value;
+void 
+reset_line_cnt (int value)
 {
 	curr_scr_win->hold_mode = value;
 	curr_scr_win->hold_on_next_rite = 0;
@@ -412,9 +412,8 @@ reset_line_cnt(value)
  * set_continued_line: checks the value of CONTINUED_LINE for validity,
  * altering it if its no good 
  */
-void
-set_continued_line(value)
-	char	*value;
+void 
+set_continued_line (char *value)
 {
 	if (value && ((int) strlen(value) > (current_screen->co / 2)))
 		value[current_screen->co / 2] = '\0';
@@ -572,12 +571,12 @@ Window	*v_window,
         for (chan = server_list[v_window->server].chan_list; chan; chan = chan->next) {
             if (chan->window == v_window) {
                 Trace(SZ_TRACE_CHANNEL, "channel %s swap window %p -> %p",
-                      chan->channel, chan->window, window);
+                      (char *)chan->channel, (char *)chan->window, (char *)window, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                 chan->window = window;
             }
             else if (chan->window == window) {
                 Trace(SZ_TRACE_CHANNEL, "channel %s swap window %p -> %p",
-                      chan->channel, chan->window, v_window);
+                      (char *)chan->channel, (char *)chan->window, (char *)v_window, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                 chan->window = v_window;
             }
         }
@@ -598,12 +597,12 @@ Window	*v_window,
         for (chan = server_list[i].chan_list; chan; chan = chan->next) {
             if (chan->window == v_window) {
                 Trace(SZ_TRACE_CHANNEL, "channel %s, server %d, swap window %p -> %p",
-                      chan->channel, i, chan->window, window);
+                      (char *)chan->channel, (char *)i, (char *)chan->window, (char *)window, NULL, NULL, NULL, NULL, NULL, NULL);
                 chan->window = window;
             }
             else if (chan->window == window) {
                 Trace(SZ_TRACE_CHANNEL, "channel %s, server %d, swap window %p -> %p",
-                      chan->channel, i, chan->window, v_window);
+                      (char *)chan->channel, (char *)i, (char *)chan->window, (char *)v_window, NULL, NULL, NULL, NULL, NULL, NULL);
                 chan->window = v_window;
             }
         }
@@ -615,7 +614,7 @@ Window	*v_window,
         for (chan = server_list[window->server].chan_list; chan; chan = chan->next) {
             if (chan->window == window) {
                 Trace(SZ_TRACE_CHANNEL, "channel %s swap window %p -> %p",
-                      chan->channel, chan->window, v_window);
+                      (char *)chan->channel, (char *)chan->window, (char *)v_window, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                 chan->window = v_window;
             }
         }
@@ -651,8 +650,8 @@ swap_window(v_window, window)
         if (window->display_size != v_window->display_size)
             window->display_size = v_window->display_size;
         Trace(SZ_TRACE_WINDOW, "swapping window %d (%s) %p with window %d (%s) %p",
-              v_window->refnum, EMPTY_STR(v_window->name), v_window,
-              window->refnum, EMPTY_STR(window->name), window);
+              (char *)v_window->refnum, EMPTY_STR(v_window->name), (char *)v_window,
+              (char *)window->refnum, EMPTY_STR(window->name), (char *)window, NULL, NULL, NULL, NULL);
         swap_whowas_chan_win_ptr(v_window, window);
 /****************************************************************************/
 
@@ -869,8 +868,8 @@ struct mfstack
  * call another routine that might change who_from.   Note that if you
  * call this routine, you *must* call restore_message_from().
  */
-void
-save_message_from()
+void 
+save_message_from (void)
 {
  	struct mfstack *mfs;
 
@@ -885,8 +884,8 @@ save_message_from()
 }
 
 /* restore_message_from: restores a previously saved who_from variable */
-void
-restore_message_from()
+void 
+restore_message_from (void)
 {
  	struct mfstack *mfs = mfstack_head.next;
 
@@ -911,10 +910,8 @@ restore_message_from()
  * variable, used by the display routines to decide which window messages
  * should go to.  
  */
-void
-message_from(who, level)
-	char	*who;
-	int	level;
+void 
+message_from (char *who, int level)
 {
 	malloc_strcpy(&who_from, who);
 	who_level = level;
@@ -925,9 +922,8 @@ message_from(who, level)
  * this is needed by XECHO, because we could want to output things in more
  * than one level.
  */
-int
-message_from_level(level)
-	int	level;
+int 
+message_from_level (int level)
 {
 	int	temp;
 
@@ -1456,8 +1452,8 @@ remove_from_window_list(window)
  * primary server is no more, a new primary server is picked from the open
  * servers 
  */
-void
-window_check_servers()
+void 
+window_check_servers (void)
 {
 	Window	*tmp;
 	int	flag, cnt, max, i, not_connected,
@@ -1529,9 +1525,8 @@ window_check_servers()
  * associated with `server', that currently contain nothing, to said
  * server.
  */
-void
-window_restore_server(server)
-	int	server;
+void 
+window_restore_server (int server)
 {
 	Window	*tmp;
 	int	max = number_of_servers,
@@ -1703,8 +1698,8 @@ Window *window;
 /****************************************************************************/
 
 /* delete_other_windows: zaps all visible windows except the current one */
-static	void
-delete_other_windows()
+static void 
+delete_other_windows (void)
 {
 	Window	*tmp,
 		*cur,
@@ -1730,8 +1725,8 @@ delete_other_windows()
  * current window with the last one, and removing it at the same time.
  */
 
-void
-window_kill_swap()
+void 
+window_kill_swap (void)
 {
 	if (invisible_list != (Window *) 0)
 	{
@@ -1749,8 +1744,8 @@ window_kill_swap()
  * window is not held, the first line is displayed and removed from the hold
  * list.  Zero is returned if no infomation is displayed 
  */
-int
-unhold_windows()
+int 
+unhold_windows (void)
 {
 	Window	*tmp;
 	char	*stuff;
@@ -1802,8 +1797,8 @@ update_window_status(window, refreshit)
  * redraw_all_status: This redraws all of the status lines for all of the
  * windows. 
  */
-void
-redraw_all_status()
+void 
+redraw_all_status (void)
 {
 	Window	*tmp;
 
@@ -1828,8 +1823,8 @@ redraw_all_status()
  * line to the right edge of the screen 
  */
 /*ARGSUSED*/
-void
-update_all_status()
+void 
+update_all_status (void)
 {
 	Window	*window;
 	Screen	*screen;
@@ -1853,9 +1848,8 @@ update_all_status()
  * calls update_all_status(), which will update the status line if the flag
  * was true, otherwise it's just ignored 
  */
-void
-status_update(flag)
-	int	flag;
+void 
+status_update (int flag)
 {
 	status_update_flag = flag;
 	update_all_status();
@@ -1868,11 +1862,8 @@ status_update(flag)
  * channel and attempt to replace it by a non-current channel or the 
  * current_channel of window specified by value of delete
  */
-int
-is_current_channel(channel, server, delete)
-	char	*channel;
-	int	server;
-	int	delete;
+int 
+is_current_channel (char *channel, int server, int delete)
 {
 	Window	*tmp,
 		*found_window = (Window *) 0;
@@ -2067,7 +2058,7 @@ bind_channel(channel, window)
         if (window->name) strmcpy(tmpbuf, window->name, sizeof(tmpbuf) - 1);
         else snprintf(tmpbuf, sizeof(tmpbuf), "%d", window->refnum);
         say("Channel %s bound to window %s", channel, tmpbuf);
-        Trace(SZ_TRACE_WINDOW, "bind channel %s", channel);
+        Trace(SZ_TRACE_WINDOW, "bind channel %s", (char *)channel, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
         TraceWindowInfo(2, window);
 /****************************************************************************/
 }
@@ -2091,7 +2082,7 @@ unbind_channel(channel, window)
             new_free(&(chan->channel));
             new_free(&chan);
         }
-        Trace(SZ_TRACE_WINDOW, "unbind channel %s", channel);
+        Trace(SZ_TRACE_WINDOW, "unbind channel %s", (char *)channel, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
         TraceWindowInfo(2, window);
 /****************************************************************************/
 }
@@ -2100,8 +2091,8 @@ unbind_channel(channel, window)
  * get_window_server: returns the server index for the window with the given
  * refnum 
  */
-int	get_window_server(refnum)
-unsigned int	refnum;
+int 
+get_window_server (unsigned int refnum)
 {
 	Window	*tmp;
 
@@ -2121,11 +2112,8 @@ unsigned int	refnum;
  * WIN_TRANSFER will move the channels to the new server, WIN_FORCE will
  * force a 'sticky' behaviour of the window. -Sol
  */
-void
-window_set_server(refnum, server, misc)
-	int	refnum;
-	int	server;
-	int	misc;
+void 
+window_set_server (int refnum, int server, int misc)
 {
 	int	old_serv;
 	Window	*window = 0, *ptr, *new_win = (Window *) 0;
@@ -2279,10 +2267,8 @@ window_set_server(refnum, server, misc)
  * channel "0".  This frees the current_channel for the
  * current_screen->current_window, * setting it to null 
  */
-char	*
-set_channel_by_refnum(refnum, channel)
-	unsigned int	refnum;
-	char	*channel;
+char *
+set_channel_by_refnum (unsigned int refnum, char *channel)
 {
 	Window	*tmp;
 	Window *tmp2;
@@ -2301,7 +2287,7 @@ set_channel_by_refnum(refnum, channel)
 	malloc_strcpy(&tmp->current_channel, channel);
 	tmp->update |= UPDATE_STATUS;
 	set_channel_window(tmp, channel, tmp->server);
-        Trace(SZ_TRACE_WINDOW, "set channel %s", channel);
+        Trace(SZ_TRACE_WINDOW, "set channel %s", (char *)channel, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
         TraceWindowInfo(2, tmp);
 	return (channel);
 }
@@ -2319,15 +2305,15 @@ get_channel_by_refnum(refnum)
 }
 
 /* current_refnum: returns the reference number for the current window */
-unsigned int
-current_refnum()
+unsigned int 
+current_refnum (void)
 {
 	return (curr_scr_win->refnum);
 }
 
 /* query_nick: Returns the query nick for the current channel */
-char	*
-query_nick()
+char *
+query_nick (void)
 {
 	return (curr_scr_win->query_nick);
 }
@@ -2369,9 +2355,8 @@ get_target_by_refnum(refnum)
 }
 
 /* set_query_nick: sets the query nick for the current channel to nick */
-void
-set_query_nick(nick)
-	char	*nick;
+void 
+set_query_nick (char *nick)
 {
 	char	*ptr;
 	NickList *tmp;
@@ -2425,10 +2410,8 @@ set_query_nick(nick)
  */
 /**************************** PATCHED by Flier ******************************/
 /*static	void*/
-void
-/****************************************************************************/
-irc_goto_window(which)
-	int	which;
+void 
+irc_goto_window (int which)
 {
 	Window	*tmp;
 	int	i;
@@ -2480,8 +2463,8 @@ hide_window(window)
 }
 
 /* hide_other_windows: makes all visible windows but the current one hidden */
-static void
-hide_other_windows()
+static void 
+hide_other_windows (void)
 {
 	Window	*tmp,
 		*cur,
@@ -2535,8 +2518,8 @@ list_a_window(window, len, clen)
  * list_windows: This Gives a terse list of all the windows, visible or not,
  * by displaying their refnums, current channel, and current nick 
  */
-static	void
-list_windows()
+static void 
+list_windows (void)
 {
 	Window	*tmp;
 	char	buffer[BIG_BUFFER_SIZE+1];
@@ -2601,8 +2584,8 @@ push_window_by_refnum(refnum)
  * down is tried (as so on).  If the stack is empty, the current window is
  * left unchanged 
  */
-static	void
-pop_window()
+static void 
+pop_window (void)
 {
 	int	refnum;
 	WindowStack *tmp;
@@ -2637,8 +2620,8 @@ pop_window()
  * show_stack: displays the current window stack.  This also purges out of
  * the stack any window refnums that are no longer valid 
  */
-static	void
-show_stack()
+static void 
+show_stack (void)
 {
 	WindowStack *last = (WindowStack *) 0,
 	    *tmp, *crap;
@@ -2684,9 +2667,8 @@ show_stack()
  * is_window_name_unique: checks the given name vs the names of all the
  * windows and returns true if the given name is unique, false otherwise 
  */
-static	int
-is_window_name_unique(name)
-	char	*name;
+static int 
+is_window_name_unique (char *name)
 {
 	Window	*tmp;
 	int	flag = 1;
@@ -2858,10 +2840,8 @@ get_invisible_window(name, args)
 }
 
 /* get_number: parses out an integer number and returns it */
-static	int
-get_number(name, args)
-	char	*name;
-	char	**args;
+static int 
+get_number (char *name, char **args)
 {
 	char	*arg;
 
@@ -2877,11 +2857,8 @@ get_number(name, args)
  * accordingly.  Returns 0 if all went well, -1 if a bogus or missing value
  * was specified 
  */
-static	int
-get_boolean(name, args, var)
-	char	*name;
-	char	**args;
-	int	*var;
+static int 
+get_boolean (char *name, char **args, int *var)
 {
 	char	*arg;
 
@@ -2899,11 +2876,8 @@ get_boolean(name, args, var)
 }
 
 /*ARGSUSED*/
-void
-windowcmd(command, args, subargs)
-	char	*command,
-		*args,
-		*subargs;
+void 
+windowcmd (char *command, char *args, char *subargs)
 {
  	size_t	len;
 	char	*arg,
@@ -2925,11 +2899,11 @@ windowcmd(command, args, subargs)
                 upper(cmd);
 		if (strncmp("NEW", cmd, len) == 0)
 		{
-                        Trace(SZ_TRACE_WINDOW, "adding new window");
+                        Trace(SZ_TRACE_WINDOW, "adding new window", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                         TraceWindowInfo(2, NULL);
 			if ((tmp = new_window()) != NULL) {
 				window = tmp;
-                                Trace(SZ_TRACE_WINDOW, "window added");
+                                Trace(SZ_TRACE_WINDOW, "window added", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                                 TraceWindowInfo(2, NULL);
                         }
 		}
@@ -2966,10 +2940,10 @@ windowcmd(command, args, subargs)
 			}
 		}
 		else if (strncmp("KILL", cmd, len) == 0) {
-                        Trace(SZ_TRACE_WINDOW, "deleting window");
+                        Trace(SZ_TRACE_WINDOW, "deleting window", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                         TraceWindowInfo(2, NULL);
 			delete_window(window);
-                        Trace(SZ_TRACE_WINDOW, "window deleted");
+                        Trace(SZ_TRACE_WINDOW, "window deleted", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                         TraceWindowInfo(2, NULL);
                 }
 		else if (strncmp("SHRINK", cmd, len) == 0)
@@ -3246,7 +3220,7 @@ windowcmd(command, args, subargs)
  						add_channel(arg, from_server, CHAN_JOINING, (ChannelList *) 0,);*/
                                                 if (from_server >= 0)
                                                     add_channel(arg, from_server, CHAN_JOINING, NULL, key, 0);
-                                                Trace(SZ_TRACE_WINDOW, "joining channel %s", arg);
+                                                Trace(SZ_TRACE_WINDOW, "joining channel %s", (char *)arg, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                                                 TraceWindowInfo(2, window);
 /****************************************************************************/
  						from_server = server;
@@ -3391,7 +3365,7 @@ windowcmd(command, args, subargs)
 			window->server_group = 0;
 			say("Window no longer has a server group");
 			update_window_status(window, 1);
-                        Trace(SZ_TRACE_WINDOW, "window %d unset server group", window->refnum);
+                        Trace(SZ_TRACE_WINDOW, "window %d unset server group", (char *)window->refnum, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
                         TraceWindowInfo(2, window);
 		}
 		else if (strncmp("DOUBLE", cmd, len) == 0)
@@ -3541,8 +3515,8 @@ out:
 /****************************************************************************/
 }
 
-int
-number_of_windows()
+int 
+number_of_windows (void)
 {
 	return (current_screen->visible_windows);
 }
@@ -3559,9 +3533,8 @@ unstop_all_windows(key, ptr)
 }
 
 /* this will make underline toggle between 2 and -1 and never let it get to 0 */
-void
-set_underline_video(value)
-	int	value;
+void 
+set_underline_video (int value)
 {
 	if (value == OFF)
 		underline = -1;
@@ -3667,7 +3640,7 @@ window_get_connected(window, arg, narg, args)
 	}
 	window_check_servers();
 /**************************** PATCHED by Flier ******************************/
-        Trace(SZ_TRACE_WINDOW, "connecting to server");
+        Trace(SZ_TRACE_WINDOW, "connecting to server", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
         TraceWindowInfo(2, window);
         if (curr_scr_win->server >= 0)
             is_current_channel(NULL, curr_scr_win->server, 0);
@@ -3714,7 +3687,8 @@ Window *wind;
 }
 
 /* Clean up all memory related to window */
-void CleanUpWindows() {
+void 
+CleanUpWindows (void) {
     Screen *tmpscreen;
     Screen *tmpscreenfree;
     Window *tmpwindow;
--- a/source/wserv.c
+++ b/source/wserv.c
@@ -67,10 +67,8 @@ RETSIGTYPE	got_sigwinch _((int));
 /*
  * ./wserv /path/to/socket /path/to/control
  */
-int
-main(argc, argv)
-	int	argc;
-	char	**argv;
+int 
+main (int argc, char **argv)
 {
 	char	lbuf[1024];
 	struct	sockaddr_un *addr = (struct sockaddr_un *) lbuf, esock;
@@ -215,8 +213,8 @@ got_sigwinch(sig)
 
 #else
 
-void
-main()
+void 
+main (void)
 {
  	return 0;
 }
--- a/tools/SZdecode.c
+++ b/tools/SZdecode.c
@@ -117,8 +117,8 @@ static unsigned int SBOX[NUMSBOX][256] = {
     }
 };
 
-unsigned int F(x)
-unsigned int x;
+unsigned int 
+F (unsigned int x)
 {
     unsigned int a, b, c, d, y;
 
@@ -135,9 +135,8 @@ unsigned int x;
     return(y);
 }
 
-void BlowfishDecipher(xl, xr)
-unsigned int *xl;
-unsigned int *xr;
+void 
+BlowfishDecipher (unsigned int *xl, unsigned int *xr)
 {
     int i;
     unsigned int Xl, Xr, temp;
@@ -160,9 +159,8 @@ unsigned int *xr;
     *xr = Xr;
 }
 
-void BlowfishEncipher(xl, xr)
-unsigned int *xl;
-unsigned int *xr;
+void 
+BlowfishEncipher (unsigned int *xl, unsigned int *xr)
 {
     int i;
     unsigned int Xl, Xr, temp;
@@ -185,9 +183,8 @@ unsigned int *xr;
     *xr = Xr;
 }
 
-void BlowfishInit(key, keybytes)
-char *key;
-int keybytes;
+void 
+BlowfishInit (char *key, int keybytes)
 {
     int i, j, k;
     unsigned int data, datal, datar;
@@ -220,8 +217,8 @@ int keybytes;
     }
 }
 
-int Base64Decode(c)
-char c;
+int 
+Base64Decode (int c)
 {
     int i;
 
@@ -229,10 +226,8 @@ char c;
     return(0);
 }
 
-void DecryptString(dest, src, key)
-char *dest;
-char *src;
-char *key;
+void 
+DecryptString (char *dest, char *src, char *key)
 {
     int i;
     unsigned int l, r;
@@ -253,10 +248,8 @@ char *key;
     *d = 0;
 }
 
-void EncryptString(dest, src, key)
-char *dest;
-char *src;
-char *key;
+void 
+EncryptString (char *dest, char *src, char *key)
 {
     int i;
     unsigned int l, r;
@@ -291,9 +284,8 @@ char *key;
     *d = 0;
 }
 
-int main(argc, argv)
-int argc;
-char **argv;
+int 
+main (int argc, char **argv)
 {
     char tmpbuf[2048];
     char decbuf[2048];
--- a/tools/SZsetup.c
+++ b/tools/SZsetup.c
@@ -105,9 +105,8 @@ char *SETAF;
 char *SETAB;
 char termbuf[1024];
 
-int main(argc,argv)
-int argc;
-char **argv;
+int 
+main (int argc, char **argv)
 {
     int i;
     FILE *fp;
@@ -153,7 +152,8 @@ char **argv;
     return 0;
 }
 
-void set_term() {
+void 
+set_term (void) {
     char buf[1024];
     char *ptr=termbuf;
     char *term;
@@ -179,13 +179,14 @@ void set_term() {
     SETAB=tgetstr("AB",&ptr);
 }
 
-void reset_term() {
+void 
+reset_term (void) {
     tcsetattr(0, TCSANOW, &old_tc);
 }			
 
 /* is_number: returns true if the given string is a number, false otherwise */
-int is_number(str)
-register char   *str;
+int 
+is_number (register char *str)
 {
     while (*str == ' ')
         str++;
@@ -203,9 +204,8 @@ register char   *str;
         return(0);
 }
 
-int build_color_new(color,dest)
-char *color;
-char *dest;
+int 
+build_color_new (char *color, char *dest)
 {
     int  colnum;
     char *tmpstr = color;
@@ -255,9 +255,8 @@ char *dest;
     return(1);
 }
 
-int set_color(color,string)
-char *color;
-char *string;
+int 
+set_color (char *color, char *string)
 {
     char *tmpstr;
     char *tmpstr1;
@@ -306,10 +305,8 @@ char *string;
 }
 
 /* copy only the first color string to dest */
-void set_colstr(setnum,colnum,colstr)
-int setnum;
-int colnum;
-char *colstr;
+void 
+set_colstr (int setnum, int colnum, char *colstr)
 {
     char tmpbuf[256];
     char *dest;
@@ -337,8 +334,8 @@ char *colstr;
 }
 
 /* return terminal sequence for color string */
-char *term_seq(color)
-char *color;
+char *
+term_seq (char *color)
 {
     static char buf[256];
 
@@ -346,7 +343,8 @@ char *color;
     return(buf);
 }
 
-void read_file() {
+void 
+read_file (void) {
     FILE *fp;
     char tmpbuf[mybufsize];
     char tmpbuf2[mybufsize];
@@ -388,8 +386,8 @@ void read_file() {
     fclose(fp);
 }
 
-char *get_color_name(number)
-int number;
+char *
+get_color_name (int number)
 {
     static char tmpbuf[mybufsize];
     char *tmpstr;
@@ -404,9 +402,8 @@ int number;
     return(tmpbuf);
 }
 
-void get_colors(number,buffer)
-int  number;
-char *buffer;
+void 
+get_colors (int number, char *buffer)
 {
     strcpy(buffer,"");
     sprintf(buffer,"%s %s %s %s %s %s", CmdsColors[number].color1,
@@ -415,7 +412,8 @@ char *buffer;
             CmdsColors[number].color6);
 }
 
-char *get_cur_colstr()
+char *
+get_cur_colstr (void)
 {
     char *dest;
 
@@ -443,8 +441,8 @@ char *get_cur_colstr()
     return(dest);
 }
 
-void save_colors(fp)
-FILE *fp;
+void 
+save_colors (FILE *fp)
 {
     int  i;
     char *s;
@@ -460,34 +458,34 @@ FILE *fp;
     
 }
 
-void move(x,y)
-int x;
-int y;
+void 
+move (int x, int y)
 {
     printf("[%d;%dH",x+1,y+1);
 }
 
-void colorset(color)
-char *color;
+void 
+colorset (char *color)
 {
     printf("%s",Colors[COLOFF]);
     printf("%s",term_seq(color));
 }
 
-void attrset(color)
-int color;
+void 
+attrset (int color)
 {
     if (color!=COLOFF) printf("%s",Colors[COLOFF]);
     printf("%s",Colors[color]);
 }
 
-void attradd(color)
-int color;
+void 
+attradd (int color)
 {
     printf("%s",Colors[color]);
 }
 
-void display_settings() {
+void 
+display_settings (void) {
     int i;
 
     /* Settings */
@@ -498,7 +496,8 @@ void display_settings() {
     }
 }
 
-void display_col_str() {
+void 
+display_col_str (void) {
     attrset(COLWHITE);
     move(YSCRCOLORS+3,XSCRCOLORS+18);
     printf("                         ");
@@ -506,7 +505,8 @@ void display_col_str() {
     printf("%s",get_cur_colstr());
 }
 
-void draw_screen() {
+void 
+draw_screen (void) {
     int i;
 
     printf("[2J[?25l");
@@ -578,11 +578,8 @@ void draw_screen() {
     display_col_str();
 }
 
-void fix_attr(colbuf,lowcolor,highcolor,curcolor)
-char *colbuf;
-int  lowcolor;
-int  highcolor;
-int  curcolor;
+void 
+fix_attr (char *colbuf, int lowcolor, int highcolor, int curcolor)
 {
     int  i;
     char tmpbuf[mybufsize];
@@ -598,11 +595,8 @@ int  curcolor;
     strcpy(colbuf,tmpbuf);
 }
 
-void fix_color(colbuf,lowcolor,highcolor,curcolor)
-char *colbuf;
-int  lowcolor;
-int  highcolor;
-int  curcolor;
+void 
+fix_color (char *colbuf, int lowcolor, int highcolor, int curcolor)
 {
     int  i;
     char tmpbuf[mybufsize];
@@ -626,8 +620,8 @@ int  curcolor;
     strcpy(colbuf,tmpbuf);
 }
 
-void inc_dec_color(key)
-char key;
+void 
+inc_dec_color (int key)
 {
     char colstr[256];
     char newstr[256];
@@ -691,7 +685,8 @@ char key;
     }
 }
 
-void edit_color()
+void 
+edit_color (void)
 {
     int  i;
     char *dest;
@@ -764,7 +759,8 @@ void edit_color()
     print_colors();
 }
 
-void do_it() {
+void 
+do_it (void) {
     int  i;
     int  disp=3;
     char key;
@@ -960,7 +956,8 @@ void do_it() {
     }
 }
 
-void print_colors() {
+void 
+print_colors (void) {
     int i;
 
     attrset(COLWHITE);
@@ -989,7 +986,8 @@ void print_colors() {
     }
 }
 
-void init_sz_colors() {
+void 
+init_sz_colors (void) {
     int i;
 
     for (i=0;i<NUMCMDCOLORS;i++) {
@@ -1298,7 +1296,8 @@ void init_sz_colors() {
     strcpy(CmdsColors[COLMISC].color5,"BOLD,BLUE");
 }
 
-void disp_warning() {
+void 
+disp_warning (void) {
     colorset(COLOR1);
     move(YSCRCOLORS+8,XSCRCOLORS);
     printf("Error");
@@ -1317,11 +1316,8 @@ void disp_warning() {
     printf("line 7");
 }
 
-void print_userhost(color,user,host,parens)
-char *color;
-char *user;
-char *host;
-int  parens;
+void 
+print_userhost (char *color, char *user, char *host, int parens)
 {
     char buf1[256];
     char buf2[256];
@@ -1347,7 +1343,8 @@ int  parens;
     }
 }
 
-void disp_join() {
+void 
+disp_join (void) {
     colorset(COLOR1);
     move(YSCRCOLORS+8,XSCRCOLORS);
     printf("Beavis ");
@@ -1384,7 +1381,8 @@ void disp_join() {
     printf(" is for shitted users");
 }
 
-void disp_msg() {
+void 
+disp_msg (void) {
     move(YSCRCOLORS+8,XSCRCOLORS);
     colorset(COLOR5);
     printf("[");
@@ -1427,7 +1425,8 @@ void disp_msg() {
     printf(")");
 }
 
-void disp_notice() {
+void 
+disp_notice (void) {
     colorset(COLOR4);
     move(YSCRCOLORS+8,XSCRCOLORS);
     printf("<");
@@ -1458,7 +1457,8 @@ void disp_notice() {
     printf("I am the great Cornholio");
 }
 
-void disp_netsplit() {
+void 
+disp_netsplit (void) {
     colorset(COLOR1);
     move(YSCRCOLORS+8,XSCRCOLORS);
     printf("Netsplit detected");
@@ -1558,7 +1558,8 @@ void disp_netsplit() {
     printf("Butt-head");
 }
 
-void disp_invite() {
+void 
+disp_invite (void) {
     colorset(COLOR1);
     move(YSCRCOLORS+8,XSCRCOLORS);
     printf("Bat ");
@@ -1585,7 +1586,8 @@ void disp_invite() {
     printf("fake");
 }
 
-void disp_mode() {
+void 
+disp_mode (void) {
     colorset(COLOR5);
     move(YSCRCOLORS+8,XSCRCOLORS);
     printf("Mode change");
@@ -1641,7 +1643,8 @@ void disp_mode() {
     printf("irc.cool");
 }
 
-void disp_setting() {
+void 
+disp_setting (void) {
     attrset(COLWHITE);
     move(YSCRCOLORS+8,XSCRCOLORS);
     printf("Found ");
@@ -1758,7 +1761,8 @@ void disp_setting() {
     printf("#butt*");
 }
 
-void disp_help() {
+void 
+disp_help (void) {
     move(YSCRCOLORS+8,XSCRCOLORS);
     attrset(COLWHITE);
     printf("Help for command ");
@@ -1789,7 +1793,8 @@ void disp_help() {
     printf("URLCATCH");
 }
 
-void disp_leave() {
+void 
+disp_leave (void) {
     colorset(COLOR1);
     move(YSCRCOLORS+8,XSCRCOLORS);
     printf("Beavis");
@@ -1831,7 +1836,8 @@ void disp_leave() {
     printf(" is for shitted people");
 }
 
-void disp_notify() {
+void 
+disp_notify (void) {
     attrset(COLWHITE);
     move(YSCRCOLORS+8,XSCRCOLORS);
     printf("Sign");
@@ -1905,7 +1911,8 @@ void disp_notify() {
     printf(" is for normal users");
 }
 
-void disp_ctcp() {
+void 
+disp_ctcp (void) {
     colorset(COLOR4);
     move(YSCRCOLORS+8,XSCRCOLORS);
     printf("CTCP PING");
@@ -1929,7 +1936,8 @@ void disp_ctcp() {
     printf("#butt");
 }
 
-void disp_kick() {
+void 
+disp_kick (void) {
     colorset(COLOR1);
     move(YSCRCOLORS+8,XSCRCOLORS);
     printf("You");
@@ -1958,7 +1966,8 @@ void disp_kick() {
     printf(" is for friends");
 }
 
-void disp_dcc() {
+void 
+disp_dcc (void) {
     colorset(COLOR5);
     move(YSCRCOLORS+8,XSCRCOLORS);
     printf("DCC");
@@ -2008,7 +2017,8 @@ void disp_dcc() {
     printf(" fake DCC handshake detected");
 }
 
-void disp_who() {
+void 
+disp_who (void) {
     move(YSCRCOLORS+8,XSCRCOLORS);
     colorset(COLOR3);
     printf("#butt");
@@ -2051,7 +2061,8 @@ void disp_who() {
     printf(")");
 }
 
-void disp_whois() {
+void 
+disp_whois (void) {
     colorset(COLOR1);
     move(YSCRCOLORS+8,XSCRCOLORS);
     printf("Beavis");
@@ -2134,7 +2145,8 @@ void disp_whois() {
     printf("163s (2 minutes)");
 }
 
-void disp_public() {
+void 
+disp_public (void) {
     move(YSCRCOLORS+8,XSCRCOLORS);
     colorset(COLOR2);
     printf("<");
@@ -2174,7 +2186,8 @@ void disp_public() {
     printf("Let's burn something");
 }
 
-void disp_cdcc() {
+void 
+disp_cdcc (void) {
     colorset(COLOR4);
     move(YSCRCOLORS+8,XSCRCOLORS);
     printf("Cdcc");
@@ -2239,7 +2252,8 @@ void disp_cdcc() {
     printf("5");
 }
 
-void disp_links() {
+void 
+disp_links (void) {
     colorset(COLOR5);
     move(YSCRCOLORS+8,XSCRCOLORS);
     printf(".");
@@ -2370,7 +2384,8 @@ void disp_links() {
     printf("`----' `--------------' `----'   `--------------'");
 }
 
-void disp_dccchat() {
+void 
+disp_dccchat (void) {
     colorset(COLOR4);
     move(YSCRCOLORS+8,XSCRCOLORS);
     printf("[");
@@ -2399,7 +2414,8 @@ void disp_dccchat() {
     printf("No pain no gain");
 }
 
-void disp_cscan() {
+void 
+disp_cscan (void) {
     attrset(COLWHITE);
     move(YSCRCOLORS+8,XSCRCOLORS);
     printf("Users on ");
@@ -2433,7 +2449,8 @@ void disp_cscan() {
     printf("This is for people from shit list");
 }
 
-void disp_nick() {
+void 
+disp_nick (void) {
     move(YSCRCOLORS+8,XSCRCOLORS);
     colorset(COLOR1);
     printf("Butt-head");
@@ -2458,7 +2475,8 @@ void disp_nick() {
     printf("Beavis");
 }
 
-void disp_me() {
+void 
+disp_me (void) {
     move(YSCRCOLORS+8,XSCRCOLORS);
     colorset(COLOR1);
     printf("*");
@@ -2491,7 +2509,8 @@ void disp_me() {
     printf("has lots of chicks");
 }
 
-void disp_misc() {
+void 
+disp_misc (void) {
     char mybuf[mybufsize];
 
     /* print_userhost() and functions it calls modify the buffer so */
--- a/source/blowfish.c
+++ b/source/blowfish.c
@@ -129,8 +129,8 @@ static unsigned int SBOX[NUMSBOX][256] = {
 };
 
 #ifdef HAVE_GMP
-extern FishDecrypt _((char *, char *, char *, int));
-extern FishEncrypt _((char *, char *, char *, int, int));
+extern int FishDecrypt _((char *, char *, char *, int));
+extern int FishEncrypt _((char *, char *, char *, int, int));
 #endif
 
 static unsigned int 
--- a/source/dh1080.c
+++ b/source/dh1080.c
@@ -26,6 +26,7 @@
 #define ZeroMemory(x,y) memset(&x, 0, y);
 
 extern char *OpenCreateFile(char *, int);
+extern void initb64(void);
 
 static const char prime1080[135] = 
 {
--- a/source/fish.c
+++ b/source/fish.c
@@ -8,6 +8,8 @@
 #include "ircaux.h"
 #include "list.h"
 #include "vars.h"
+#include "parse.h"
+#include "output.h"
 
 #ifdef HAVE_GMP
 #include "fish.h"
@@ -29,6 +31,7 @@ unsigned char b64buf[256];
 extern char MyPrivKey[];
 extern char MyPubKey[];
 extern struct encrstr *encrlist;
+extern void PrintUsage _((char *));
 
 /* void initb64(); 
    Initializes the base64->base16 conversion tab. 
--- a/source/server.c
+++ b/source/server.c
@@ -60,6 +60,9 @@ int	connect_to_unix _((int, char *));
 #include "newio.h"
 #include "vars.h"
 #include "hook.h"
+#ifdef HAVE_SSL
+#include <gnutls/x509.h>
+#endif
 
 /**************************** PATCHED by Flier ******************************/
 #include "myvars.h"
